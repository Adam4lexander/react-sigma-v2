{"version":3,"sources":["webpack://react-sigma-v2/webpack/universalModuleDefinition","webpack://react-sigma-v2/./src/hooks.ts","webpack://react-sigma-v2/external \"react\"","webpack://react-sigma-v2/./src/context.ts","webpack://react-sigma-v2/./src/ForceAtlasControl.tsx","webpack://react-sigma-v2/./node_modules/graphology-layout-forceatlas2/worker.js","webpack://react-sigma-v2/./node_modules/graphology-layout-forceatlas2/webworker.js","webpack://react-sigma-v2/./node_modules/graphology-utils/is-graph.js","webpack://react-sigma-v2/./node_modules/graphology-layout-forceatlas2/helpers.js","webpack://react-sigma-v2/./node_modules/graphology-layout-forceatlas2/defaults.js","webpack://react-sigma-v2/./src/SigmaContainer.tsx","webpack://react-sigma-v2/./node_modules/sigma/sigma.js","webpack://react-sigma-v2/./node_modules/events/events.js","webpack://react-sigma-v2/./node_modules/graphology-metrics/extent.js","webpack://react-sigma-v2/./node_modules/sigma/core/camera.js","webpack://react-sigma-v2/./node_modules/sigma/utils/animate.js","webpack://react-sigma-v2/./node_modules/sigma/utils/index.js","webpack://react-sigma-v2/./node_modules/sigma/node_modules/graphology-utils/is-graph.js","webpack://react-sigma-v2/./node_modules/sigma/utils/matrices.js","webpack://react-sigma-v2/./node_modules/sigma/utils/easings.js","webpack://react-sigma-v2/./node_modules/sigma/core/captors/mouse.js","webpack://react-sigma-v2/./node_modules/sigma/core/captors/captor.js","webpack://react-sigma-v2/./node_modules/sigma/core/quadtree.js","webpack://react-sigma-v2/./node_modules/@yomguithereal/helpers/extend.js","webpack://react-sigma-v2/./node_modules/sigma/core/labels.js","webpack://react-sigma-v2/./node_modules/sigma/settings.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/canvas/label.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/canvas/hover.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/canvas/node.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/canvas/edge-label.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/node.fast.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/node.fast.vert.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/node.fast.frag.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/common/node.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/common/program.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/utils.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/edge.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/edge.vert.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/edge.frag.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/common/edge.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/edge.arrow.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/edge.arrowHead.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/edge.arrowHead.vert.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/edge.arrowHead.frag.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/edge.clamped.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/edge.clamped.vert.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/core/captors/touch.js","webpack://react-sigma-v2/external \"graphology\"","webpack://react-sigma-v2/./src/ZoomControl.tsx","webpack://react-sigma-v2/./src/ControlsContainer.tsx","webpack://react-sigma-v2/webpack/bootstrap","webpack://react-sigma-v2/./src/index.ts"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__47__","__WEBPACK_EXTERNAL_MODULE__2__","useSigma","useSigmaContext","sigma","graph","clear","getGraph","order","import","eventHandlers","setEventHandlers","useState","useEffect","Object","keys","forEach","name","camera","on","removeListener","settings","setSettings","prevSettings","key","getSetting","setSetting","SigmaContext","createContext","SigmaProvider","Provider","context","useContext","Error","ForceAtlasControl","autoRunFor","fa2","setFa2","fa2IsRunning","setFa2IsRunning","nFa2","timeout","setTimeout","kill","clearTimeout","start","stop","e","className","onClick","title","workerFunction","isGraph","helpers","DEFAULT_SETTINGS","FA2LayoutSupervisor","params","assign","validationError","validateSettings","message","worker","matrices","running","killed","handleMessage","bind","alreadyRespawning","self","handleAddition","spawnWorker","setImmediate","prototype","terminate","createWorker","addEventListener","event","matrix","Float32Array","data","nodes","assignLayoutChanges","askForIterations","withEdges","payload","buffer","buffers","edges","push","postMessage","graphToByteArrays","NODES","EDGES","PPN","moduleShim","options","NodeMatrix","EdgeMatrix","l","r","n","n1","n2","rn","w","g","s","outboundAttCompensation","coefficient","xDist","yDist","ewc","distance","factor","force","swinging","traction","nodespeed","newX","newY","length","size","adjustSizes","thetaSquared","barnesHutTheta","RegionMatrix","outboundAttractionDistribution","barnesHutOptimize","q","q2","subdivisionAttempts","minX","Infinity","maxX","minY","maxY","Math","min","max","dx","dy","PPR","scalingRatio","pow","sqrt","gravity","strongGravityMode","edgeWeightInfluence","linLogMode","log","slowDown","iterate","value","addUndirectedEdgeWithKey","dropNode","multi","target","i","k","objects","Array","slice","call","arguments","j","index","forEachNode","node","attr","x","y","degree","fixed","forEachEdge","edge","source","weight","setNodeAttribute","collectLayoutChanges","positions","create","fn","xURL","window","URL","webkitURL","code","toString","objectUrl","createObjectURL","Blob","type","Worker","revokeObjectURL","SigmaContainer","graphOptions","id","style","initialSettings","children","containerRef","useRef","props","setSigma","current","instance","useMemo","contents","ref","extendStatics","__extends","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","TypeError","String","__","constructor","__importDefault","mod","__esModule","defineProperty","events_1","extent_1","camera_1","mouse_1","quadtree_1","utils_1","labels_1","settings_1","touch_1","nodeExtent","default","edgeExtent","PIXEL_RATIO","getPixelRatio","WEBGL_OVERSAMPLING_RATIO","applyNodeDefaults","color","defaultNodeColor","label","hidden","highlighted","applyEdgeDefaults","defaultEdgeColor","Sigma","_super","container","_this","elements","canvasContexts","webGLContexts","activeListeners","quadtree","nodeDataCache","edgeDataCache","nodeKeyToIndex","edgeKeyToIndex","normalizationFunction","createNormalizationFunction","width","height","highlightedNodes","Set","displayedLabels","hoveredNode","renderFrame","renderHighlightedNodesFrame","needToProcess","needToSoftProcess","nodePrograms","edgePrograms","assignDeep","validateGraph","HTMLElement","initializeCache","createWebGLContext","createCanvasContext","gl","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","enable","BLEND","nodeProgramClasses","NodeProgramClass","edgeProgramClasses","EdgeProgramClass","resize","bindCameraHandlers","mouseCaptor","mouse","touchCaptor","bindEventHandlers","bindGraphHandlers","process","render","createCanvas","canvas","createElement","position","class","appendChild","getContext","preserveDrawingBuffer","antialias","contextOptions","scheduleRefresh","handleResize","mouseIsOnNode","mouseX","mouseY","nodeX","nodeY","getQuadNodes","mouseGraphPosition","viewportToFramedGraph","point","handleMove","sizeRatio","getState","ratio","quadNodes","dimensions","minDistance","nodeToHover","pos","framedGraphToViewport","emit","scheduleHighlightedNodesRender","createClickListener","eventType","captor","handleClick","handleRightClick","handleDown","graphUpdate","softGraphUpdate","addNodeGraphUpdate","addEdgeGraphUpdate","keepArrays","nodeExtentProperties","zIndex","nodeProgram","defaultNodeType","allocate","zIndexOrdering","z","getNodeAttribute","getNodeAttributes","nodeReducer","applyTo","add","bufferData","edgeProgram","defaultEdgeType","getEdgeAttribute","getEdgeAttributes","edgeReducer","extremities","sourceData","targetData","computeIndices","renderLabels","visibleNodes","cameraState","viewRectangle","rectangle","x1","y1","x2","y2","gridSettings","labelGrid","labelsToDisplay","labelsToDisplayFromGrid","cache","cell","fontSize","labelSize","renderedSizeThreshold","labels","_a","labelRenderer","renderEdgeLabels","edgeLabels","clearRect","edgeLabelsToDisplay","edgeLabelsToDisplayFromNodes","displayedNodeLabels","edgeData","sourceX","sourceY","_b","targetX","targetY","edgeLabelRenderer","renderHighlightedNodes","hovers","hoverRenderer","requestFrame","cancelFrame","moving","isAnimated","isMoving","draggedEvents","currentWheelDirection","cameraMatrix","matrixFromCamera","nodesPowRatio","hideEdgesOnMove","edgesPowRatio","hideLabelsOnMove","getCamera","getMouseCaptor","getTouchCaptor","getDimensions","undefined","updateSetting","updater","previousWidth","previousHeight","offsetWidth","offsetHeight","element","setAttribute","scale","viewport","COLOR_BUFFER_BIT","refresh","viewportToGraph","viewportPoint","inverse","graphToViewport","graphPoint","removeAllListeners","removeEventListener","firstChild","removeChild","EventEmitter","ReflectOwnKeys","R","Reflect","ReflectApply","apply","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","init","once","emitter","Promise","resolve","reject","errorListener","err","resolver","eventTargetAgnosticAddListener","handler","flags","addErrorHandlerIfEventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","m","events","existing","warning","newListener","unshift","warned","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","wrapListener","arg","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","len","listeners","addListener","prependListener","prependOnceListener","list","originalListener","shift","pop","spliceOne","off","rawListeners","eventNames","attribute","a","attributes","results","extent","__assign","t","__read","o","Symbol","iterator","ar","next","done","animate_1","easings_1","DEFAULT_ZOOMING_RATIO","Camera","angle","nextFrame","enabled","previousState","from","setState","disable","getPreviousState","coordinates","smallestDimension","cos","sin","marginX","marginY","p1","p2","h","getViewportZoomedState","viewportTarget","ratioDiff","center","graphMousePosition","graphCenterPosition","animate","opts","callback","ANIMATE_DEFAULTS","easing","Date","now","initialState","duration","animationCallback","newState","animatedZoom","factorOrOptions","animatedUnzoom","animatedReset","animateNodes","index_1","targets","startPositions","attrs","frame","step","canUse32BitsIndices","extractPixel","floatColor","isPlainObject","is_graph_1","matrices_1","_i","requestAnimationFrame","cancelAnimationFrame","requestID","tag","document","devicePixelRatio","dX","dY","getter","sort","zA","zB","FLOAT_COLOR_CACHE","INT8","Int8Array","INT32","Int32Array","FLOAT32","RGBA_TEST_REGEX","RGBA_EXTRACT_REGEX","val","parseInt","charAt","test","match","identity","cameraCentering","translate","cameraScaling","cameraRotation","rotate","viewportScaling","multiply","array","Uint8Array","readPixels","RGBA","UNSIGNED_BYTE","WebGL2RenderingContext","getExtension","isFinite","of","c","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","cubicInOut","cubicOut","cubicIn","quadraticInOut","quadraticOut","quadraticIn","linear","easings","__createBinding","k2","__setModuleDefault","v","__importStar","result","captor_1","MouseCaptor","downStartTime","lastMouseX","lastMouseY","isMouseDown","movingTimeout","startCameraState","clicks","doubleClickTimeout","handleUp","handleWheel","handleOut","handleDoubleClick","getMouseCoords","newRatio","getX","getY","preventDefault","returnValue","stopPropagation","which","previousCameraState","eX","eY","lastMouse","offsetX","offsetY","delta","getWheelDelta","wheelDirection","lastWheelTriggerTime","MOUSE_ZOOM_DURATION","getTouchCoords","getTouchesArray","getPosition","clientX","clientY","ctrlKey","metaKey","altKey","shiftKey","original","touches","map","deltaY","detail","Captor","__spreadArray","to","il","rectangleCollidesWithQuad","squareCollidesWithQuad","getCircumscribedAlignedRectangle","isRectangleAligned","extend_1","rect","heightVector","tl","tr","bl","br","xL","xR","yT","qx","qy","qw","qh","pointIsInQuad","left","QuadTree","containers","lastRectangle","L","boundaries","maxLevel","level","block","topLeftBlock","topRightBlock","bottomLeftBlock","bottomRightBlock","collidingWithTopLeft","collidingWithTopRight","collidingWithBottomLeft","collidingWithBottomRight","collisions","reduce","acc","insertNode","stack","hw","hh","buildQuadrants","lr","collectedNodes","getNodesInAxisAlignedRectangleArea","abs","values","l2","l1","DEFAULT_CELL","DEFAULT_UNZOOMED_CELL","userCell","previousCamera","zooming","panning","unzooming","unzoomedPanning","zoomedPanning","trunc","cwr","cellWidth","floor","chr","cellHeight","adjustedWidth","adjustedHeight","adjustedX","adjustedY","panningWidth","panningHeight","panningX","panningY","worthyLabels","grid","maxSize","biggestNode","nodeData","ppos","has","currentNode","currentNodeData","won","nodeDegree","currentNodeDegree","biggestNodeShown","some","w1","h1","w2","h2","d1","d2","filter","worthyEdges","displayedNodeLabelsArray","highlightedNodesArray","edgeKey","outboundEdges","opposite","label_1","hover_1","edge_label_1","node_fast_1","edge_1","edge_arrow_1","labelFont","labelWeight","edgeLabelFont","edgeLabelSize","edgeLabelWeight","circle","arrow","line","font","fillStyle","fillText","node_1","beginPath","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","textWidth","measureText","round","moveTo","arcTo","lineTo","closePath","fill","PI_TIMES_2","PI","arc","cx","cy","acos","asin","save","restore","node_fast_vert_glsl_1","node_fast_frag_glsl_1","NodeProgramFast","offset","program","useProgram","uniform1f","ratioLocation","scaleLocation","uniformMatrix3fv","matrixLocation","drawArrays","POINTS","AbstractNodeProgram","toStringTag","createNodeCompoundProgram","vertexShaderSource","fragmentShaderSource","points","positionLocation","getAttribLocation","sizeLocation","colorLocation","getUniformLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","BYTES_PER_ELEMENT","AbstractProgram","programClasses","NodeCompoundProgram","programs","ProgramClass","capacity","createBuffer","bindBuffer","ARRAY_BUFFER","vertexShader","loadVertexShader","fragmentShader","loadFragmentShader","loadProgram","DYNAMIC_DRAW","loadShader","glType","VERTEX_SHADER","FRAGMENT_SHADER","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","infoLog","getShaderInfoLog","deleteShader","shaders","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","deleteProgram","edge_vert_glsl_1","edge_frag_glsl_1","EdgeProgram","indicesBuffer","normalLocation","thicknessLocation","cameraRatioLocation","viewportRatioLocation","thicknessRatioLocation","IndicesArray","Uint32Array","Uint16Array","indicesArray","indicesType","UNSIGNED_INT","UNSIGNED_SHORT","ELEMENT_ARRAY_BUFFER","indices","STATIC_DRAW","i_1","thickness","drawElements","TRIANGLES","AbstractEdgeProgram","createEdgeCompoundProgram","EdgeCompoundProgram","edge_arrowHead_1","edge_clamped_1","edge_arrowHead_vert_glsl_1","edge_arrowHead_frag_glsl_1","ATTRIBUTES","EdgeArrowHeadProgram","radiusLocation","barycentricLocation","radius","edge_clamped_vert_glsl_1","EdgeClampedProgram","TouchCaptor","touchMode","handleStart","handleLeave","dispatchRelatedMouseEvent","mousePosition","mouseEvent","MouseEvent","dispatchEvent","startTouchesPositions","lastTouchesPositions","x0","y0","_c","startTouchesAngle","atan2","startTouchesDistance","touchesPositions","xStart","yStart","newCameraState","_d","_e","angleDiff","hypot","touchGraphPosition","ZoomControl","animationDuration","zoom","ControlsContainer","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","useRegisterEvents","useLoadGraph","useSetSettings"],"mappings":"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","file":"react-sigma-v2.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"graphology\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"graphology\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"react-sigma-v2\"] = factory(require(\"graphology\"), require(\"react\"));\n\telse\n\t\troot[\"react-sigma-v2\"] = factory(root[\"graphology\"], root[\"react\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__47__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn ","import { useEffect, useState } from \"react\";\nimport { Sigma } from \"sigma/sigma\";\nimport { Settings } from \"sigma/settings\";\nimport Graph from \"graphology\";\nimport { useSigmaContext } from \"./context\";\nimport { EventHandlers } from \"./index\";\n\nexport function useSigma(): Sigma {\n  return useSigmaContext().sigma;\n}\n\nexport function useLoadGraph(): (graph: Graph, clear?: boolean) => void {\n  const sigma = useSigma();\n\n  return (graph: Graph, clear = true) => {\n    if (sigma && graph) {\n      if (clear && sigma.getGraph().order > 0) sigma.getGraph().clear();\n      sigma.getGraph().import(graph);\n    }\n  };\n}\n\nexport function useRegisterEvents(): (eventHandlers: Partial<EventHandlers>) => void {\n  const sigma = useSigma();\n  const [eventHandlers, setEventHandlers] = useState<Partial<EventHandlers>>({});\n\n  useEffect(() => {\n    if (sigma && eventHandlers) {\n      Object.keys(eventHandlers).forEach(name => {\n        if (name === \"cameraUpdated\") {\n          sigma.camera.on(name, eventHandlers[name]);\n        } else {\n          sigma.on(name, eventHandlers[name]);\n        }\n      });\n      // cleanup\n      return () => {\n        Object.keys(eventHandlers).forEach(name => {\n          if (name === \"cameraUpdated\") {\n            sigma.camera.removeListener(name, eventHandlers[name]);\n          } else {\n            sigma.removeListener(name, eventHandlers[name]);\n          }\n        });\n      };\n    }\n  }, [sigma, eventHandlers]);\n\n  return setEventHandlers;\n}\n\nexport function useSetSettings(): (settings: Partial<Settings>) => void {\n  const sigma = useSigma();\n  const [settings, setSettings] = useState<Partial<Settings>>({});\n\n  useEffect(() => {\n    if (sigma && settings) {\n      const prevSettings: Partial<Settings> = {};\n\n      Object.keys(settings).forEach(key => {\n        prevSettings[key] = sigma.getSetting(key);\n        sigma.setSetting(key, settings[key]);\n      });\n\n      // cleanup\n      return () => {\n        Object.keys(prevSettings).forEach(key => {\n          sigma.setSetting(key, prevSettings[key]);\n        });\n      };\n    }\n  }, [sigma, settings]);\n\n  return setSettings;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import { createContext, useContext } from \"react\";\nimport { Sigma } from \"sigma/sigma\";\n\nexport interface SigmaContextInterface {\n  sigma: Sigma;\n}\n\nexport const SigmaContext = createContext<SigmaContextInterface | null>(null);\n\nexport const SigmaProvider = SigmaContext.Provider;\n\nexport function useSigmaContext(): SigmaContextInterface {\n  const context = useContext(SigmaContext);\n  if (context == null) {\n    throw new Error(\"No context provided: useSigmaContext() can only be used in a descendant of <SigmaContainer>\");\n  }\n  return context;\n}\n","import React, { CSSProperties, ReactNode, useEffect, useMemo, useRef, useState } from \"react\";\nimport FA2LayoutSupervisor, { FA2LayoutSupervisorParameters } from \"graphology-layout-forceatlas2/worker\";\nimport { useSigma } from \"./hooks\";\n\ninterface Props {\n  /**\n   * The FA2 worker settings.\n   */\n  settings?: FA2LayoutSupervisorParameters;\n  /**\n   * Option to tell what we do when the component is mounted\n   *  - <code>-1</code> means that we do nothing (it's the same as no value)\n   *  - <code>0</code> means that we start the algo (and don't auto stop it)\n   *  - <code>X</code> mans that we start the algo, and stop it after X milliseconds\n   */\n  autoRunFor?: number;\n}\n\nexport const ForceAtlasControl: React.FC<Props> = ({ settings = {}, autoRunFor = -1 }) => {\n  // Get Sigma\n  const sigma = useSigma();\n  // The FA2 worker\n  const [fa2, setFa2] = useState<FA2LayoutSupervisor | null>(null);\n  // Is FA2 is running\n  const [fa2IsRunning, setFa2IsRunning] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (sigma) {\n      // Create the FA2 worker\n      const nFa2 = new FA2LayoutSupervisor(sigma.getGraph(), settings);\n      setFa2(nFa2);\n\n      // we run the algo\n      let timeout = null;\n      if (autoRunFor > -1 && sigma.getGraph().order > 0) {\n        setFa2IsRunning(true);\n        // set a timeout to stop it\n        timeout =\n          autoRunFor > 0\n            ? setTimeout(() => {\n                setFa2IsRunning(false);\n              }, autoRunFor)\n            : null;\n      }\n\n      //cleaning\n      return () => {\n        if (nFa2) nFa2.kill();\n        if (timeout) clearTimeout(timeout);\n      };\n    }\n  }, []);\n\n  useEffect(() => {\n    try {\n      if (fa2IsRunning === true) {\n        fa2.start();\n      } else {\n        fa2.stop();\n      }\n    } catch (e) {}\n  }, [fa2, fa2IsRunning]);\n\n  return (\n    <div className={`react-sigma-control-forceatlas2 ${fa2IsRunning ? \"running\" : \"stopped\"}`}>\n      <button\n        onClick={() => setFa2IsRunning(e => !e)}\n        title={fa2IsRunning ? \"Stop the layout animation\" : \"Start the layout animation\"}\n      ></button>\n    </div>\n  );\n};\n","/**\n * Graphology ForceAtlas2 Layout Supervisor\n * =========================================\n *\n * Supervisor class able to spawn a web worker to run the FA2 layout in a\n * separate thread not to block UI with heavy synchronous computations.\n */\nvar workerFunction = require('./webworker.js'),\n    isGraph = require('graphology-utils/is-graph'),\n    helpers = require('./helpers.js');\n\nvar DEFAULT_SETTINGS = require('./defaults.js');\n\n/**\n * Class representing a FA2 layout run by a webworker.\n *\n * @constructor\n * @param  {Graph}         graph        - Target graph.\n * @param  {object|number} params       - Parameters:\n * @param  {object}          [settings] - Settings.\n */\nfunction FA2LayoutSupervisor(graph, params) {\n  params = params || {};\n\n  // Validation\n  if (!isGraph(graph))\n    throw new Error('graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.');\n\n  // Validating settings\n  var settings = helpers.assign({}, DEFAULT_SETTINGS, params.settings),\n      validationError = helpers.validateSettings(settings);\n\n  if (validationError)\n    throw new Error('graphology-layout-forceatlas2/worker: ' + validationError.message);\n\n  // Properties\n  this.worker = null;\n  this.graph = graph;\n  this.settings = settings;\n  this.matrices = null;\n  this.running = false;\n  this.killed = false;\n\n  // Binding listeners\n  this.handleMessage = this.handleMessage.bind(this);\n\n  var alreadyRespawning = false;\n  var self = this;\n\n  this.handleAddition = function() {\n    if (alreadyRespawning)\n      return;\n\n    alreadyRespawning = true;\n\n    self.spawnWorker();\n    setImmediate(function() {\n      alreadyRespawning = false;\n    });\n  };\n\n  graph.on('nodeAdded', this.handleAddition);\n  graph.on('edgeAdded', this.handleAddition);\n\n  // Spawning worker\n  this.spawnWorker();\n}\n\n/**\n * Internal method used to spawn the web worker.\n */\nFA2LayoutSupervisor.prototype.spawnWorker = function() {\n  if (this.worker)\n    this.worker.terminate();\n\n  this.worker = helpers.createWorker(workerFunction);\n  this.worker.addEventListener('message', this.handleMessage);\n\n  if (this.running) {\n    this.running = false;\n    this.start();\n  }\n};\n\n/**\n * Internal method used to handle the worker's messages.\n *\n * @param {object} event - Event to handle.\n */\nFA2LayoutSupervisor.prototype.handleMessage = function(event) {\n  if (!this.running)\n    return;\n\n  var matrix = new Float32Array(event.data.nodes);\n\n  helpers.assignLayoutChanges(this.graph, matrix);\n  this.matrices.nodes = matrix;\n\n  // Looping\n  this.askForIterations();\n};\n\n/**\n * Internal method used to ask for iterations from the worker.\n *\n * @param  {boolean} withEdges - Should we send edges along?\n * @return {FA2LayoutSupervisor}\n */\nFA2LayoutSupervisor.prototype.askForIterations = function(withEdges) {\n  var matrices = this.matrices;\n\n  var payload = {\n    settings: this.settings,\n    nodes: matrices.nodes.buffer\n  };\n\n  var buffers = [matrices.nodes.buffer];\n\n  if (withEdges) {\n    payload.edges = matrices.edges.buffer;\n    buffers.push(matrices.edges.buffer);\n  }\n\n  this.worker.postMessage(payload, buffers);\n\n  return this;\n};\n\n/**\n * Method used to start the layout.\n *\n * @return {FA2LayoutSupervisor}\n */\nFA2LayoutSupervisor.prototype.start = function() {\n  if (this.killed)\n    throw new Error('graphology-layout-forceatlas2/worker.start: layout was killed.');\n\n  if (this.running)\n    return this;\n\n  // Building matrices\n  this.matrices = helpers.graphToByteArrays(this.graph);\n\n  this.running = true;\n  this.askForIterations(true);\n\n  return this;\n};\n\n/**\n * Method used to stop the layout.\n *\n * @return {FA2LayoutSupervisor}\n */\nFA2LayoutSupervisor.prototype.stop = function() {\n  this.running = false;\n\n  return this;\n};\n\n/**\n * Method used to kill the layout.\n *\n * @return {FA2LayoutSupervisor}\n */\nFA2LayoutSupervisor.prototype.kill = function() {\n  if (this.killed)\n    return this;\n\n  this.running = false;\n  this.killed = true;\n\n  // Clearing memory\n  this.matrices = null;\n\n  // Terminating worker\n  this.worker.terminate();\n\n  // Unbinding listeners\n  this.graph.removeListener('nodeAdded', this.handleAddition);\n  this.graph.removeListener('edgeAdded', this.handleAddition);\n};\n\n/**\n * Exporting.\n */\nmodule.exports = FA2LayoutSupervisor;\n","/**\n * Graphology ForceAtlas2 Layout Webworker\n * ========================================\n *\n * Web worker able to run the layout in a separate thread.\n */\nmodule.exports = function worker() {\n  var NODES,\n      EDGES;\n\n  var moduleShim = {};\n\n  (function() {\n    /* eslint no-constant-condition: 0 */\n/**\n * Graphology ForceAtlas2 Iteration\n * =================================\n *\n * Function used to perform a single iteration of the algorithm.\n */\n\n/**\n * Matrices properties accessors.\n */\nvar NODE_X = 0,\n    NODE_Y = 1,\n    NODE_DX = 2,\n    NODE_DY = 3,\n    NODE_OLD_DX = 4,\n    NODE_OLD_DY = 5,\n    NODE_MASS = 6,\n    NODE_CONVERGENCE = 7,\n    NODE_SIZE = 8,\n    NODE_FIXED = 9;\n\nvar EDGE_SOURCE = 0,\n    EDGE_TARGET = 1,\n    EDGE_WEIGHT = 2;\n\nvar REGION_NODE = 0,\n    REGION_CENTER_X = 1,\n    REGION_CENTER_Y = 2,\n    REGION_SIZE = 3,\n    REGION_NEXT_SIBLING = 4,\n    REGION_FIRST_CHILD = 5,\n    REGION_MASS = 6,\n    REGION_MASS_CENTER_X = 7,\n    REGION_MASS_CENTER_Y = 8;\n\nvar SUBDIVISION_ATTEMPTS = 3;\n\n/**\n * Constants.\n */\nvar PPN = 10,\n    PPE = 3,\n    PPR = 9;\n\nvar MAX_FORCE = 10;\n\n/**\n * Function used to perform a single interation of the algorithm.\n *\n * @param  {object}       options    - Layout options.\n * @param  {Float32Array} NodeMatrix - Node data.\n * @param  {Float32Array} EdgeMatrix - Edge data.\n * @return {object}                  - Some metadata.\n */\nmoduleShim.exports = function iterate(options, NodeMatrix, EdgeMatrix) {\n\n  // Initializing variables\n  var l, r, n, n1, n2, rn, e, w, g, s;\n\n  var order = NodeMatrix.length,\n      size = EdgeMatrix.length;\n\n  var adjustSizes = options.adjustSizes;\n\n  var thetaSquared = options.barnesHutTheta * options.barnesHutTheta;\n\n  var outboundAttCompensation,\n      coefficient,\n      xDist,\n      yDist,\n      ewc,\n      distance,\n      factor;\n\n  var RegionMatrix = [];\n\n  // 1) Initializing layout data\n  //-----------------------------\n\n  // Resetting positions & computing max values\n  for (n = 0; n < order; n += PPN) {\n    NodeMatrix[n + NODE_OLD_DX] = NodeMatrix[n + NODE_DX];\n    NodeMatrix[n + NODE_OLD_DY] = NodeMatrix[n + NODE_DY];\n    NodeMatrix[n + NODE_DX] = 0;\n    NodeMatrix[n + NODE_DY] = 0;\n  }\n\n  // If outbound attraction distribution, compensate\n  if (options.outboundAttractionDistribution) {\n    outboundAttCompensation = 0;\n    for (n = 0; n < order; n += PPN) {\n      outboundAttCompensation += NodeMatrix[n + NODE_MASS];\n    }\n\n    outboundAttCompensation /= (order / PPN);\n  }\n\n\n  // 1.bis) Barnes-Hut computation\n  //------------------------------\n\n  if (options.barnesHutOptimize) {\n\n    // Setting up\n    var minX = Infinity,\n        maxX = -Infinity,\n        minY = Infinity,\n        maxY = -Infinity,\n        q, q2, subdivisionAttempts;\n\n    // Computing min and max values\n    for (n = 0; n < order; n += PPN) {\n      minX = Math.min(minX, NodeMatrix[n + NODE_X]);\n      maxX = Math.max(maxX, NodeMatrix[n + NODE_X]);\n      minY = Math.min(minY, NodeMatrix[n + NODE_Y]);\n      maxY = Math.max(maxY, NodeMatrix[n + NODE_Y]);\n    }\n\n    // squarify bounds, it's a quadtree\n    var dx = maxX - minX, dy = maxY - minY;\n    if (dx > dy) {\n      minY -= (dx - dy) / 2;\n      maxY = minY + dx;\n    }\n    else {\n      minX -= (dy - dx) / 2;\n      maxX = minX + dy;\n    }\n\n    // Build the Barnes Hut root region\n    RegionMatrix[0 + REGION_NODE] = -1;\n    RegionMatrix[0 + REGION_CENTER_X] = (minX + maxX) / 2;\n    RegionMatrix[0 + REGION_CENTER_Y] = (minY + maxY) / 2;\n    RegionMatrix[0 + REGION_SIZE] = Math.max(maxX - minX, maxY - minY);\n    RegionMatrix[0 + REGION_NEXT_SIBLING] = -1;\n    RegionMatrix[0 + REGION_FIRST_CHILD] = -1;\n    RegionMatrix[0 + REGION_MASS] = 0;\n    RegionMatrix[0 + REGION_MASS_CENTER_X] = 0;\n    RegionMatrix[0 + REGION_MASS_CENTER_Y] = 0;\n\n    // Add each node in the tree\n    l = 1;\n    for (n = 0; n < order; n += PPN) {\n\n      // Current region, starting with root\n      r = 0;\n      subdivisionAttempts = SUBDIVISION_ATTEMPTS;\n\n      while (true) {\n        // Are there sub-regions?\n\n        // We look at first child index\n        if (RegionMatrix[r + REGION_FIRST_CHILD] >= 0) {\n\n          // There are sub-regions\n\n          // We just iterate to find a \"leaf\" of the tree\n          // that is an empty region or a region with a single node\n          // (see next case)\n\n          // Find the quadrant of n\n          if (NodeMatrix[n + NODE_X] < RegionMatrix[r + REGION_CENTER_X]) {\n\n            if (NodeMatrix[n + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n              // Top Left quarter\n              q = RegionMatrix[r + REGION_FIRST_CHILD];\n            }\n            else {\n\n              // Bottom Left quarter\n              q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR;\n            }\n          }\n          else {\n            if (NodeMatrix[n + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n              // Top Right quarter\n              q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 2;\n            }\n            else {\n\n              // Bottom Right quarter\n              q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 3;\n            }\n          }\n\n          // Update center of mass and mass (we only do it for non-leave regions)\n          RegionMatrix[r + REGION_MASS_CENTER_X] =\n            (RegionMatrix[r + REGION_MASS_CENTER_X] * RegionMatrix[r + REGION_MASS] +\n             NodeMatrix[n + NODE_X] * NodeMatrix[n + NODE_MASS]) /\n            (RegionMatrix[r + REGION_MASS] + NodeMatrix[n + NODE_MASS]);\n\n          RegionMatrix[r + REGION_MASS_CENTER_Y] =\n            (RegionMatrix[r + REGION_MASS_CENTER_Y] * RegionMatrix[r + REGION_MASS] +\n             NodeMatrix[n + NODE_Y] * NodeMatrix[n + NODE_MASS]) /\n            (RegionMatrix[r + REGION_MASS] + NodeMatrix[n + NODE_MASS]);\n\n          RegionMatrix[r + REGION_MASS] += NodeMatrix[n + NODE_MASS];\n\n          // Iterate on the right quadrant\n          r = q;\n          continue;\n        }\n        else {\n\n          // There are no sub-regions: we are in a \"leaf\"\n\n          // Is there a node in this leave?\n          if (RegionMatrix[r + REGION_NODE] < 0) {\n\n            // There is no node in region:\n            // we record node n and go on\n            RegionMatrix[r + REGION_NODE] = n;\n            break;\n          }\n          else {\n\n            // There is a node in this region\n\n            // We will need to create sub-regions, stick the two\n            // nodes (the old one r[0] and the new one n) in two\n            // subregions. If they fall in the same quadrant,\n            // we will iterate.\n\n            // Create sub-regions\n            RegionMatrix[r + REGION_FIRST_CHILD] = l * PPR;\n            w = RegionMatrix[r + REGION_SIZE] / 2; // new size (half)\n\n            // NOTE: we use screen coordinates\n            // from Top Left to Bottom Right\n\n            // Top Left sub-region\n            g = RegionMatrix[r + REGION_FIRST_CHILD];\n\n            RegionMatrix[g + REGION_NODE] = -1;\n            RegionMatrix[g + REGION_CENTER_X] = RegionMatrix[r + REGION_CENTER_X] - w;\n            RegionMatrix[g + REGION_CENTER_Y] = RegionMatrix[r + REGION_CENTER_Y] - w;\n            RegionMatrix[g + REGION_SIZE] = w;\n            RegionMatrix[g + REGION_NEXT_SIBLING] = g + PPR;\n            RegionMatrix[g + REGION_FIRST_CHILD] = -1;\n            RegionMatrix[g + REGION_MASS] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_X] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_Y] = 0;\n\n            // Bottom Left sub-region\n            g += PPR;\n            RegionMatrix[g + REGION_NODE] = -1;\n            RegionMatrix[g + REGION_CENTER_X] = RegionMatrix[r + REGION_CENTER_X] - w;\n            RegionMatrix[g + REGION_CENTER_Y] = RegionMatrix[r + REGION_CENTER_Y] + w;\n            RegionMatrix[g + REGION_SIZE] = w;\n            RegionMatrix[g + REGION_NEXT_SIBLING] = g + PPR;\n            RegionMatrix[g + REGION_FIRST_CHILD] = -1;\n            RegionMatrix[g + REGION_MASS] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_X] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_Y] = 0;\n\n            // Top Right sub-region\n            g += PPR;\n            RegionMatrix[g + REGION_NODE] = -1;\n            RegionMatrix[g + REGION_CENTER_X] = RegionMatrix[r + REGION_CENTER_X] + w;\n            RegionMatrix[g + REGION_CENTER_Y] = RegionMatrix[r + REGION_CENTER_Y] - w;\n            RegionMatrix[g + REGION_SIZE] = w;\n            RegionMatrix[g + REGION_NEXT_SIBLING] = g + PPR;\n            RegionMatrix[g + REGION_FIRST_CHILD] = -1;\n            RegionMatrix[g + REGION_MASS] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_X] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_Y] = 0;\n\n            // Bottom Right sub-region\n            g += PPR;\n            RegionMatrix[g + REGION_NODE] = -1;\n            RegionMatrix[g + REGION_CENTER_X] = RegionMatrix[r + REGION_CENTER_X] + w;\n            RegionMatrix[g + REGION_CENTER_Y] = RegionMatrix[r + REGION_CENTER_Y] + w;\n            RegionMatrix[g + REGION_SIZE] = w;\n            RegionMatrix[g + REGION_NEXT_SIBLING] = RegionMatrix[r + REGION_NEXT_SIBLING];\n            RegionMatrix[g + REGION_FIRST_CHILD] = -1;\n            RegionMatrix[g + REGION_MASS] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_X] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_Y] = 0;\n\n            l += 4;\n\n            // Now the goal is to find two different sub-regions\n            // for the two nodes: the one previously recorded (r[0])\n            // and the one we want to add (n)\n\n            // Find the quadrant of the old node\n            if (NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_X] < RegionMatrix[r + REGION_CENTER_X]) {\n              if (NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n                // Top Left quarter\n                q = RegionMatrix[r + REGION_FIRST_CHILD];\n              }\n              else {\n\n                // Bottom Left quarter\n                q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR;\n              }\n            }\n            else {\n              if (NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n                // Top Right quarter\n                q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 2;\n              }\n              else {\n\n                // Bottom Right quarter\n                q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 3;\n              }\n            }\n\n            // We remove r[0] from the region r, add its mass to r and record it in q\n            RegionMatrix[r + REGION_MASS] = NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_MASS];\n            RegionMatrix[r + REGION_MASS_CENTER_X] = NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_X];\n            RegionMatrix[r + REGION_MASS_CENTER_Y] = NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_Y];\n\n            RegionMatrix[q + REGION_NODE] = RegionMatrix[r + REGION_NODE];\n            RegionMatrix[r + REGION_NODE] = -1;\n\n            // Find the quadrant of n\n            if (NodeMatrix[n + NODE_X] < RegionMatrix[r + REGION_CENTER_X]) {\n              if (NodeMatrix[n + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n                // Top Left quarter\n                q2 = RegionMatrix[r + REGION_FIRST_CHILD];\n              }\n              else {\n                // Bottom Left quarter\n                q2 = RegionMatrix[r + REGION_FIRST_CHILD] + PPR;\n              }\n            }\n            else {\n              if (NodeMatrix[n + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n                // Top Right quarter\n                q2 = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 2;\n              }\n              else {\n\n                // Bottom Right quarter\n                q2 = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 3;\n              }\n            }\n\n            if (q === q2) {\n\n              // If both nodes are in the same quadrant,\n              // we have to try it again on this quadrant\n              if (subdivisionAttempts--) {\n                r = q;\n                continue; // while\n              }\n              else {\n                // we are out of precision here, and we cannot subdivide anymore\n                // but we have to break the loop anyway\n                subdivisionAttempts = SUBDIVISION_ATTEMPTS;\n                break; // while\n              }\n\n            }\n\n            // If both quadrants are different, we record n\n            // in its quadrant\n            RegionMatrix[q2 + REGION_NODE] = n;\n            break;\n          }\n        }\n      }\n    }\n  }\n\n\n  // 2) Repulsion\n  //--------------\n  // NOTES: adjustSizes = antiCollision & scalingRatio = coefficient\n\n  if (options.barnesHutOptimize) {\n    coefficient = options.scalingRatio;\n\n    // Applying repulsion through regions\n    for (n = 0; n < order; n += PPN) {\n\n      // Computing leaf quad nodes iteration\n\n      r = 0; // Starting with root region\n      while (true) {\n\n        if (RegionMatrix[r + REGION_FIRST_CHILD] >= 0) {\n\n          // The region has sub-regions\n\n          // We run the Barnes Hut test to see if we are at the right distance\n          distance = (\n            (Math.pow(NodeMatrix[n + NODE_X] - RegionMatrix[r + REGION_MASS_CENTER_X], 2)) +\n            (Math.pow(NodeMatrix[n + NODE_Y] - RegionMatrix[r + REGION_MASS_CENTER_Y], 2))\n          );\n\n          s = RegionMatrix[r + REGION_SIZE];\n\n          if ((4 * s * s) / distance < thetaSquared) {\n\n            // We treat the region as a single body, and we repulse\n\n            xDist = NodeMatrix[n + NODE_X] - RegionMatrix[r + REGION_MASS_CENTER_X];\n            yDist = NodeMatrix[n + NODE_Y] - RegionMatrix[r + REGION_MASS_CENTER_Y];\n\n            if (adjustSizes === true) {\n\n              //-- Linear Anti-collision Repulsion\n              if (distance > 0) {\n                factor = coefficient * NodeMatrix[n + NODE_MASS] *\n                  RegionMatrix[r + REGION_MASS] / distance;\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n              else if (distance < 0) {\n                factor = -coefficient * NodeMatrix[n + NODE_MASS] *\n                  RegionMatrix[r + REGION_MASS] / Math.sqrt(distance);\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n            }\n            else {\n\n              //-- Linear Repulsion\n              if (distance > 0) {\n                factor = coefficient * NodeMatrix[n + NODE_MASS] *\n                  RegionMatrix[r + REGION_MASS] / distance;\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n            }\n\n            // When this is done, we iterate. We have to look at the next sibling.\n            r = RegionMatrix[r + REGION_NEXT_SIBLING];\n            if (r < 0)\n              break; // No next sibling: we have finished the tree\n\n            continue;\n          }\n          else {\n\n            // The region is too close and we have to look at sub-regions\n            r = RegionMatrix[r + REGION_FIRST_CHILD];\n            continue;\n          }\n\n        }\n        else {\n\n          // The region has no sub-region\n          // If there is a node r[0] and it is not n, then repulse\n          rn = RegionMatrix[r + REGION_NODE];\n\n          if (rn >= 0 && rn !== n) {\n            xDist = NodeMatrix[n + NODE_X] - NodeMatrix[rn + NODE_X];\n            yDist = NodeMatrix[n + NODE_Y] - NodeMatrix[rn + NODE_Y];\n\n            distance = xDist * xDist + yDist * yDist;\n\n            if (adjustSizes === true) {\n\n              //-- Linear Anti-collision Repulsion\n              if (distance > 0) {\n                factor = coefficient * NodeMatrix[n + NODE_MASS] *\n                  NodeMatrix[rn + NODE_MASS] / distance;\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n              else if (distance < 0) {\n                factor = -coefficient * NodeMatrix[n + NODE_MASS] *\n                  NodeMatrix[rn + NODE_MASS] / Math.sqrt(distance);\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n            }\n            else {\n\n              //-- Linear Repulsion\n              if (distance > 0) {\n                factor = coefficient * NodeMatrix[n + NODE_MASS] *\n                  NodeMatrix[rn + NODE_MASS] / distance;\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n            }\n\n          }\n\n          // When this is done, we iterate. We have to look at the next sibling.\n          r = RegionMatrix[r + REGION_NEXT_SIBLING];\n\n          if (r < 0)\n            break; // No next sibling: we have finished the tree\n\n          continue;\n        }\n      }\n    }\n  }\n  else {\n    coefficient = options.scalingRatio;\n\n    // Square iteration\n    for (n1 = 0; n1 < order; n1 += PPN) {\n      for (n2 = 0; n2 < n1; n2 += PPN) {\n\n        // Common to both methods\n        xDist = NodeMatrix[n1 + NODE_X] - NodeMatrix[n2 + NODE_X];\n        yDist = NodeMatrix[n1 + NODE_Y] - NodeMatrix[n2 + NODE_Y];\n\n        if (adjustSizes === true) {\n\n          //-- Anticollision Linear Repulsion\n          distance = Math.sqrt(xDist * xDist + yDist * yDist) -\n            NodeMatrix[n1 + NODE_SIZE] -\n            NodeMatrix[n2 + NODE_SIZE];\n\n          if (distance > 0) {\n            factor = coefficient *\n              NodeMatrix[n1 + NODE_MASS] *\n              NodeMatrix[n2 + NODE_MASS] /\n              distance / distance;\n\n            // Updating nodes' dx and dy\n            NodeMatrix[n1 + NODE_DX] += xDist * factor;\n            NodeMatrix[n1 + NODE_DY] += yDist * factor;\n\n            NodeMatrix[n2 + NODE_DX] += xDist * factor;\n            NodeMatrix[n2 + NODE_DY] += yDist * factor;\n          }\n          else if (distance < 0) {\n            factor = 100 * coefficient *\n              NodeMatrix[n1 + NODE_MASS] *\n              NodeMatrix[n2 + NODE_MASS];\n\n            // Updating nodes' dx and dy\n            NodeMatrix[n1 + NODE_DX] += xDist * factor;\n            NodeMatrix[n1 + NODE_DY] += yDist * factor;\n\n            NodeMatrix[n2 + NODE_DX] -= xDist * factor;\n            NodeMatrix[n2 + NODE_DY] -= yDist * factor;\n          }\n        }\n        else {\n\n          //-- Linear Repulsion\n          distance = Math.sqrt(xDist * xDist + yDist * yDist);\n\n          if (distance > 0) {\n            factor = coefficient *\n              NodeMatrix[n1 + NODE_MASS] *\n              NodeMatrix[n2 + NODE_MASS] /\n              distance / distance;\n\n            // Updating nodes' dx and dy\n            NodeMatrix[n1 + NODE_DX] += xDist * factor;\n            NodeMatrix[n1 + NODE_DY] += yDist * factor;\n\n            NodeMatrix[n2 + NODE_DX] -= xDist * factor;\n            NodeMatrix[n2 + NODE_DY] -= yDist * factor;\n          }\n        }\n      }\n    }\n  }\n\n\n  // 3) Gravity\n  //------------\n  g = options.gravity / options.scalingRatio;\n  coefficient = options.scalingRatio;\n  for (n = 0; n < order; n += PPN) {\n    factor = 0;\n\n    // Common to both methods\n    xDist = NodeMatrix[n + NODE_X];\n    yDist = NodeMatrix[n + NODE_Y];\n    distance = Math.sqrt(\n      Math.pow(xDist, 2) + Math.pow(yDist, 2)\n    );\n\n    if (options.strongGravityMode) {\n\n      //-- Strong gravity\n      if (distance > 0)\n        factor = coefficient * NodeMatrix[n + NODE_MASS] * g;\n    }\n    else {\n\n      //-- Linear Anti-collision Repulsion n\n      if (distance > 0)\n        factor = coefficient * NodeMatrix[n + NODE_MASS] * g / distance;\n    }\n\n    // Updating node's dx and dy\n    NodeMatrix[n + NODE_DX] -= xDist * factor;\n    NodeMatrix[n + NODE_DY] -= yDist * factor;\n  }\n\n  // 4) Attraction\n  //---------------\n  coefficient = 1 *\n    (options.outboundAttractionDistribution ?\n      outboundAttCompensation :\n      1);\n\n  // TODO: simplify distance\n  // TODO: coefficient is always used as -c --> optimize?\n  for (e = 0; e < size; e += PPE) {\n    n1 = EdgeMatrix[e + EDGE_SOURCE];\n    n2 = EdgeMatrix[e + EDGE_TARGET];\n    w = EdgeMatrix[e + EDGE_WEIGHT];\n\n    // Edge weight influence\n    ewc = Math.pow(w, options.edgeWeightInfluence);\n\n    // Common measures\n    xDist = NodeMatrix[n1 + NODE_X] - NodeMatrix[n2 + NODE_X];\n    yDist = NodeMatrix[n1 + NODE_Y] - NodeMatrix[n2 + NODE_Y];\n\n    // Applying attraction to nodes\n    if (adjustSizes === true) {\n\n      distance = Math.sqrt(\n        (Math.pow(xDist, 2) + Math.pow(yDist, 2)) -\n        NodeMatrix[n1 + NODE_SIZE] -\n        NodeMatrix[n2 + NODE_SIZE]\n      );\n\n      if (options.linLogMode) {\n        if (options.outboundAttractionDistribution) {\n\n          //-- LinLog Degree Distributed Anti-collision Attraction\n          if (distance > 0) {\n            factor = -coefficient * ewc * Math.log(1 + distance) /\n            distance /\n            NodeMatrix[n1 + NODE_MASS];\n          }\n        }\n        else {\n\n          //-- LinLog Anti-collision Attraction\n          if (distance > 0) {\n            factor = -coefficient * ewc * Math.log(1 + distance) / distance;\n          }\n        }\n      }\n      else {\n        if (options.outboundAttractionDistribution) {\n\n          //-- Linear Degree Distributed Anti-collision Attraction\n          if (distance > 0) {\n            factor = -coefficient * ewc / NodeMatrix[n1 + NODE_MASS];\n          }\n        }\n        else {\n\n          //-- Linear Anti-collision Attraction\n          if (distance > 0) {\n            factor = -coefficient * ewc;\n          }\n        }\n      }\n    }\n    else {\n\n      distance = Math.sqrt(\n        Math.pow(xDist, 2) + Math.pow(yDist, 2)\n      );\n\n      if (options.linLogMode) {\n        if (options.outboundAttractionDistribution) {\n\n          //-- LinLog Degree Distributed Attraction\n          if (distance > 0) {\n            factor = -coefficient * ewc * Math.log(1 + distance) /\n              distance /\n              NodeMatrix[n1 + NODE_MASS];\n          }\n        }\n        else {\n\n          //-- LinLog Attraction\n          if (distance > 0)\n            factor = -coefficient * ewc * Math.log(1 + distance) / distance;\n        }\n      }\n      else {\n        if (options.outboundAttractionDistribution) {\n\n          //-- Linear Attraction Mass Distributed\n          // NOTE: Distance is set to 1 to override next condition\n          distance = 1;\n          factor = -coefficient * ewc / NodeMatrix[n1 + NODE_MASS];\n        }\n        else {\n\n          //-- Linear Attraction\n          // NOTE: Distance is set to 1 to override next condition\n          distance = 1;\n          factor = -coefficient * ewc;\n        }\n      }\n    }\n\n    // Updating nodes' dx and dy\n    // TODO: if condition or factor = 1?\n    if (distance > 0) {\n\n      // Updating nodes' dx and dy\n      NodeMatrix[n1 + NODE_DX] += xDist * factor;\n      NodeMatrix[n1 + NODE_DY] += yDist * factor;\n\n      NodeMatrix[n2 + NODE_DX] -= xDist * factor;\n      NodeMatrix[n2 + NODE_DY] -= yDist * factor;\n    }\n  }\n\n\n  // 5) Apply Forces\n  //-----------------\n  var force,\n      swinging,\n      traction,\n      nodespeed,\n      newX,\n      newY;\n\n  // MATH: sqrt and square distances\n  if (adjustSizes === true) {\n\n    for (n = 0; n < order; n += PPN) {\n      if (NodeMatrix[n + NODE_FIXED] !== 1) {\n        force = Math.sqrt(\n          Math.pow(NodeMatrix[n + NODE_DX], 2) +\n          Math.pow(NodeMatrix[n + NODE_DY], 2)\n        );\n\n        if (force > MAX_FORCE) {\n          NodeMatrix[n + NODE_DX] =\n            NodeMatrix[n + NODE_DX] * MAX_FORCE / force;\n          NodeMatrix[n + NODE_DY] =\n            NodeMatrix[n + NODE_DY] * MAX_FORCE / force;\n        }\n\n        swinging = NodeMatrix[n + NODE_MASS] *\n          Math.sqrt(\n            (NodeMatrix[n + NODE_OLD_DX] - NodeMatrix[n + NODE_DX]) *\n            (NodeMatrix[n + NODE_OLD_DX] - NodeMatrix[n + NODE_DX]) +\n            (NodeMatrix[n + NODE_OLD_DY] - NodeMatrix[n + NODE_DY]) *\n            (NodeMatrix[n + NODE_OLD_DY] - NodeMatrix[n + NODE_DY])\n          );\n\n        traction = Math.sqrt(\n          (NodeMatrix[n + NODE_OLD_DX] + NodeMatrix[n + NODE_DX]) *\n          (NodeMatrix[n + NODE_OLD_DX] + NodeMatrix[n + NODE_DX]) +\n          (NodeMatrix[n + NODE_OLD_DY] + NodeMatrix[n + NODE_DY]) *\n          (NodeMatrix[n + NODE_OLD_DY] + NodeMatrix[n + NODE_DY])\n        ) / 2;\n\n        nodespeed =\n          0.1 * Math.log(1 + traction) / (1 + Math.sqrt(swinging));\n\n        // Updating node's positon\n        newX = NodeMatrix[n + NODE_X] + NodeMatrix[n + NODE_DX] *\n          (nodespeed / options.slowDown);\n        NodeMatrix[n + NODE_X] = newX;\n\n        newY = NodeMatrix[n + NODE_Y] + NodeMatrix[n + NODE_DY] *\n          (nodespeed / options.slowDown);\n        NodeMatrix[n + NODE_Y] = newY;\n      }\n    }\n  }\n  else {\n\n    for (n = 0; n < order; n += PPN) {\n      if (NodeMatrix[n + NODE_FIXED] !== 1) {\n\n        swinging = NodeMatrix[n + NODE_MASS] *\n          Math.sqrt(\n            (NodeMatrix[n + NODE_OLD_DX] - NodeMatrix[n + NODE_DX]) *\n            (NodeMatrix[n + NODE_OLD_DX] - NodeMatrix[n + NODE_DX]) +\n            (NodeMatrix[n + NODE_OLD_DY] - NodeMatrix[n + NODE_DY]) *\n            (NodeMatrix[n + NODE_OLD_DY] - NodeMatrix[n + NODE_DY])\n          );\n\n        traction = Math.sqrt(\n          (NodeMatrix[n + NODE_OLD_DX] + NodeMatrix[n + NODE_DX]) *\n          (NodeMatrix[n + NODE_OLD_DX] + NodeMatrix[n + NODE_DX]) +\n          (NodeMatrix[n + NODE_OLD_DY] + NodeMatrix[n + NODE_DY]) *\n          (NodeMatrix[n + NODE_OLD_DY] + NodeMatrix[n + NODE_DY])\n        ) / 2;\n\n        nodespeed = NodeMatrix[n + NODE_CONVERGENCE] *\n          Math.log(1 + traction) / (1 + Math.sqrt(swinging));\n\n        // Updating node convergence\n        NodeMatrix[n + NODE_CONVERGENCE] =\n          Math.min(1, Math.sqrt(\n            nodespeed *\n            (Math.pow(NodeMatrix[n + NODE_DX], 2) +\n             Math.pow(NodeMatrix[n + NODE_DY], 2)) /\n            (1 + Math.sqrt(swinging))\n          ));\n\n        // Updating node's positon\n        newX = NodeMatrix[n + NODE_X] + NodeMatrix[n + NODE_DX] *\n          (nodespeed / options.slowDown);\n        NodeMatrix[n + NODE_X] = newX;\n\n        newY = NodeMatrix[n + NODE_Y] + NodeMatrix[n + NODE_DY] *\n          (nodespeed / options.slowDown);\n        NodeMatrix[n + NODE_Y] = newY;\n      }\n    }\n  }\n\n  // We return the information about the layout (no need to return the matrices)\n  return {};\n};\n\n  })();\n\n  var iterate = moduleShim.exports;\n\n  self.addEventListener('message', function(event) {\n    var data = event.data;\n\n    NODES = new Float32Array(data.nodes);\n\n    if (data.edges)\n      EDGES = new Float32Array(data.edges);\n\n    // Running the iteration\n    iterate(\n      data.settings,\n      NODES,\n      EDGES\n    );\n\n    // Sending result to supervisor\n    self.postMessage({\n      nodes: NODES.buffer\n    }, [NODES.buffer]);\n  });\n};\n\n","/**\n * Graphology isGraph\n * ===================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology instance.\n */\n\n/**\n * Checking the value is a graphology instance.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraph(value) {\n  return (\n    value !== null &&\n    typeof value === 'object' &&\n    typeof value.addUndirectedEdgeWithKey === 'function' &&\n    typeof value.dropNode === 'function' &&\n    typeof value.multi === 'boolean'\n  );\n};\n","/**\n * Graphology ForceAtlas2 Helpers\n * ===============================\n *\n * Miscellaneous helper functions.\n */\n\n/**\n * Constants.\n */\nvar PPN = 10,\n    PPE = 3;\n\n/**\n * Very simple Object.assign-like function.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nexports.assign = function(target) {\n  target = target || {};\n\n  var objects = Array.prototype.slice.call(arguments).slice(1),\n      i,\n      k,\n      l;\n\n  for (i = 0, l = objects.length; i < l; i++) {\n    if (!objects[i])\n      continue;\n\n    for (k in objects[i])\n      target[k] = objects[i][k];\n  }\n\n  return target;\n};\n\n/**\n * Function used to validate the given settings.\n *\n * @param  {object}      settings - Settings to validate.\n * @return {object|null}\n */\nexports.validateSettings = function(settings) {\n\n  if ('linLogMode' in settings &&\n      typeof settings.linLogMode !== 'boolean')\n    return {message: 'the `linLogMode` setting should be a boolean.'};\n\n  if ('outboundAttractionDistribution' in settings &&\n      typeof settings.outboundAttractionDistribution !== 'boolean')\n    return {message: 'the `outboundAttractionDistribution` setting should be a boolean.'};\n\n  if ('adjustSizes' in settings &&\n      typeof settings.adjustSizes !== 'boolean')\n    return {message: 'the `adjustSizes` setting should be a boolean.'};\n\n  if ('edgeWeightInfluence' in settings &&\n      typeof settings.edgeWeightInfluence !== 'number' &&\n      settings.edgeWeightInfluence < 0)\n    return {message: 'the `edgeWeightInfluence` setting should be a number >= 0.'};\n\n  if ('scalingRatio' in settings &&\n      typeof settings.scalingRatio !== 'number' &&\n      settings.scalingRatio < 0)\n    return {message: 'the `scalingRatio` setting should be a number >= 0.'};\n\n  if ('strongGravityMode' in settings &&\n      typeof settings.strongGravityMode !== 'boolean')\n    return {message: 'the `strongGravityMode` setting should be a boolean.'};\n\n  if ('gravity' in settings &&\n      typeof settings.gravity !== 'number' &&\n      settings.gravity < 0)\n    return {message: 'the `gravity` setting should be a number >= 0.'};\n\n  if ('slowDown' in settings &&\n      typeof settings.slowDown !== 'number' &&\n      settings.slowDown < 0)\n    return {message: 'the `slowDown` setting should be a number >= 0.'};\n\n  if ('barnesHutOptimize' in settings &&\n      typeof settings.barnesHutOptimize !== 'boolean')\n    return {message: 'the `barnesHutOptimize` setting should be a boolean.'};\n\n  if ('barnesHutTheta' in settings &&\n      typeof settings.barnesHutTheta !== 'number' &&\n      settings.barnesHutTheta < 0)\n    return {message: 'the `barnesHutTheta` setting should be a number >= 0.'};\n\n  return null;\n};\n\n/**\n * Function generating a flat matrix for both nodes & edges of the given graph.\n *\n * @param  {Graph}  graph - Target graph.\n * @return {object}       - Both matrices.\n */\nexports.graphToByteArrays = function(graph) {\n  var order = graph.order,\n      size = graph.size,\n      index = {},\n      j;\n\n  var NodeMatrix = new Float32Array(order * PPN),\n      EdgeMatrix = new Float32Array(size * PPE);\n\n  // Iterate through nodes\n  j = 0;\n  graph.forEachNode(function(node, attr) {\n\n    // Node index\n    index[node] = j;\n\n    // Populating byte array\n    NodeMatrix[j] = attr.x;\n    NodeMatrix[j + 1] = attr.y;\n    NodeMatrix[j + 2] = 0;\n    NodeMatrix[j + 3] = 0;\n    NodeMatrix[j + 4] = 0;\n    NodeMatrix[j + 5] = 0;\n    NodeMatrix[j + 6] = 1 + graph.degree(node);\n    NodeMatrix[j + 7] = 1;\n    NodeMatrix[j + 8] = attr.size || 1;\n    NodeMatrix[j + 9] = attr.fixed ? 1 : 0;\n    j += PPN;\n  });\n\n  // Iterate through edges\n  j = 0;\n  graph.forEachEdge(function(edge, attr, source, target) {\n\n    // Populating byte array\n    EdgeMatrix[j] = index[source];\n    EdgeMatrix[j + 1] = index[target];\n    EdgeMatrix[j + 2] = attr.weight || 0;\n    j += PPE;\n  });\n\n  return {\n    nodes: NodeMatrix,\n    edges: EdgeMatrix\n  };\n};\n\n/**\n * Function applying the layout back to the graph.\n *\n * @param {Graph}        graph      - Target graph.\n * @param {Float32Array} NodeMatrix - Node matrix.\n */\nexports.assignLayoutChanges = function(graph, NodeMatrix) {\n  var nodes = graph.nodes();\n\n  for (var i = 0, j = 0, l = NodeMatrix.length; i < l; i += PPN) {\n    graph.setNodeAttribute(nodes[j], 'x', NodeMatrix[i]);\n    graph.setNodeAttribute(nodes[j], 'y', NodeMatrix[i + 1]);\n    j++;\n  }\n};\n\n/**\n * Function collecting the layout positions.\n *\n * @param  {Graph}        graph      - Target graph.\n * @param  {Float32Array} NodeMatrix - Node matrix.\n * @return {object}                  - Map to node positions.\n */\nexports.collectLayoutChanges = function(graph, NodeMatrix) {\n  var nodes = graph.nodes(),\n      positions = Object.create(null);\n\n  for (var i = 0, j = 0, l = NodeMatrix.length; i < l; i += PPN) {\n    positions[nodes[j]] = {\n      x: NodeMatrix[i],\n      y: NodeMatrix[i + 1]\n    };\n\n    j++;\n  }\n\n  return positions;\n};\n\n/**\n * Function returning a web worker from the given function.\n *\n * @param  {function}  fn - Function for the worker.\n * @return {DOMString}\n */\nexports.createWorker = function createWorker(fn) {\n  var xURL = window.URL || window.webkitURL;\n  var code = fn.toString();\n  var objectUrl = xURL.createObjectURL(new Blob(['(' + code + ').call(this);'], {type: 'text/javascript'}));\n  var worker = new Worker(objectUrl);\n  xURL.revokeObjectURL(objectUrl);\n\n  return worker;\n};\n","/**\n * Graphology ForceAtlas2 Layout Default Settings\n * ===============================================\n */\nmodule.exports = {\n  linLogMode: false,\n  outboundAttractionDistribution: false,\n  adjustSizes: false,\n  edgeWeightInfluence: 0,\n  scalingRatio: 1,\n  strongGravityMode: false,\n  gravity: 1,\n  slowDown: 1,\n  barnesHutOptimize: false,\n  barnesHutTheta: 0.5\n};\n","import React, { CSSProperties, ReactNode, useEffect, useMemo, useRef, useState } from \"react\";\nimport Sigma from \"sigma/sigma\";\nimport { Settings } from \"sigma/settings\";\nimport Graph from \"graphology\";\nimport { GraphOptions } from \"graphology-types\";\nimport { SigmaContext, SigmaProvider } from \"./context\";\n\ninterface SigmaContainerProps {\n  graphOptions?: GraphOptions;\n  initialSettings?: Settings;\n  id?: string;\n  className?: string;\n  style?: CSSProperties;\n  children?: ReactNode;\n}\n\nexport const SigmaContainer: React.FC<SigmaContainerProps> = ({\n  graphOptions,\n  id,\n  className,\n  style,\n  initialSettings,\n  children,\n}) => {\n  // HTML element for the sigma instance\n  const containerRef = useRef<HTMLDivElement>(null);\n  // Common html props for the container\n  const [props] = useState({ className: `react-sigma-v2 ${className ? className : \"\"}`, id, style });\n  // The sigma instance\n  const [sigma, setSigma] = useState<Sigma | null>(null);\n\n  // When graphOptions or settings changed\n  useEffect(() => {\n    if (containerRef.current !== null) {\n      if (sigma !== null) sigma.kill();\n      const instance = new Sigma(new Graph(graphOptions), containerRef.current, initialSettings);\n      setSigma(instance);\n    }\n  }, [graphOptions, initialSettings, containerRef]);\n\n  const context = useMemo(() => (sigma ? { sigma } : null), [sigma]);\n  const contents = context !== null ? <SigmaProvider value={context}>{children}</SigmaProvider> : null;\n\n  return (\n    <div {...props}>\n      <div className={\"sigma-container\"} ref={containerRef}></div>\n      {contents}\n    </div>\n  );\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js\n * ========\n * @module\n */\nvar events_1 = require(\"events\");\nvar extent_1 = __importDefault(require(\"graphology-metrics/extent\"));\nvar camera_1 = __importDefault(require(\"./core/camera\"));\nvar mouse_1 = __importDefault(require(\"./core/captors/mouse\"));\nvar quadtree_1 = __importDefault(require(\"./core/quadtree\"));\nvar utils_1 = require(\"./utils\");\nvar labels_1 = require(\"./core/labels\");\nvar settings_1 = require(\"./settings\");\nvar touch_1 = __importDefault(require(\"./core/captors/touch\"));\nvar nodeExtent = extent_1.default.nodeExtent, edgeExtent = extent_1.default.edgeExtent;\n/**\n * Constants.\n */\nvar PIXEL_RATIO = utils_1.getPixelRatio();\nvar WEBGL_OVERSAMPLING_RATIO = utils_1.getPixelRatio();\n/**\n * Important functions.\n */\nfunction applyNodeDefaults(settings, key, data) {\n    if (!data.hasOwnProperty(\"x\") || !data.hasOwnProperty(\"y\"))\n        throw new Error(\"Sigma: could not find a valid position (x, y) for node \\\"\" + key + \"\\\". All your nodes must have a number \\\"x\\\" and \\\"y\\\". Maybe your forgot to apply a layout or your \\\"nodeReducer\\\" is not returning the correct data?\");\n    if (!data.color)\n        data.color = settings.defaultNodeColor;\n    if (!data.label)\n        data.label = \"\";\n    if (!data.size)\n        data.size = 2;\n    if (!data.hasOwnProperty(\"hidden\"))\n        data.hidden = false;\n    if (!data.hasOwnProperty(\"highlighted\"))\n        data.highlighted = false;\n}\nfunction applyEdgeDefaults(settings, key, data) {\n    if (!data.color)\n        data.color = settings.defaultEdgeColor;\n    if (!data.label)\n        data.label = \"\";\n    if (!data.size)\n        data.size = 0.5;\n    if (!data.hasOwnProperty(\"hidden\"))\n        data.hidden = false;\n}\n/**\n * Main class.\n *\n * @constructor\n * @param {Graph}       graph     - Graph to render.\n * @param {HTMLElement} container - DOM container in which to render.\n * @param {object}      settings  - Optional settings.\n */\nvar Sigma = /** @class */ (function (_super) {\n    __extends(Sigma, _super);\n    function Sigma(graph, container, settings) {\n        if (settings === void 0) { settings = {}; }\n        var _this = _super.call(this) || this;\n        _this.elements = {};\n        _this.canvasContexts = {};\n        _this.webGLContexts = {};\n        _this.activeListeners = {};\n        _this.quadtree = new quadtree_1.default();\n        _this.nodeDataCache = {};\n        _this.edgeDataCache = {};\n        _this.nodeKeyToIndex = {};\n        _this.edgeKeyToIndex = {};\n        _this.nodeExtent = null;\n        _this.edgeExtent = null;\n        _this.normalizationFunction = utils_1.createNormalizationFunction({\n            x: [-Infinity, Infinity],\n            y: [-Infinity, Infinity],\n        });\n        // Starting dimensions\n        _this.width = 0;\n        _this.height = 0;\n        // State\n        _this.highlightedNodes = new Set();\n        _this.displayedLabels = new Set();\n        _this.hoveredNode = null;\n        _this.renderFrame = null;\n        _this.renderHighlightedNodesFrame = null;\n        _this.needToProcess = false;\n        _this.needToSoftProcess = false;\n        // programs\n        _this.nodePrograms = {};\n        _this.edgePrograms = {};\n        _this.settings = utils_1.assignDeep({}, settings_1.DEFAULT_SETTINGS, settings);\n        // Validating\n        settings_1.validateSettings(_this.settings);\n        utils_1.validateGraph(graph);\n        if (!(container instanceof HTMLElement))\n            throw new Error(\"Sigma: container should be an html element.\");\n        // Properties\n        _this.graph = graph;\n        _this.container = container;\n        _this.initializeCache();\n        // Initializing contexts\n        _this.createWebGLContext(\"edges\");\n        _this.createWebGLContext(\"nodes\");\n        _this.createCanvasContext(\"edgeLabels\");\n        _this.createCanvasContext(\"labels\");\n        _this.createCanvasContext(\"hovers\");\n        _this.createCanvasContext(\"mouse\");\n        // Blending\n        var gl = _this.webGLContexts.nodes;\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n        gl = _this.webGLContexts.edges;\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n        // Loading programs\n        for (var type in _this.settings.nodeProgramClasses) {\n            var NodeProgramClass = _this.settings.nodeProgramClasses[type];\n            _this.nodePrograms[type] = new NodeProgramClass(_this.webGLContexts.nodes);\n        }\n        for (var type in _this.settings.edgeProgramClasses) {\n            var EdgeProgramClass = _this.settings.edgeProgramClasses[type];\n            _this.edgePrograms[type] = new EdgeProgramClass(_this.webGLContexts.edges);\n        }\n        // Initial resize\n        _this.resize();\n        // Initializing the camera\n        _this.camera = new camera_1.default();\n        // Binding camera events\n        _this.bindCameraHandlers();\n        // Initializing captors\n        _this.mouseCaptor = new mouse_1.default(_this.elements.mouse, _this.camera);\n        _this.touchCaptor = new touch_1.default(_this.elements.mouse, _this.camera);\n        // Binding event handlers\n        _this.bindEventHandlers();\n        // Binding graph handlers\n        _this.bindGraphHandlers();\n        // Processing data for the first time & render\n        _this.process();\n        _this.render();\n        return _this;\n    }\n    /**---------------------------------------------------------------------------\n     * Internal methods.\n     **---------------------------------------------------------------------------\n     */\n    /**\n     * Internal function used to create a canvas element.\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createCanvas = function (id) {\n        var canvas = utils_1.createElement(\"canvas\", {\n            position: \"absolute\",\n        }, {\n            class: \"sigma-\" + id,\n        });\n        this.elements[id] = canvas;\n        this.container.appendChild(canvas);\n        return canvas;\n    };\n    /**\n     * Internal function used to create a canvas context and add the relevant\n     * DOM elements.\n     *\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createCanvasContext = function (id) {\n        var canvas = this.createCanvas(id);\n        var contextOptions = {\n            preserveDrawingBuffer: false,\n            antialias: false,\n        };\n        this.canvasContexts[id] = canvas.getContext(\"2d\", contextOptions);\n        return this;\n    };\n    /**\n     * Internal function used to create a canvas context and add the relevant\n     * DOM elements.\n     *\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createWebGLContext = function (id) {\n        var canvas = this.createCanvas(id);\n        var contextOptions = {\n            preserveDrawingBuffer: false,\n            antialias: false,\n        };\n        var context;\n        // First we try webgl2 for an easy performance boost\n        context = canvas.getContext(\"webgl2\", contextOptions);\n        // Else we fall back to webgl\n        if (!context)\n            context = canvas.getContext(\"webgl\", contextOptions);\n        // Edge, I am looking right at you...\n        if (!context)\n            context = canvas.getContext(\"experimental-webgl\", contextOptions);\n        this.webGLContexts[id] = context;\n        return this;\n    };\n    /**\n     * Method used to initialize display data cache.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.initializeCache = function () {\n        var _this = this;\n        var graph = this.graph;\n        // NOTE: the data caches are never reset to avoid paying a GC cost\n        // But this could prove to be a bad decision. In which case just \"reset\"\n        // them here.\n        var i = 0;\n        graph.forEachNode(function (key) {\n            _this.nodeKeyToIndex[key] = i++;\n            _this.nodeDataCache[key] = {};\n        });\n        i = 0;\n        graph.forEachEdge(function (key) {\n            _this.edgeKeyToIndex[key] = i++;\n            _this.edgeDataCache[key] = {};\n        });\n    };\n    /**\n     * Method binding camera handlers.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindCameraHandlers = function () {\n        var _this = this;\n        this.activeListeners.camera = function () {\n            _this.scheduleRefresh();\n        };\n        this.camera.on(\"updated\", this.activeListeners.camera);\n        return this;\n    };\n    /**\n     * Method binding event handlers.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindEventHandlers = function () {\n        var _this = this;\n        // Handling window resize\n        this.activeListeners.handleResize = function () {\n            _this.needToSoftProcess = true;\n            _this.scheduleRefresh();\n        };\n        window.addEventListener(\"resize\", this.activeListeners.handleResize);\n        // Function checking if the mouse is on the given node\n        var mouseIsOnNode = function (mouseX, mouseY, nodeX, nodeY, size) {\n            return (mouseX > nodeX - size &&\n                mouseX < nodeX + size &&\n                mouseY > nodeY - size &&\n                mouseY < nodeY + size &&\n                Math.sqrt(Math.pow(mouseX - nodeX, 2) + Math.pow(mouseY - nodeY, 2)) < size);\n        };\n        // Function returning the nodes in the mouse's quad\n        var getQuadNodes = function (mouseX, mouseY) {\n            var mouseGraphPosition = _this.camera.viewportToFramedGraph({ width: _this.width, height: _this.height }, { x: mouseX, y: mouseY });\n            // TODO: minus 1? lol\n            return _this.quadtree.point(mouseGraphPosition.x, 1 - mouseGraphPosition.y);\n        };\n        // Handling mouse move\n        this.activeListeners.handleMove = function (e) {\n            // NOTE: for the canvas renderer, testing the pixel's alpha should\n            // give some boost but this slows things down for WebGL empirically.\n            // TODO: this should be a method from the camera (or can be passed to graph to display somehow)\n            var sizeRatio = Math.pow(_this.camera.getState().ratio, 0.5);\n            var quadNodes = getQuadNodes(e.x, e.y);\n            var dimensions = { width: _this.width, height: _this.height };\n            // We will hover the node whose center is closest to mouse\n            var minDistance = Infinity, nodeToHover = null;\n            for (var i = 0, l = quadNodes.length; i < l; i++) {\n                var node = quadNodes[i];\n                var data = _this.nodeDataCache[node];\n                var pos = _this.camera.framedGraphToViewport(dimensions, data);\n                var size = data.size / sizeRatio;\n                if (mouseIsOnNode(e.x, e.y, pos.x, pos.y, size)) {\n                    var distance = Math.sqrt(Math.pow(e.x - pos.x, 2) + Math.pow(e.y - pos.y, 2));\n                    // TODO: sort by min size also for cases where center is the same\n                    if (distance < minDistance) {\n                        minDistance = distance;\n                        nodeToHover = node;\n                    }\n                }\n            }\n            if (nodeToHover && _this.hoveredNode !== nodeToHover) {\n                // Handling passing from one node to the other directly\n                if (_this.hoveredNode)\n                    _this.emit(\"leaveNode\", { node: _this.hoveredNode });\n                _this.hoveredNode = nodeToHover;\n                _this.emit(\"enterNode\", { node: nodeToHover });\n                _this.scheduleHighlightedNodesRender();\n                return;\n            }\n            // Checking if the hovered node is still hovered\n            if (_this.hoveredNode) {\n                var data = _this.nodeDataCache[_this.hoveredNode];\n                var pos = _this.camera.framedGraphToViewport(dimensions, data);\n                var size = data.size / sizeRatio;\n                if (!mouseIsOnNode(e.x, e.y, pos.x, pos.y, size)) {\n                    var node = _this.hoveredNode;\n                    _this.hoveredNode = null;\n                    _this.emit(\"leaveNode\", { node: node });\n                    return _this.scheduleHighlightedNodesRender();\n                }\n            }\n        };\n        // Handling click\n        var createClickListener = function (eventType) {\n            return function (e) {\n                var sizeRatio = Math.pow(_this.camera.getState().ratio, 0.5);\n                var quadNodes = getQuadNodes(e.x, e.y);\n                var dimensions = { width: _this.width, height: _this.height };\n                for (var i = 0, l = quadNodes.length; i < l; i++) {\n                    var node = quadNodes[i];\n                    var data = _this.nodeDataCache[node];\n                    var pos = _this.camera.framedGraphToViewport(dimensions, data);\n                    var size = data.size / sizeRatio;\n                    if (mouseIsOnNode(e.x, e.y, pos.x, pos.y, size))\n                        return _this.emit(eventType + \"Node\", { node: node, captor: e, event: e });\n                }\n                return _this.emit(eventType + \"Stage\", { event: e });\n            };\n        };\n        this.activeListeners.handleClick = createClickListener(\"click\");\n        this.activeListeners.handleRightClick = createClickListener(\"rightClick\");\n        this.activeListeners.handleDown = createClickListener(\"down\");\n        this.mouseCaptor.on(\"mousemove\", this.activeListeners.handleMove);\n        this.mouseCaptor.on(\"click\", this.activeListeners.handleClick);\n        this.mouseCaptor.on(\"rightClick\", this.activeListeners.handleRightClick);\n        this.mouseCaptor.on(\"mousedown\", this.activeListeners.handleDown);\n        // TODO\n        // Deal with Touch captor events\n        return this;\n    };\n    /**\n     * Method binding graph handlers\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindGraphHandlers = function () {\n        var _this = this;\n        var graph = this.graph;\n        this.activeListeners.graphUpdate = function () {\n            _this.needToProcess = true;\n            _this.scheduleRefresh();\n        };\n        this.activeListeners.softGraphUpdate = function () {\n            _this.needToSoftProcess = true;\n            _this.scheduleRefresh();\n        };\n        this.activeListeners.addNodeGraphUpdate = function (e) {\n            // Adding entry to cache\n            _this.nodeKeyToIndex[e.key] = graph.order - 1;\n            _this.nodeDataCache[e.key] = {};\n            _this.activeListeners.graphUpdate();\n        };\n        this.activeListeners.addEdgeGraphUpdate = function (e) {\n            // Adding entry to cache\n            _this.nodeKeyToIndex[e.key] = graph.order - 1;\n            _this.edgeDataCache[e.key] = {};\n            _this.activeListeners.graphUpdate();\n        };\n        // TODO: clean cache on drop!\n        // TODO: bind this on composed state events\n        // TODO: it could be possible to update only specific node etc. by holding\n        // a fixed-size pool of updated items\n        graph.on(\"nodeAdded\", this.activeListeners.addNodeGraphUpdate);\n        graph.on(\"nodeDropped\", this.activeListeners.graphUpdate);\n        graph.on(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.on(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.on(\"edgeAdded\", this.activeListeners.addEdgeGraphUpdate);\n        graph.on(\"edgeDropped\", this.activeListeners.graphUpdate);\n        graph.on(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.on(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.on(\"edgesCleared\", this.activeListeners.graphUpdate);\n        graph.on(\"cleared\", this.activeListeners.graphUpdate);\n        return this;\n    };\n    /**\n     * Method used to process the whole graph's data.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.process = function (keepArrays) {\n        if (keepArrays === void 0) { keepArrays = false; }\n        var graph = this.graph, settings = this.settings;\n        // Clearing the quad\n        this.quadtree.clear();\n        // Clear the highlightedNodes\n        this.highlightedNodes = new Set();\n        // Computing extents\n        var nodeExtentProperties = [\"x\", \"y\", \"z\"];\n        if (this.settings.zIndex) {\n            nodeExtentProperties.push(\"z\");\n            this.edgeExtent = edgeExtent(graph, [\"z\"]);\n        }\n        this.nodeExtent = nodeExtent(graph, nodeExtentProperties);\n        // Rescaling function\n        this.normalizationFunction = utils_1.createNormalizationFunction(this.nodeExtent);\n        var nodeProgram = this.nodePrograms[this.settings.defaultNodeType];\n        if (!keepArrays)\n            nodeProgram.allocate(graph.order);\n        var nodes = graph.nodes();\n        // Handling node z-index\n        // TODO: z-index needs us to compute display data before hand\n        if (this.settings.zIndex)\n            nodes = utils_1.zIndexOrdering(this.nodeExtent.z, function (node) { return graph.getNodeAttribute(node, \"z\"); }, nodes);\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            var node = nodes[i];\n            // Node display data resolution:\n            //   1. First we get the node's attributes\n            //   2. We optionally reduce them using the function provided by the user\n            //      Note that this function must return a total object and won't be merged\n            //   3. We apply our defaults, while running some vital checks\n            //   4. We apply the normalization function\n            var data = graph.getNodeAttributes(node);\n            if (settings.nodeReducer)\n                data = settings.nodeReducer(node, data);\n            // We shallow copy the data to avoid mutating both the graph and the reducer's result\n            data = Object.assign(this.nodeDataCache[node], data);\n            applyNodeDefaults(this.settings, node, data);\n            this.normalizationFunction.applyTo(data);\n            this.quadtree.add(node, data.x, 1 - data.y, data.size / this.width);\n            nodeProgram.process(data, data.hidden, i);\n            // Save the node in the highlighted set if needed\n            if (data.highlighted && !data.hidden)\n                this.highlightedNodes.add(node);\n            this.nodeKeyToIndex[node] = i;\n        }\n        // TODO: maybe we should bind and buffer as part of rendering?\n        // We also need to find when it is useful and when it's really not\n        nodeProgram.bind();\n        nodeProgram.bufferData();\n        var edgeProgram = this.edgePrograms[this.settings.defaultEdgeType];\n        if (!keepArrays)\n            edgeProgram.allocate(graph.size);\n        var edges = graph.edges();\n        // Handling edge z-index\n        if (this.settings.zIndex && this.edgeExtent)\n            edges = utils_1.zIndexOrdering(this.edgeExtent.z, function (edge) { return graph.getEdgeAttribute(edge, \"z\"); }, edges);\n        for (var i = 0, l = edges.length; i < l; i++) {\n            var edge = edges[i];\n            // Edge display data resolution:\n            //   1. First we get the edge's attributes\n            //   2. We optionally reduce them using the function provided by the user\n            //      Note that this function must return a total object and won't be merged\n            //   3. We apply our defaults, while running some vital checks\n            var data = graph.getEdgeAttributes(edge);\n            if (settings.edgeReducer)\n                data = settings.edgeReducer(edge, data);\n            // We shallow copy the data to avoid mutating both the graph and the reducer's result\n            data = Object.assign(this.edgeDataCache[edge], data);\n            applyEdgeDefaults(this.settings, edge, data);\n            var extremities = graph.extremities(edge), sourceData = this.nodeDataCache[extremities[0]], targetData = this.nodeDataCache[extremities[1]];\n            var hidden = data.hidden || sourceData.hidden || targetData.hidden;\n            edgeProgram.process(sourceData, targetData, data, hidden, i);\n            this.nodeKeyToIndex[edge] = i;\n        }\n        // Computing edge indices if necessary\n        if (!keepArrays && typeof edgeProgram.computeIndices === \"function\")\n            edgeProgram.computeIndices();\n        // TODO: maybe we should bind and buffer as part of rendering?\n        // We also need to find when it is useful and when it's really not\n        edgeProgram.bind();\n        edgeProgram.bufferData();\n        return this;\n    };\n    /**\n     * Method used to render labels.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderLabels = function () {\n        if (!this.settings.renderLabels)\n            return this;\n        var cameraState = this.camera.getState();\n        var dimensions = { width: this.width, height: this.height };\n        // Finding visible nodes to display their labels\n        var visibleNodes;\n        if (cameraState.ratio >= 1) {\n            // Camera is unzoomed so no need to ask the quadtree for visible nodes\n            visibleNodes = this.graph.nodes();\n        }\n        else {\n            // Let's ask the quadtree\n            var viewRectangle = this.camera.viewRectangle(dimensions);\n            visibleNodes = this.quadtree.rectangle(viewRectangle.x1, 1 - viewRectangle.y1, viewRectangle.x2, 1 - viewRectangle.y2, viewRectangle.height);\n        }\n        // Selecting labels to draw\n        var gridSettings = this.settings.labelGrid;\n        var labelsToDisplay = labels_1.labelsToDisplayFromGrid({\n            cache: this.nodeDataCache,\n            camera: this.camera,\n            cell: gridSettings.cell,\n            dimensions: dimensions,\n            displayedLabels: this.displayedLabels,\n            fontSize: this.settings.labelSize,\n            graph: this.graph,\n            renderedSizeThreshold: gridSettings.renderedSizeThreshold,\n            visibleNodes: visibleNodes,\n        });\n        // Drawing labels\n        var context = this.canvasContexts.labels;\n        var sizeRatio = Math.pow(cameraState.ratio, 0.5);\n        for (var i = 0, l = labelsToDisplay.length; i < l; i++) {\n            var data = this.nodeDataCache[labelsToDisplay[i]];\n            var _a = this.camera.framedGraphToViewport(dimensions, data), x = _a.x, y = _a.y;\n            // TODO: we can cache the labels we need to render until the camera's ratio changes\n            // TODO: this should be computed in the canvas components?\n            var size = data.size / sizeRatio;\n            this.settings.labelRenderer(context, {\n                key: labelsToDisplay[i],\n                label: data.label,\n                color: \"#000\",\n                size: size,\n                x: x,\n                y: y,\n            }, this.settings);\n        }\n        // Caching visible nodes and displayed labels\n        this.displayedLabels = new Set(labelsToDisplay);\n        return this;\n    };\n    /**\n     * Method used to render edge labels, based on which node labels were\n     * rendered.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderEdgeLabels = function () {\n        if (!this.settings.renderEdgeLabels)\n            return this;\n        var cameraState = this.camera.getState();\n        var sizeRatio = Math.pow(cameraState.ratio, 0.5);\n        var context = this.canvasContexts.edgeLabels;\n        var dimensions = { width: this.width, height: this.height };\n        // Clearing\n        context.clearRect(0, 0, this.width, this.height);\n        var edgeLabelsToDisplay = labels_1.edgeLabelsToDisplayFromNodes({\n            nodeDataCache: this.nodeDataCache,\n            edgeDataCache: this.edgeDataCache,\n            graph: this.graph,\n            hoveredNode: this.hoveredNode,\n            displayedNodeLabels: this.displayedLabels,\n            highlightedNodes: this.highlightedNodes,\n        });\n        for (var i = 0, l = edgeLabelsToDisplay.length; i < l; i++) {\n            var edge = edgeLabelsToDisplay[i], extremities = this.graph.extremities(edge), sourceData = this.nodeDataCache[extremities[0]], targetData = this.nodeDataCache[extremities[1]], edgeData = this.edgeDataCache[edgeLabelsToDisplay[i]];\n            var _a = this.camera.framedGraphToViewport(dimensions, sourceData), sourceX = _a.x, sourceY = _a.y;\n            var _b = this.camera.framedGraphToViewport(dimensions, targetData), targetX = _b.x, targetY = _b.y;\n            // TODO: we can cache the labels we need to render until the camera's ratio changes\n            // TODO: this should be computed in the canvas components?\n            var size = edgeData.size / sizeRatio;\n            this.settings.edgeLabelRenderer(context, {\n                key: edge,\n                label: edgeData.label,\n                color: edgeData.color,\n                size: size,\n            }, {\n                key: extremities[0],\n                x: sourceX,\n                y: sourceY,\n            }, {\n                key: extremities[1],\n                x: targetX,\n                y: targetY,\n            }, this.settings);\n        }\n        return this;\n    };\n    /**\n     * Method used to render the highlighted nodes.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderHighlightedNodes = function () {\n        var _this = this;\n        var camera = this.camera;\n        var sizeRatio = Math.pow(camera.getState().ratio, 0.5);\n        var context = this.canvasContexts.hovers;\n        // Clearing\n        context.clearRect(0, 0, this.width, this.height);\n        // Rendering\n        var render = function (node) {\n            var data = _this.nodeDataCache[node];\n            var _a = camera.framedGraphToViewport({ width: _this.width, height: _this.height }, data), x = _a.x, y = _a.y;\n            var size = data.size / sizeRatio;\n            _this.settings.hoverRenderer(context, {\n                key: node,\n                label: data.label,\n                color: data.color,\n                size: size,\n                x: x,\n                y: y,\n            }, _this.settings);\n        };\n        if (this.hoveredNode) {\n            render(this.hoveredNode);\n        }\n        this.highlightedNodes.forEach(render);\n    };\n    /**\n     * Method used to schedule a hover render.\n     *\n     */\n    Sigma.prototype.scheduleHighlightedNodesRender = function () {\n        var _this = this;\n        if (this.renderHighlightedNodesFrame || this.renderFrame)\n            return;\n        this.renderHighlightedNodesFrame = utils_1.requestFrame(function () {\n            // Resetting state\n            _this.renderHighlightedNodesFrame = null;\n            // Rendering\n            _this.renderHighlightedNodes();\n            _this.renderEdgeLabels();\n        });\n    };\n    /**\n     * Method used to render.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.render = function () {\n        // If a render was scheduled, we cancel it\n        if (this.renderFrame) {\n            utils_1.cancelFrame(this.renderFrame);\n            this.renderFrame = null;\n            this.needToProcess = false;\n            this.needToSoftProcess = false;\n        }\n        // First we need to resize\n        this.resize();\n        // Clearing the canvases\n        this.clear();\n        // If we have no nodes we can stop right there\n        if (!this.graph.order)\n            return this;\n        // TODO: improve this heuristic or move to the captor itself?\n        // TODO: deal with the touch captor here as well\n        var mouseCaptor = this.mouseCaptor;\n        var moving = this.camera.isAnimated() ||\n            mouseCaptor.isMoving ||\n            mouseCaptor.draggedEvents ||\n            mouseCaptor.currentWheelDirection;\n        // Then we need to extract a matrix from the camera\n        var cameraState = this.camera.getState(), cameraMatrix = utils_1.matrixFromCamera(cameraState, {\n            width: this.width,\n            height: this.height,\n        });\n        var program;\n        // Drawing nodes\n        program = this.nodePrograms[this.settings.defaultNodeType];\n        program.render({\n            matrix: cameraMatrix,\n            width: this.width,\n            height: this.height,\n            ratio: cameraState.ratio,\n            nodesPowRatio: 0.5,\n            scalingRatio: WEBGL_OVERSAMPLING_RATIO,\n        });\n        // Drawing edges\n        if (!this.settings.hideEdgesOnMove || !moving) {\n            program = this.edgePrograms[this.settings.defaultEdgeType];\n            program.render({\n                matrix: cameraMatrix,\n                width: this.width,\n                height: this.height,\n                ratio: cameraState.ratio,\n                edgesPowRatio: 0.5,\n                scalingRatio: WEBGL_OVERSAMPLING_RATIO,\n            });\n        }\n        // Do not display labels on move per setting\n        if (this.settings.hideLabelsOnMove && moving)\n            return this;\n        this.renderLabels();\n        this.renderEdgeLabels();\n        this.renderHighlightedNodes();\n        return this;\n    };\n    /**---------------------------------------------------------------------------\n     * Public API.\n     **---------------------------------------------------------------------------\n     */\n    /**\n     * Method returning the renderer's camera.\n     *\n     * @return {Camera}\n     */\n    Sigma.prototype.getCamera = function () {\n        return this.camera;\n    };\n    /**\n     * Method returning the renderer's graph.\n     *\n     * @return {Graph}\n     */\n    Sigma.prototype.getGraph = function () {\n        return this.graph;\n    };\n    /**\n     * Method returning the mouse captor.\n     *\n     * @return {MouseCaptor}\n     */\n    Sigma.prototype.getMouseCaptor = function () {\n        return this.mouseCaptor;\n    };\n    /**\n     * Method returning the touch captor.\n     *\n     * @return {TouchCaptor}\n     */\n    Sigma.prototype.getTouchCaptor = function () {\n        return this.touchCaptor;\n    };\n    /**\n     * Method returning the current renderer's dimensions.\n     *\n     * @return {Dimensions}\n     */\n    Sigma.prototype.getDimensions = function () {\n        return { width: this.width, height: this.height };\n    };\n    /**\n     * Method used to get all the sigma node attributes.\n     * It's usefull for example to get the position of a node\n     * and to get values that are set by the nodeReducer\n     *\n     * @param  {string} key - The node's key.\n     * @return {Partial<NodeAttributes>} A copy of the desired node's attribute or undefined if not found\n     */\n    Sigma.prototype.getNodeAttributes = function (key) {\n        var node = this.nodeDataCache[key];\n        return node ? Object.assign({}, node) : undefined;\n    };\n    /**\n     * Method used to get all the sigma edge attributes.\n     * It's usefull for example to get values that are set by the edgeReducer.\n     *\n     * @param  {string} key - The edge's key.\n     * @return {Partial<EdgeAttributes> | undefined} A copy of the desired edge's attribute or undefined if not found\n     */\n    Sigma.prototype.getEdgeAttributes = function (key) {\n        var edge = this.edgeDataCache[key];\n        return edge ? Object.assign({}, edge) : undefined;\n    };\n    /**\n     * Method returning the current value for a given setting key.\n     *\n     * @param  {string} key - The setting key to get.\n     * @return {any} The value attached to this setting key or undefined if not found\n     */\n    Sigma.prototype.getSetting = function (key) {\n        return this.settings[key];\n    };\n    /**\n     * Method setting the value of a given setting key. Note that this will schedule\n     * a new render next frame.\n     *\n     * @param  {string} key - The setting key to set.\n     * @param  {any}    value - The value to set.\n     * @return {Sigma}\n     */\n    Sigma.prototype.setSetting = function (key, value) {\n        this.settings[key] = value;\n        settings_1.validateSettings(this.settings);\n        this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n        this.scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method updating the value of a given setting key using the provided function.\n     * Note that this will schedule a new render next frame.\n     *\n     * @param  {string} key - The setting key to set.\n     * @param  {any}    value - The value to set.\n     * @return {Sigma}\n     */\n    Sigma.prototype.updateSetting = function (key, updater) {\n        this.settings[key] = updater(this.settings[key]);\n        settings_1.validateSettings(this.settings);\n        this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n        this.scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method used to resize the renderer.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.resize = function () {\n        var previousWidth = this.width, previousHeight = this.height;\n        this.width = this.container.offsetWidth;\n        this.height = this.container.offsetHeight;\n        if (this.width === 0)\n            throw new Error(\"Sigma: container has no width.\");\n        if (this.height === 0)\n            throw new Error(\"Sigma: container has no height.\");\n        // If nothing has changed, we can stop right here\n        if (previousWidth === this.width && previousHeight === this.height)\n            return this;\n        // Sizing dom elements\n        for (var id in this.elements) {\n            var element = this.elements[id];\n            element.style.width = this.width + \"px\";\n            element.style.height = this.height + \"px\";\n        }\n        // Sizing canvas contexts\n        for (var id in this.canvasContexts) {\n            this.elements[id].setAttribute(\"width\", this.width * PIXEL_RATIO + \"px\");\n            this.elements[id].setAttribute(\"height\", this.height * PIXEL_RATIO + \"px\");\n            if (PIXEL_RATIO !== 1)\n                this.canvasContexts[id].scale(PIXEL_RATIO, PIXEL_RATIO);\n        }\n        // Sizing WebGL contexts\n        for (var id in this.webGLContexts) {\n            this.elements[id].setAttribute(\"width\", this.width * WEBGL_OVERSAMPLING_RATIO + \"px\");\n            this.elements[id].setAttribute(\"height\", this.height * WEBGL_OVERSAMPLING_RATIO + \"px\");\n            this.webGLContexts[id].viewport(0, 0, this.width * WEBGL_OVERSAMPLING_RATIO, this.height * WEBGL_OVERSAMPLING_RATIO);\n        }\n        return this;\n    };\n    /**\n     * Method used to clear all the canvases.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.clear = function () {\n        this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT);\n        this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT);\n        this.canvasContexts.labels.clearRect(0, 0, this.width, this.height);\n        this.canvasContexts.hovers.clearRect(0, 0, this.width, this.height);\n        this.canvasContexts.edgeLabels.clearRect(0, 0, this.width, this.height);\n        return this;\n    };\n    /**\n     * Method used to refresh all computed data.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.refresh = function () {\n        // Do we need to process data?\n        if (this.needToProcess) {\n            this.process();\n        }\n        else if (this.needToSoftProcess) {\n            this.process(true);\n        }\n        // Resetting state\n        this.needToProcess = false;\n        this.needToSoftProcess = false;\n        // Rendering\n        this.render();\n        return this;\n    };\n    /**\n     * Method used to refresh all computed data, at the next available frame.\n     * If this method has already been called this frame, then it will only render once at the next available frame.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.scheduleRefresh = function () {\n        var _this = this;\n        if (!this.renderFrame) {\n            this.renderFrame = utils_1.requestFrame(function () {\n                _this.refresh();\n                _this.renderFrame = null;\n            });\n        }\n        return this;\n    };\n    /**\n     * Method used to translate a point's coordinates from the viewport system (pixel distance from the top-left of the\n     * stage) to the graph system (the reference system of data as they are in the given graph instance).\n     *\n     * @param {Coordinates} viewportPoint\n     */\n    Sigma.prototype.viewportToGraph = function (viewportPoint) {\n        return this.normalizationFunction.inverse(this.camera.viewportToFramedGraph(this.getDimensions(), viewportPoint));\n    };\n    /**\n     * Method used to translate a point's coordinates from the graph system (the reference system of data as they are in\n     * the given graph instance) to the viewport system (pixel distance from the top-left of the stage).\n     *\n     * @param {Coordinates} graphPoint\n     */\n    Sigma.prototype.graphToViewport = function (graphPoint) {\n        return this.camera.framedGraphToViewport(this.getDimensions(), this.normalizationFunction(graphPoint));\n    };\n    /**\n     * Method used to shut the container & release event listeners.\n     *\n     * @return {undefined}\n     */\n    Sigma.prototype.kill = function () {\n        var graph = this.graph;\n        // Emitting \"kill\" events so that plugins and such can cleanup\n        this.emit(\"kill\");\n        // Releasing events\n        this.removeAllListeners();\n        // Releasing camera handlers\n        this.camera.removeListener(\"updated\", this.activeListeners.camera);\n        // Releasing DOM events & captors\n        window.removeEventListener(\"resize\", this.activeListeners.handleResize);\n        this.mouseCaptor.kill();\n        this.touchCaptor.kill();\n        // Releasing graph handlers\n        graph.removeListener(\"nodeAdded\", this.activeListeners.addNodeGraphUpdate);\n        graph.removeListener(\"nodeDropped\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.removeListener(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgeAdded\", this.activeListeners.addEdgeGraphUpdate);\n        graph.removeListener(\"edgeDropped\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.removeListener(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgesCleared\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"cleared\", this.activeListeners.graphUpdate);\n        // Releasing cache & state\n        this.quadtree = new quadtree_1.default();\n        this.nodeDataCache = {};\n        this.edgeDataCache = {};\n        this.highlightedNodes = new Set();\n        this.displayedLabels = new Set();\n        // Clearing frames\n        if (this.renderFrame) {\n            utils_1.cancelFrame(this.renderFrame);\n            this.renderFrame = null;\n        }\n        if (this.renderHighlightedNodesFrame) {\n            utils_1.cancelFrame(this.renderHighlightedNodesFrame);\n            this.renderHighlightedNodesFrame = null;\n        }\n        // Destroying canvases\n        var container = this.container;\n        while (container.firstChild)\n            container.removeChild(container.firstChild);\n    };\n    return Sigma;\n}(events_1.EventEmitter));\nexports.default = Sigma;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * Graphology Extent\n * ==================\n *\n * Simple function returning the extent of selected attributes of the graph.\n */\nvar isGraph = require('graphology-utils/is-graph');\n\n/**\n * Function returning the extent of the selected node attributes.\n *\n * @param  {Graph}        graph     - Target graph.\n * @param  {string|array} attribute - Single or multiple attributes.\n * @return {array|object}\n */\nfunction nodeExtent(graph, attribute) {\n  if (!isGraph(graph))\n    throw new Error('graphology-metrics/extent: the given graph is not a valid graphology instance.');\n\n  var attributes = [].concat(attribute);\n\n  var value,\n      key,\n      a;\n\n  var results = {};\n\n  for (a = 0; a < attributes.length; a++) {\n    key = attributes[a];\n\n    results[key] = [Infinity, -Infinity];\n  }\n\n  graph.forEachNode(function(node, data) {\n    for (a = 0; a < attributes.length; a++) {\n      key = attributes[a];\n      value = data[key];\n\n      if (value < results[key][0])\n        results[key][0] = value;\n\n      if (value > results[key][1])\n        results[key][1] = value;\n    }\n  });\n\n  return typeof attribute === 'string' ? results[attribute] : results;\n}\n\n/**\n * Function returning the extent of the selected edge attributes.\n *\n * @param  {Graph}        graph     - Target graph.\n * @param  {string|array} attribute - Single or multiple attributes.\n * @return {array|object}\n */\nfunction edgeExtent(graph, attribute) {\n  if (!isGraph(graph))\n    throw new Error('graphology-metrics/extent: the given graph is not a valid graphology instance.');\n\n  var attributes = [].concat(attribute);\n\n  var value,\n      key,\n      a;\n\n  var results = {};\n\n  for (a = 0; a < attributes.length; a++) {\n    key = attributes[a];\n\n    results[key] = [Infinity, -Infinity];\n  }\n\n  graph.forEachEdge(function(edge, data) {\n    for (a = 0; a < attributes.length; a++) {\n      key = attributes[a];\n      value = data[key];\n\n      if (value < results[key][0])\n        results[key][0] = value;\n\n      if (value > results[key][1])\n        results[key][1] = value;\n    }\n  });\n\n  return typeof attribute === 'string' ? results[attribute] : results;\n}\n\n/**\n * Exporting.\n */\nvar extent = nodeExtent;\nextent.nodeExtent = nodeExtent;\nextent.edgeExtent = edgeExtent;\n\nmodule.exports = extent;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js Camera Class\n * ======================\n *\n * Class designed to store camera information & used to update it.\n * @module\n */\nvar events_1 = require(\"events\");\nvar animate_1 = require(\"../utils/animate\");\nvar easings_1 = __importDefault(require(\"../utils/easings\"));\nvar utils_1 = require(\"../utils\");\n/**\n * Defaults.\n */\nvar DEFAULT_ZOOMING_RATIO = 1.5;\n// TODO: animate options = number polymorphism?\n// TODO: pan, zoom, unzoom, reset, rotate, zoomTo\n// TODO: add width / height to camera and add #.resize\n// TODO: bind camera to renderer rather than sigma\n// TODO: add #.graphToDisplay, #.displayToGraph, batch methods later\n/**\n * Camera class\n *\n * @constructor\n */\nvar Camera = /** @class */ (function (_super) {\n    __extends(Camera, _super);\n    function Camera() {\n        var _this = _super.call(this) || this;\n        _this.x = 0.5;\n        _this.y = 0.5;\n        _this.angle = 0;\n        _this.ratio = 1;\n        _this.nextFrame = null;\n        _this.enabled = true;\n        // State\n        _this.previousState = _this.getState();\n        return _this;\n    }\n    /**\n     * Static method used to create a Camera object with a given state.\n     *\n     * @param state\n     * @return {Camera}\n     */\n    Camera.from = function (state) {\n        var camera = new Camera();\n        return camera.setState(state);\n    };\n    /**\n     * Method used to enable the camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.enable = function () {\n        this.enabled = true;\n        return this;\n    };\n    /**\n     * Method used to disable the camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.disable = function () {\n        this.enabled = false;\n        return this;\n    };\n    /**\n     * Method used to retrieve the camera's current state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.getState = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            angle: this.angle,\n            ratio: this.ratio,\n        };\n    };\n    /**\n     * Method used to retrieve the camera's previous state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.getPreviousState = function () {\n        var state = this.previousState;\n        return {\n            x: state.x,\n            y: state.y,\n            angle: state.angle,\n            ratio: state.ratio,\n        };\n    };\n    /**\n     * Method used to check whether the camera is currently being animated.\n     *\n     * @return {boolean}\n     */\n    Camera.prototype.isAnimated = function () {\n        return !!this.nextFrame;\n    };\n    /**\n     * Method returning the coordinates of a point from the framed graph system to the\n     * viewport system.\n     *\n     * @param  {object} dimensions  - Dimensions of the viewport.\n     * @param  {object} coordinates - Coordinates of the point.\n     * @return {object}             - The point coordinates in the viewport.\n     */\n    Camera.prototype.framedGraphToViewport = function (dimensions, coordinates) {\n        var smallestDimension = Math.min(dimensions.width, dimensions.height);\n        var dx = smallestDimension / dimensions.width;\n        var dy = smallestDimension / dimensions.height;\n        var ratio = this.ratio / smallestDimension;\n        // Align with center of the graph:\n        var x1 = (coordinates.x - this.x) / ratio;\n        var y1 = (this.y - coordinates.y) / ratio;\n        // Rotate:\n        var x2 = x1 * Math.cos(this.angle) - y1 * Math.sin(this.angle);\n        var y2 = y1 * Math.cos(this.angle) + x1 * Math.sin(this.angle);\n        return {\n            // Translate to center of screen\n            x: x2 + smallestDimension / 2 / dx,\n            y: y2 + smallestDimension / 2 / dy,\n        };\n    };\n    /**\n     * Method returning the coordinates of a point from the viewport system to the\n     * framed graph system.\n     *\n     * @param  {object} dimensions  - Dimensions of the viewport.\n     * @param  {object} coordinates - Coordinates of the point.\n     * @return {object}             - The point coordinates in the graph frame.\n     */\n    Camera.prototype.viewportToFramedGraph = function (dimensions, coordinates) {\n        var _a;\n        var smallestDimension = Math.min(dimensions.width, dimensions.height);\n        var dx = smallestDimension / dimensions.width;\n        var dy = smallestDimension / dimensions.height;\n        var ratio = this.ratio / smallestDimension;\n        // Align with center of the graph:\n        var x = coordinates.x - smallestDimension / 2 / dx;\n        var y = coordinates.y - smallestDimension / 2 / dy;\n        // Rotate:\n        _a = __read([\n            x * Math.cos(-this.angle) - y * Math.sin(-this.angle),\n            y * Math.cos(-this.angle) + x * Math.sin(-this.angle),\n        ], 2), x = _a[0], y = _a[1];\n        return {\n            x: x * ratio + this.x,\n            y: -y * ratio + this.y,\n        };\n    };\n    /**\n     * Method returning the abstract rectangle containing the graph according\n     * to the camera's state.\n     *\n     * @return {object} - The view's rectangle.\n     */\n    Camera.prototype.viewRectangle = function (dimensions) {\n        // TODO: reduce relative margin?\n        var marginX = (0 * dimensions.width) / 8, marginY = (0 * dimensions.height) / 8;\n        var p1 = this.viewportToFramedGraph(dimensions, { x: 0 - marginX, y: 0 - marginY }), p2 = this.viewportToFramedGraph(dimensions, { x: dimensions.width + marginX, y: 0 - marginY }), h = this.viewportToFramedGraph(dimensions, { x: 0, y: dimensions.height + marginY });\n        return {\n            x1: p1.x,\n            y1: p1.y,\n            x2: p2.x,\n            y2: p2.y,\n            height: p2.y - h.y,\n        };\n    };\n    /**\n     * Method used to set the camera's state.\n     *\n     * @param  {object} state - New state.\n     * @return {Camera}\n     */\n    Camera.prototype.setState = function (state) {\n        if (!this.enabled)\n            return this;\n        // TODO: validations\n        // TODO: update by function\n        // Keeping track of last state\n        this.previousState = this.getState();\n        if (state.x)\n            this.x = state.x;\n        if (state.y)\n            this.y = state.y;\n        if (state.angle)\n            this.angle = state.angle;\n        if (state.ratio)\n            this.ratio = state.ratio;\n        // Emitting\n        // TODO: don't emit if nothing changed?\n        this.emit(\"updated\", this.getState());\n        return this;\n    };\n    /**\n     * Method used to (un)zoom, while preserving the position of a viewport point.\n     * Used for instance to\n     *\n     * @param viewportTarget\n     * @param dimensions\n     * @param ratio\n     * @return {CameraState}\n     */\n    Camera.prototype.getViewportZoomedState = function (viewportTarget, dimensions, ratio) {\n        // TODO: handle max zoom\n        var ratioDiff = ratio / this.ratio;\n        var center = {\n            x: dimensions.width / 2,\n            y: dimensions.height / 2,\n        };\n        var graphMousePosition = this.viewportToFramedGraph(dimensions, viewportTarget);\n        var graphCenterPosition = this.viewportToFramedGraph(dimensions, center);\n        return __assign(__assign({}, this.getState()), { x: (graphMousePosition.x - graphCenterPosition.x) * (1 - ratioDiff) + this.x, y: (graphMousePosition.y - graphCenterPosition.y) * (1 - ratioDiff) + this.y, ratio: ratio });\n    };\n    /**\n     * Method used to animate the camera.\n     *\n     * @param  {object}                    state      - State to reach eventually.\n     * @param  {object}                    opts       - Options:\n     * @param  {number}                      duration - Duration of the animation.\n     * @param  {string | number => number}   easing   - Easing function or name of an existing one\n     * @param  {function}                  callback   - Callback\n     */\n    Camera.prototype.animate = function (state, opts, callback) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        var options = Object.assign({}, animate_1.ANIMATE_DEFAULTS, opts);\n        var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n        // State\n        var start = Date.now(), initialState = this.getState();\n        // Function performing the animation\n        var fn = function () {\n            var t = (Date.now() - start) / options.duration;\n            // The animation is over:\n            if (t >= 1) {\n                _this.nextFrame = null;\n                _this.setState(state);\n                if (_this.animationCallback) {\n                    _this.animationCallback.call(null);\n                    _this.animationCallback = undefined;\n                }\n                return;\n            }\n            var coefficient = easing(t);\n            var newState = {};\n            if (state.x)\n                newState.x = initialState.x + (state.x - initialState.x) * coefficient;\n            if (state.y)\n                newState.y = initialState.y + (state.y - initialState.y) * coefficient;\n            if (state.angle)\n                newState.angle = initialState.angle + (state.angle - initialState.angle) * coefficient;\n            if (state.ratio)\n                newState.ratio = initialState.ratio + (state.ratio - initialState.ratio) * coefficient;\n            _this.setState(newState);\n            _this.nextFrame = utils_1.requestFrame(fn);\n        };\n        if (this.nextFrame) {\n            utils_1.cancelFrame(this.nextFrame);\n            if (this.animationCallback)\n                this.animationCallback.call(null);\n            this.nextFrame = utils_1.requestFrame(fn);\n        }\n        else {\n            fn();\n        }\n        this.animationCallback = callback;\n    };\n    /**\n     * Method used to zoom the camera.\n     *\n     * @param  {number|object} factorOrOptions - Factor or options.\n     * @return {function}\n     */\n    Camera.prototype.animatedZoom = function (factorOrOptions) {\n        if (!factorOrOptions) {\n            this.animate({ ratio: this.ratio / DEFAULT_ZOOMING_RATIO });\n        }\n        else {\n            if (typeof factorOrOptions === \"number\")\n                return this.animate({ ratio: this.ratio / factorOrOptions });\n            else\n                this.animate({\n                    ratio: this.ratio / (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO),\n                }, factorOrOptions);\n        }\n    };\n    /**\n     * Method used to unzoom the camera.\n     *\n     * @param  {number|object} factorOrOptions - Factor or options.\n     */\n    Camera.prototype.animatedUnzoom = function (factorOrOptions) {\n        if (!factorOrOptions) {\n            this.animate({ ratio: this.ratio * DEFAULT_ZOOMING_RATIO });\n        }\n        else {\n            if (typeof factorOrOptions === \"number\")\n                return this.animate({ ratio: this.ratio * factorOrOptions });\n            else\n                this.animate({\n                    ratio: this.ratio * (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO),\n                }, factorOrOptions);\n        }\n    };\n    /**\n     * Method used to reset the camera.\n     *\n     * @param  {object} options - Options.\n     */\n    Camera.prototype.animatedReset = function (options) {\n        this.animate({\n            x: 0.5,\n            y: 0.5,\n            ratio: 1,\n            angle: 0,\n        }, options);\n    };\n    /**\n     * Returns a new Camera instance, with the same state as the current camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.copy = function () {\n        return Camera.from(this.getState());\n    };\n    return Camera;\n}(events_1.EventEmitter));\nexports.default = Camera;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.animateNodes = exports.ANIMATE_DEFAULTS = void 0;\nvar index_1 = require(\"./index\");\nvar easings_1 = __importDefault(require(\"./easings\"));\nexports.ANIMATE_DEFAULTS = {\n    easing: \"quadraticInOut\",\n    duration: 150,\n};\n/**\n * Function used to animate the nodes.\n */\nfunction animateNodes(graph, targets, opts, callback) {\n    var options = Object.assign({}, exports.ANIMATE_DEFAULTS, opts);\n    var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n    var start = Date.now();\n    var startPositions = {};\n    for (var node in targets) {\n        var attrs = targets[node];\n        startPositions[node] = {};\n        for (var k in attrs)\n            startPositions[node][k] = graph.getNodeAttribute(node, k);\n    }\n    var frame = null;\n    var step = function () {\n        var p = (Date.now() - start) / options.duration;\n        if (p >= 1) {\n            // Animation is done\n            for (var node in targets) {\n                var attrs = targets[node];\n                for (var k in attrs)\n                    graph.setNodeAttribute(node, k, attrs[k]);\n            }\n            if (typeof callback === \"function\")\n                callback();\n            return;\n        }\n        p = easing(p);\n        for (var node in targets) {\n            var attrs = targets[node];\n            var s = startPositions[node];\n            for (var k in attrs)\n                graph.setNodeAttribute(node, k, attrs[k] * p + s[k] * (1 - p));\n        }\n        frame = index_1.requestFrame(step);\n    };\n    step();\n    return function () {\n        if (frame)\n            index_1.cancelFrame(frame);\n    };\n}\nexports.animateNodes = animateNodes;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateGraph = exports.canUse32BitsIndices = exports.extractPixel = exports.matrixFromCamera = exports.floatColor = exports.zIndexOrdering = exports.createNormalizationFunction = exports.getPixelRatio = exports.createElement = exports.cancelFrame = exports.requestFrame = exports.assignDeep = exports.isPlainObject = void 0;\nvar is_graph_1 = __importDefault(require(\"graphology-utils/is-graph\"));\nvar matrices_1 = require(\"./matrices\");\n/**\n * Checks whether the given value is a plain object.\n *\n * @param  {mixed}   value - Target value.\n * @return {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\nfunction isPlainObject(value) {\n    return typeof value === \"object\" && value !== null && value.constructor === Object;\n}\nexports.isPlainObject = isPlainObject;\n/**\n * Very simple recursive Object.assign-like function.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assignDeep(target) {\n    var objects = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        objects[_i - 1] = arguments[_i];\n    }\n    target = target || {};\n    for (var i = 0, l = objects.length; i < l; i++) {\n        var o = objects[i];\n        if (!o)\n            continue;\n        for (var k in o) {\n            if (isPlainObject(o[k])) {\n                target[k] = assignDeep(target[k], o[k]);\n            }\n            else {\n                target[k] = o[k];\n            }\n        }\n    }\n    return target;\n}\nexports.assignDeep = assignDeep;\n/**\n * Just some dirty trick to make requestAnimationFrame and cancelAnimationFrame \"work\" in Node.js, for unit tests:\n */\nexports.requestFrame = typeof requestAnimationFrame !== \"undefined\"\n    ? function (callback) { return requestAnimationFrame(callback); }\n    : function (callback) { return setTimeout(callback, 0); };\nexports.cancelFrame = typeof cancelAnimationFrame !== \"undefined\"\n    ? function (requestID) { return cancelAnimationFrame(requestID); }\n    : function (requestID) { return clearTimeout(requestID); };\n/**\n * Function used to create DOM elements easily.\n *\n * @param  {string} tag        - Tag name of the element to create.\n * @param  {object} style      - Styles map.\n * @param  {object} attributes - Attributes map.\n * @return {HTMLElement}\n */\nfunction createElement(tag, style, attributes) {\n    var element = document.createElement(tag);\n    if (style) {\n        for (var k in style) {\n            element.style[k] = style[k];\n        }\n    }\n    if (attributes) {\n        for (var k in attributes) {\n            element.setAttribute(k, attributes[k]);\n        }\n    }\n    return element;\n}\nexports.createElement = createElement;\n/**\n * Function returning the browser's pixel ratio.\n *\n * @return {number}\n */\nfunction getPixelRatio() {\n    if (typeof window.devicePixelRatio !== \"undefined\")\n        return window.devicePixelRatio;\n    return 1;\n}\nexports.getPixelRatio = getPixelRatio;\nfunction createNormalizationFunction(extent) {\n    var _a = __read(extent.x, 2), minX = _a[0], maxX = _a[1], _b = __read(extent.y, 2), minY = _b[0], maxY = _b[1];\n    var ratio = Math.max(maxX - minX, maxY - minY);\n    if (ratio === 0)\n        ratio = 1;\n    var dX = (maxX + minX) / 2, dY = (maxY + minY) / 2;\n    var fn = function (data) {\n        return {\n            x: 0.5 + (data.x - dX) / ratio,\n            y: 0.5 + (data.y - dY) / ratio,\n        };\n    };\n    // TODO: possibility to apply this in batch over array of indices\n    fn.applyTo = function (data) {\n        data.x = 0.5 + (data.x - dX) / ratio;\n        data.y = 0.5 + (data.y - dY) / ratio;\n    };\n    fn.inverse = function (data) {\n        return {\n            x: dX + ratio * (data.x - 0.5),\n            y: dY + ratio * (data.y - 0.5),\n        };\n    };\n    fn.ratio = ratio;\n    return fn;\n}\nexports.createNormalizationFunction = createNormalizationFunction;\n/**\n * Function ordering the given elements in reverse z-order so they drawn\n * the correct way.\n *\n * @param  {number}   extent   - [min, max] z values.\n * @param  {function} getter   - Z attribute getter function.\n * @param  {array}    elements - The array to sort.\n * @return {array} - The sorted array.\n */\nfunction zIndexOrdering(extent, getter, elements) {\n    // If k is > n, we'll use a standard sort\n    return elements.sort(function (a, b) {\n        var zA = getter(a) || 0, zB = getter(b) || 0;\n        if (zA < zB)\n            return -1;\n        if (zA > zB)\n            return 1;\n        return 0;\n    });\n    // TODO: counting sort optimization\n}\nexports.zIndexOrdering = zIndexOrdering;\n/**\n * WebGL utils\n * ===========\n */\n/**\n * Memoized function returning a float-encoded color from various string\n * formats describing colors.\n */\nvar FLOAT_COLOR_CACHE = {};\nvar INT8 = new Int8Array(4);\nvar INT32 = new Int32Array(INT8.buffer, 0, 1);\nvar FLOAT32 = new Float32Array(INT8.buffer, 0, 1);\nvar RGBA_TEST_REGEX = /^\\s*rgba?\\s*\\(/;\nvar RGBA_EXTRACT_REGEX = /^\\s*rgba?\\s*\\(\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*,\\s*([0-9]*)(?:\\s*,\\s*(.*)?)?\\)\\s*$/;\nfunction floatColor(val) {\n    // If the color is already computed, we yield it\n    if (typeof FLOAT_COLOR_CACHE[val] !== \"undefined\")\n        return FLOAT_COLOR_CACHE[val];\n    var r = 0, g = 0, b = 0, a = 1;\n    // Handling hexadecimal notation\n    if (val[0] === \"#\") {\n        if (val.length === 4) {\n            r = parseInt(val.charAt(1) + val.charAt(1), 16);\n            g = parseInt(val.charAt(2) + val.charAt(2), 16);\n            b = parseInt(val.charAt(3) + val.charAt(3), 16);\n        }\n        else {\n            r = parseInt(val.charAt(1) + val.charAt(2), 16);\n            g = parseInt(val.charAt(3) + val.charAt(4), 16);\n            b = parseInt(val.charAt(5) + val.charAt(6), 16);\n        }\n    }\n    // Handling rgb notation\n    else if (RGBA_TEST_REGEX.test(val)) {\n        var match = val.match(RGBA_EXTRACT_REGEX);\n        if (match) {\n            r = +match[1];\n            g = +match[2];\n            b = +match[3];\n            if (match[4])\n                a = +match[4];\n        }\n    }\n    a = (a * 255) | 0;\n    INT32[0] = ((a << 24) | (b << 16) | (g << 8) | r) & 0xfeffffff;\n    var color = FLOAT32[0];\n    FLOAT_COLOR_CACHE[val] = color;\n    return color;\n}\nexports.floatColor = floatColor;\n/**\n * Function returning a matrix from the current state of the camera.\n */\n// TODO: it's possible to optimize this drastically!\nfunction matrixFromCamera(state, dimensions) {\n    var angle = state.angle, ratio = state.ratio, x = state.x, y = state.y;\n    var width = dimensions.width, height = dimensions.height;\n    var matrix = matrices_1.identity();\n    var smallestDimension = Math.min(width, height);\n    var cameraCentering = matrices_1.translate(matrices_1.identity(), -x, -y), cameraScaling = matrices_1.scale(matrices_1.identity(), 1 / ratio), cameraRotation = matrices_1.rotate(matrices_1.identity(), -angle), viewportScaling = matrices_1.scale(matrices_1.identity(), 2 * (smallestDimension / width), 2 * (smallestDimension / height));\n    // Logical order is reversed\n    matrices_1.multiply(matrix, viewportScaling);\n    matrices_1.multiply(matrix, cameraRotation);\n    matrices_1.multiply(matrix, cameraScaling);\n    matrices_1.multiply(matrix, cameraCentering);\n    return matrix;\n}\nexports.matrixFromCamera = matrixFromCamera;\n/**\n * Function extracting the color at the given pixel.\n */\nfunction extractPixel(gl, x, y, array) {\n    var data = array || new Uint8Array(4);\n    gl.readPixels(x, y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    return data;\n}\nexports.extractPixel = extractPixel;\n/**\n * Function used to know whether given webgl context can use 32 bits indices.\n */\nfunction canUse32BitsIndices(gl) {\n    var webgl2 = typeof WebGL2RenderingContext !== \"undefined\" && gl instanceof WebGL2RenderingContext;\n    return webgl2 || !!gl.getExtension(\"OES_element_index_uint\");\n}\nexports.canUse32BitsIndices = canUse32BitsIndices;\n/**\n * Check if the graph variable is a valid graph, and if sigma can render it.\n */\nfunction validateGraph(graph) {\n    // check if it's a valid graphology instance\n    if (!is_graph_1.default(graph))\n        throw new Error(\"Sigma: invalid graph instance.\");\n    // check if nodes have x/y attributes\n    graph.forEachNode(function (key, attributes) {\n        if (!Number.isFinite(attributes.x) || !Number.isFinite(attributes.y)) {\n            throw new Error(\"Sigma: Coordinates of node \" + key + \" are invalid. A node must have a numeric 'x' and 'y' attribute.\");\n        }\n    });\n}\nexports.validateGraph = validateGraph;\n","/**\n * Graphology isGraph\n * ===================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology instance.\n */\n\n/**\n * Checking the value is a graphology instance.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraph(value) {\n  return (\n    value !== null &&\n    typeof value === 'object' &&\n    typeof value.addUndirectedEdgeWithKey === 'function' &&\n    typeof value.dropNode === 'function' &&\n    typeof value.multi === 'boolean'\n  );\n};\n","\"use strict\";\n/**\n * Sigma.js WebGL Matrices Helpers\n * ================================\n *\n * Matrices-related helper functions used by sigma's WebGL renderer.\n * @module\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiply = exports.translate = exports.rotate = exports.scale = exports.identity = void 0;\nfunction identity() {\n    return Float32Array.of(1, 0, 0, 0, 1, 0, 0, 0, 1);\n}\nexports.identity = identity;\n// TODO: optimize\nfunction scale(m, x, y) {\n    m[0] = x;\n    m[4] = typeof y === \"number\" ? y : x;\n    return m;\n}\nexports.scale = scale;\nfunction rotate(m, r) {\n    var s = Math.sin(r), c = Math.cos(r);\n    m[0] = c;\n    m[1] = s;\n    m[3] = -s;\n    m[4] = c;\n    return m;\n}\nexports.rotate = rotate;\nfunction translate(m, x, y) {\n    m[6] = x;\n    m[7] = y;\n    return m;\n}\nexports.translate = translate;\nfunction multiply(a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2];\n    var a10 = a[3], a11 = a[4], a12 = a[5];\n    var a20 = a[6], a21 = a[7], a22 = a[8];\n    var b00 = b[0], b01 = b[1], b02 = b[2];\n    var b10 = b[3], b11 = b[4], b12 = b[5];\n    var b20 = b[6], b21 = b[7], b22 = b[8];\n    a[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    a[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    a[2] = b00 * a02 + b01 * a12 + b02 * a22;\n    a[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    a[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    a[5] = b10 * a02 + b11 * a12 + b12 * a22;\n    a[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    a[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    a[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return a;\n}\nexports.multiply = multiply;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cubicInOut = exports.cubicOut = exports.cubicIn = exports.quadraticInOut = exports.quadraticOut = exports.quadraticIn = exports.linear = void 0;\n/**\n * Sigma.js Easings\n * =================\n *\n * Handy collection of easing functions.\n * @module\n */\nvar linear = function (k) { return k; };\nexports.linear = linear;\nvar quadraticIn = function (k) { return k * k; };\nexports.quadraticIn = quadraticIn;\nvar quadraticOut = function (k) { return k * (2 - k); };\nexports.quadraticOut = quadraticOut;\nvar quadraticInOut = function (k) {\n    if ((k *= 2) < 1)\n        return 0.5 * k * k;\n    return -0.5 * (--k * (k - 2) - 1);\n};\nexports.quadraticInOut = quadraticInOut;\nvar cubicIn = function (k) { return k * k * k; };\nexports.cubicIn = cubicIn;\nvar cubicOut = function (k) { return --k * k * k + 1; };\nexports.cubicOut = cubicOut;\nvar cubicInOut = function (k) {\n    if ((k *= 2) < 1)\n        return 0.5 * k * k * k;\n    return 0.5 * ((k -= 2) * k * k + 2);\n};\nexports.cubicInOut = cubicInOut;\nvar easings = {\n    linear: exports.linear,\n    quadraticIn: exports.quadraticIn,\n    quadraticOut: exports.quadraticOut,\n    quadraticInOut: exports.quadraticInOut,\n    cubicIn: exports.cubicIn,\n    cubicOut: exports.cubicOut,\n    cubicInOut: exports.cubicInOut,\n};\nexports.default = easings;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar captor_1 = __importStar(require(\"./captor\"));\n/**\n * Constants.\n */\nvar DRAG_TIMEOUT = 200;\nvar DRAGGED_EVENTS_TOLERANCE = 3;\nvar MOUSE_INERTIA_DURATION = 200;\nvar MOUSE_INERTIA_RATIO = 3;\nvar MOUSE_ZOOM_DURATION = 250;\nvar ZOOMING_RATIO = 1.7;\nvar DOUBLE_CLICK_TIMEOUT = 300;\nvar DOUBLE_CLICK_ZOOMING_RATIO = 2.2;\nvar DOUBLE_CLICK_ZOOMING_DURATION = 200;\n/**\n * Mouse captor class.\n *\n * @constructor\n */\nvar MouseCaptor = /** @class */ (function (_super) {\n    __extends(MouseCaptor, _super);\n    function MouseCaptor(container, camera) {\n        var _this = _super.call(this, container, camera) || this;\n        // State\n        _this.enabled = true;\n        _this.draggedEvents = 0;\n        _this.downStartTime = null;\n        _this.lastMouseX = null;\n        _this.lastMouseY = null;\n        _this.isMouseDown = false;\n        _this.isMoving = false;\n        _this.movingTimeout = null;\n        _this.startCameraState = null;\n        _this.clicks = 0;\n        _this.doubleClickTimeout = null;\n        _this.currentWheelDirection = 0;\n        // Binding methods\n        _this.handleClick = _this.handleClick.bind(_this);\n        _this.handleRightClick = _this.handleRightClick.bind(_this);\n        _this.handleDown = _this.handleDown.bind(_this);\n        _this.handleUp = _this.handleUp.bind(_this);\n        _this.handleMove = _this.handleMove.bind(_this);\n        _this.handleWheel = _this.handleWheel.bind(_this);\n        _this.handleOut = _this.handleOut.bind(_this);\n        // Binding events\n        container.addEventListener(\"click\", _this.handleClick, false);\n        container.addEventListener(\"contextmenu\", _this.handleRightClick, false);\n        container.addEventListener(\"mousedown\", _this.handleDown, false);\n        container.addEventListener(\"mousemove\", _this.handleMove, false);\n        container.addEventListener(\"wheel\", _this.handleWheel, false);\n        container.addEventListener(\"mouseout\", _this.handleOut, false);\n        document.addEventListener(\"mouseup\", _this.handleUp, false);\n        return _this;\n    }\n    MouseCaptor.prototype.kill = function () {\n        var container = this.container;\n        container.removeEventListener(\"click\", this.handleClick);\n        container.removeEventListener(\"contextmenu\", this.handleRightClick);\n        container.removeEventListener(\"mousedown\", this.handleDown);\n        container.removeEventListener(\"mousemove\", this.handleMove);\n        container.removeEventListener(\"wheel\", this.handleWheel);\n        container.removeEventListener(\"mouseout\", this.handleOut);\n        document.removeEventListener(\"mouseup\", this.handleUp);\n    };\n    MouseCaptor.prototype.handleClick = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        this.clicks++;\n        if (this.clicks === 2) {\n            this.clicks = 0;\n            if (typeof this.doubleClickTimeout === \"number\") {\n                clearTimeout(this.doubleClickTimeout);\n                this.doubleClickTimeout = null;\n            }\n            return this.handleDoubleClick(e);\n        }\n        setTimeout(function () {\n            _this.clicks = 0;\n            _this.doubleClickTimeout = null;\n        }, DOUBLE_CLICK_TIMEOUT);\n        // NOTE: this is here to prevent click events on drag\n        if (this.draggedEvents < DRAGGED_EVENTS_TOLERANCE)\n            this.emit(\"click\", captor_1.getMouseCoords(e));\n    };\n    MouseCaptor.prototype.handleRightClick = function (e) {\n        if (!this.enabled)\n            return;\n        this.emit(\"rightClick\", captor_1.getMouseCoords(e));\n    };\n    MouseCaptor.prototype.handleDoubleClick = function (e) {\n        if (!this.enabled)\n            return;\n        var newRatio = this.camera.getState().ratio / DOUBLE_CLICK_ZOOMING_RATIO;\n        this.camera.animate(this.camera.getViewportZoomedState({ x: captor_1.getX(e), y: captor_1.getY(e) }, {\n            width: this.container.offsetWidth,\n            height: this.container.offsetHeight,\n        }, newRatio), {\n            easing: \"quadraticInOut\",\n            duration: DOUBLE_CLICK_ZOOMING_DURATION,\n        });\n        if (e.preventDefault)\n            e.preventDefault();\n        else\n            e.returnValue = false;\n        e.stopPropagation();\n        return false;\n    };\n    MouseCaptor.prototype.handleDown = function (e) {\n        if (!this.enabled)\n            return;\n        this.startCameraState = this.camera.getState();\n        this.lastMouseX = captor_1.getX(e);\n        this.lastMouseY = captor_1.getY(e);\n        this.draggedEvents = 0;\n        this.downStartTime = Date.now();\n        // TODO: dispatch events\n        switch (e.which) {\n            default:\n                // Left button pressed\n                this.isMouseDown = true;\n                this.emit(\"mousedown\", captor_1.getMouseCoords(e));\n        }\n    };\n    MouseCaptor.prototype.handleUp = function (e) {\n        var _this = this;\n        if (!this.enabled || !this.isMouseDown)\n            return;\n        this.isMouseDown = false;\n        if (typeof this.movingTimeout === \"number\") {\n            clearTimeout(this.movingTimeout);\n            this.movingTimeout = null;\n        }\n        var x = captor_1.getX(e), y = captor_1.getY(e);\n        var cameraState = this.camera.getState(), previousCameraState = this.camera.getPreviousState();\n        if (this.isMoving) {\n            this.camera.animate({\n                x: cameraState.x + MOUSE_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n                y: cameraState.y + MOUSE_INERTIA_RATIO * (cameraState.y - previousCameraState.y),\n            }, {\n                duration: MOUSE_INERTIA_DURATION,\n                easing: \"quadraticOut\",\n            });\n        }\n        else if (this.lastMouseX !== x || this.lastMouseY !== y) {\n            this.camera.setState({\n                x: cameraState.x,\n                y: cameraState.y,\n            });\n        }\n        this.isMoving = false;\n        setTimeout(function () { return (_this.draggedEvents = 0); }, 0);\n        this.emit(\"mouseup\", captor_1.getMouseCoords(e));\n    };\n    MouseCaptor.prototype.handleMove = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        this.emit(\"mousemove\", captor_1.getMouseCoords(e));\n        if (this.isMouseDown) {\n            // TODO: dispatch events\n            this.isMoving = true;\n            this.draggedEvents++;\n            if (typeof this.movingTimeout === \"number\") {\n                clearTimeout(this.movingTimeout);\n            }\n            this.movingTimeout = window.setTimeout(function () {\n                _this.movingTimeout = null;\n                _this.isMoving = false;\n            }, DRAG_TIMEOUT);\n            var dimensions = {\n                width: this.container.offsetWidth,\n                height: this.container.offsetHeight,\n            };\n            var eX = captor_1.getX(e), eY = captor_1.getY(e);\n            var lastMouse = this.camera.viewportToFramedGraph(dimensions, {\n                x: this.lastMouseX,\n                y: this.lastMouseY,\n            });\n            var mouse = this.camera.viewportToFramedGraph(dimensions, { x: eX, y: eY });\n            var offsetX = lastMouse.x - mouse.x, offsetY = lastMouse.y - mouse.y;\n            var cameraState = this.camera.getState();\n            var x = cameraState.x + offsetX, y = cameraState.y + offsetY;\n            this.camera.setState({ x: x, y: y });\n            this.lastMouseX = eX;\n            this.lastMouseY = eY;\n        }\n        if (e.preventDefault)\n            e.preventDefault();\n        else\n            e.returnValue = false;\n        e.stopPropagation();\n        return false;\n    };\n    MouseCaptor.prototype.handleWheel = function (e) {\n        var _this = this;\n        if (e.preventDefault)\n            e.preventDefault();\n        else\n            e.returnValue = false;\n        e.stopPropagation();\n        if (!this.enabled)\n            return false;\n        var delta = captor_1.getWheelDelta(e);\n        if (!delta)\n            return false;\n        var ratioDiff = delta > 0 ? 1 / ZOOMING_RATIO : ZOOMING_RATIO;\n        var newRatio = this.camera.getState().ratio * ratioDiff;\n        var wheelDirection = delta > 0 ? 1 : -1;\n        var now = Date.now();\n        // Cancel events that are too close too each other and in the same direction:\n        if (this.currentWheelDirection === wheelDirection &&\n            this.lastWheelTriggerTime &&\n            now - this.lastWheelTriggerTime < MOUSE_ZOOM_DURATION / 5) {\n            return false;\n        }\n        this.camera.animate(this.camera.getViewportZoomedState({ x: captor_1.getX(e), y: captor_1.getY(e) }, {\n            width: this.container.offsetWidth,\n            height: this.container.offsetHeight,\n        }, newRatio), {\n            easing: \"quadraticOut\",\n            duration: MOUSE_ZOOM_DURATION,\n        }, function () {\n            _this.currentWheelDirection = 0;\n        });\n        this.currentWheelDirection = wheelDirection;\n        this.lastWheelTriggerTime = now;\n        return false;\n    };\n    MouseCaptor.prototype.handleOut = function () {\n        // TODO: dispatch event\n    };\n    return MouseCaptor;\n}(captor_1.default));\nexports.default = MouseCaptor;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getWheelDelta = exports.getTouchCoords = exports.getTouchesArray = exports.getMouseCoords = exports.getPosition = exports.getY = exports.getX = void 0;\n/**\n * Sigma.js Captor Class\n * ======================\n * @module\n */\nvar events_1 = require(\"events\");\n/**\n * Captor utils functions\n * ======================\n */\n/**\n * Extract the local X position from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The local X value of the mouse.\n */\nfunction getX(e) {\n    if (typeof e.offsetX !== \"undefined\")\n        return e.offsetX;\n    if (typeof e.clientX !== \"undefined\")\n        return e.clientX;\n    throw new Error(\"Captor: could not extract x from event.\");\n}\nexports.getX = getX;\n/**\n * Extract the local Y position from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The local Y value of the mouse.\n */\nfunction getY(e) {\n    if (typeof e.offsetY !== \"undefined\")\n        return e.offsetY;\n    if (typeof e.clientY !== \"undefined\")\n        return e.clientY;\n    throw new Error(\"Captor: could not extract y from event.\");\n}\nexports.getY = getY;\n/**\n * Extract the local X and Y coordinates from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The local Y value of the mouse.\n */\nfunction getPosition(e) {\n    return {\n        x: getX(e),\n        y: getY(e),\n    };\n}\nexports.getPosition = getPosition;\n/**\n * Convert mouse coords to sigma coords.\n *\n * @param  {event}   e   - A mouse event or touch object.\n *\n * @return {object}\n */\nfunction getMouseCoords(e) {\n    return {\n        x: getX(e),\n        y: getY(e),\n        clientX: e.clientX,\n        clientY: e.clientY,\n        ctrlKey: e.ctrlKey,\n        metaKey: e.metaKey,\n        altKey: e.altKey,\n        shiftKey: e.shiftKey,\n        // TODO: this is not ideal... But I am wondering why we don't just pass the event through\n        preventDefault: e.preventDefault.bind(e),\n        original: e,\n    };\n}\nexports.getMouseCoords = getMouseCoords;\nvar MAX_TOUCHES = 2;\nfunction getTouchesArray(touches) {\n    var arr = [];\n    for (var i = 0, l = Math.min(touches.length, MAX_TOUCHES); i < l; i++)\n        arr.push(touches[i]);\n    return arr;\n}\nexports.getTouchesArray = getTouchesArray;\n/**\n * Convert touch coords to sigma coords.\n */\nfunction getTouchCoords(e) {\n    return {\n        touches: getTouchesArray(e.touches).map(getPosition),\n        ctrlKey: e.ctrlKey,\n        metaKey: e.metaKey,\n        altKey: e.altKey,\n        shiftKey: e.shiftKey,\n        // TODO: same as for getMouseCoords\n        preventDefault: e.preventDefault.bind(e),\n        original: e,\n    };\n}\nexports.getTouchCoords = getTouchCoords;\n/**\n * Extract the wheel delta from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The wheel delta of the mouse.\n */\nfunction getWheelDelta(e) {\n    // TODO: check those ratios again to ensure a clean Chrome/Firefox compat\n    if (typeof e.deltaY !== \"undefined\")\n        return (e.deltaY * -3) / 360;\n    if (typeof e.detail !== \"undefined\")\n        return e.detail / -9;\n    throw new Error(\"Captor: could not extract delta from event.\");\n}\nexports.getWheelDelta = getWheelDelta;\n/**\n * Abstract class representing a captor like the user's mouse or touch controls.\n */\nvar Captor = /** @class */ (function (_super) {\n    __extends(Captor, _super);\n    function Captor(container, camera) {\n        var _this = _super.call(this) || this;\n        // Properties\n        _this.container = container;\n        _this.camera = camera;\n        return _this;\n    }\n    return Captor;\n}(events_1.EventEmitter));\nexports.default = Captor;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rectangleCollidesWithQuad = exports.squareCollidesWithQuad = exports.getCircumscribedAlignedRectangle = exports.isRectangleAligned = void 0;\n/**\n * Sigma.js Quad Tree Class\n * =========================\n *\n * Class implementing the quad tree data structure used to solve hovers and\n * determine which elements are currently in the scope of the camera so that\n * we don't waste time rendering things the user cannot see anyway.\n * @module\n */\n/* eslint no-nested-ternary: 0 */\n/* eslint no-constant-condition: 0 */\nvar extend_1 = __importDefault(require(\"@yomguithereal/helpers/extend\"));\n// TODO: should not ask the quadtree when the camera has the whole graph in\n// sight.\n// TODO: a square can be represented as topleft + width, saying for the quad blocks (reduce mem)\n// TODO: jsdoc\n// TODO: be sure we can handle cases overcoming boundaries (because of size) or use a maxed size\n// TODO: filtering unwanted labels beforehand through the filter function\n// NOTE: this is basically a MX-CIF Quadtree at this point\n// NOTE: need to explore R-Trees for edges\n// NOTE: need to explore 2d segment tree for edges\n// NOTE: probably can do faster using spatial hashing\n/**\n * Constants.\n *\n * Note that since we are representing a static 4-ary tree, the indices of the\n * quadrants are the following:\n *   - TOP_LEFT:     4i + b\n *   - TOP_RIGHT:    4i + 2b\n *   - BOTTOM_LEFT:  4i + 3b\n *   - BOTTOM_RIGHT: 4i + 4b\n */\nvar BLOCKS = 4, MAX_LEVEL = 5;\nvar X_OFFSET = 0, Y_OFFSET = 1, WIDTH_OFFSET = 2, HEIGHT_OFFSET = 3;\nvar TOP_LEFT = 1, TOP_RIGHT = 2, BOTTOM_LEFT = 3, BOTTOM_RIGHT = 4;\n/**\n * Geometry helpers.\n */\n/**\n * Function returning whether the given rectangle is axis-aligned.\n *\n * @param  {Rectangle} rect\n * @return {boolean}\n */\nfunction isRectangleAligned(rect) {\n    return rect.x1 === rect.x2 || rect.y1 === rect.y2;\n}\nexports.isRectangleAligned = isRectangleAligned;\n/**\n * Function returning the smallest rectangle that contains the given rectangle, and that is aligned with the axis.\n *\n * @param {Rectangle} rect\n * @return {Rectangle}\n */\nfunction getCircumscribedAlignedRectangle(rect) {\n    var width = Math.sqrt(Math.pow(rect.x2 - rect.x1, 2) + Math.pow(rect.y2 - rect.y1, 2));\n    var heightVector = {\n        x: ((rect.y1 - rect.y2) * rect.height) / width,\n        y: ((rect.x2 - rect.x1) * rect.height) / width,\n    };\n    // Compute all corners:\n    var tl = { x: rect.x1, y: rect.y1 };\n    var tr = { x: rect.x2, y: rect.y2 };\n    var bl = {\n        x: rect.x1 + heightVector.x,\n        y: rect.y1 + heightVector.y,\n    };\n    var br = {\n        x: rect.x2 + heightVector.x,\n        y: rect.y2 + heightVector.y,\n    };\n    var xL = Math.min(tl.x, tr.x, bl.x, br.x);\n    var xR = Math.max(tl.x, tr.x, bl.x, br.x);\n    var yT = Math.min(tl.y, tr.y, bl.y, br.y);\n    var yB = Math.max(tl.y, tr.y, bl.y, br.y);\n    return {\n        x1: xL,\n        y1: yT,\n        x2: xR,\n        y2: yT,\n        height: yB - yT,\n    };\n}\nexports.getCircumscribedAlignedRectangle = getCircumscribedAlignedRectangle;\n/**\n *\n * @param x1\n * @param y1\n * @param w\n * @param qx\n * @param qy\n * @param qw\n * @param qh\n */\nfunction squareCollidesWithQuad(x1, y1, w, qx, qy, qw, qh) {\n    return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + w > qy;\n}\nexports.squareCollidesWithQuad = squareCollidesWithQuad;\nfunction rectangleCollidesWithQuad(x1, y1, w, h, qx, qy, qw, qh) {\n    return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + h > qy;\n}\nexports.rectangleCollidesWithQuad = rectangleCollidesWithQuad;\nfunction pointIsInQuad(x, y, qx, qy, qw, qh) {\n    var xmp = qx + qw / 2, ymp = qy + qh / 2, top = y < ymp, left = x < xmp;\n    return top ? (left ? TOP_LEFT : TOP_RIGHT) : left ? BOTTOM_LEFT : BOTTOM_RIGHT;\n}\n/**\n * Helper functions that are not bound to the class so an external user\n * cannot mess with them.\n */\nfunction buildQuadrants(maxLevel, data) {\n    // [block, level]\n    var stack = [0, 0];\n    while (stack.length) {\n        var level = stack.pop(), block = stack.pop();\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var x = data[block + X_OFFSET], y = data[block + Y_OFFSET], width = data[block + WIDTH_OFFSET], height = data[block + HEIGHT_OFFSET], hw = width / 2, hh = height / 2;\n        data[topLeftBlock + X_OFFSET] = x;\n        data[topLeftBlock + Y_OFFSET] = y;\n        data[topLeftBlock + WIDTH_OFFSET] = hw;\n        data[topLeftBlock + HEIGHT_OFFSET] = hh;\n        data[topRightBlock + X_OFFSET] = x + hw;\n        data[topRightBlock + Y_OFFSET] = y;\n        data[topRightBlock + WIDTH_OFFSET] = hw;\n        data[topRightBlock + HEIGHT_OFFSET] = hh;\n        data[bottomLeftBlock + X_OFFSET] = x;\n        data[bottomLeftBlock + Y_OFFSET] = y + hh;\n        data[bottomLeftBlock + WIDTH_OFFSET] = hw;\n        data[bottomLeftBlock + HEIGHT_OFFSET] = hh;\n        data[bottomRightBlock + X_OFFSET] = x + hw;\n        data[bottomRightBlock + Y_OFFSET] = y + hh;\n        data[bottomRightBlock + WIDTH_OFFSET] = hw;\n        data[bottomRightBlock + HEIGHT_OFFSET] = hh;\n        if (level < maxLevel - 1) {\n            stack.push(bottomRightBlock, level + 1);\n            stack.push(bottomLeftBlock, level + 1);\n            stack.push(topRightBlock, level + 1);\n            stack.push(topLeftBlock, level + 1);\n        }\n    }\n}\nfunction insertNode(maxLevel, data, containers, key, x, y, size) {\n    var x1 = x - size, y1 = y - size, w = size * 2;\n    var level = 0, block = 0;\n    while (true) {\n        // If we reached max level\n        if (level >= maxLevel) {\n            containers[block] = containers[block] || [];\n            containers[block].push(key);\n            return;\n        }\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var collidingWithTopLeft = squareCollidesWithQuad(x1, y1, w, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithTopRight = squareCollidesWithQuad(x1, y1, w, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomLeft = squareCollidesWithQuad(x1, y1, w, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomRight = squareCollidesWithQuad(x1, y1, w, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n        var collisions = [\n            collidingWithTopLeft,\n            collidingWithTopRight,\n            collidingWithBottomLeft,\n            collidingWithBottomRight,\n        ].reduce(function (acc, current) {\n            if (current)\n                return acc + 1;\n            else\n                return acc;\n        }, 0);\n        // If we don't have at least a collision, there is an issue\n        if (collisions === 0)\n            throw new Error(\"sigma/quadtree.insertNode: no collision (level: \" + level + \", key: \" + key + \", x: \" + x + \", y: \" + y + \", size: \" + size + \").\");\n        // If we have 3 collisions, we have a geometry problem obviously\n        if (collisions === 3)\n            throw new Error(\"sigma/quadtree.insertNode: 3 impossible collisions (level: \" + level + \", key: \" + key + \", x: \" + x + \", y: \" + y + \", size: \" + size + \").\");\n        // If we have more that one collision, we stop here and store the node\n        // in the relevant containers\n        if (collisions > 1) {\n            containers[block] = containers[block] || [];\n            containers[block].push(key);\n            return;\n        }\n        else {\n            level++;\n        }\n        // Else we recurse into the correct quads\n        if (collidingWithTopLeft)\n            block = topLeftBlock;\n        if (collidingWithTopRight)\n            block = topRightBlock;\n        if (collidingWithBottomLeft)\n            block = bottomLeftBlock;\n        if (collidingWithBottomRight)\n            block = bottomRightBlock;\n    }\n}\nfunction getNodesInAxisAlignedRectangleArea(maxLevel, data, containers, x1, y1, w, h) {\n    // [block, level]\n    var stack = [0, 0];\n    var collectedNodes = [];\n    var container;\n    while (stack.length) {\n        var level = stack.pop(), block = stack.pop();\n        // Collecting nodes\n        container = containers[block];\n        if (container)\n            extend_1.default(collectedNodes, container);\n        // If we reached max level\n        if (level >= maxLevel)\n            continue;\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var collidingWithTopLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithTopRight = rectangleCollidesWithQuad(x1, y1, w, h, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomRight = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n        if (collidingWithTopLeft)\n            stack.push(topLeftBlock, level + 1);\n        if (collidingWithTopRight)\n            stack.push(topRightBlock, level + 1);\n        if (collidingWithBottomLeft)\n            stack.push(bottomLeftBlock, level + 1);\n        if (collidingWithBottomRight)\n            stack.push(bottomRightBlock, level + 1);\n    }\n    return collectedNodes;\n}\n/**\n * QuadTree class.\n *\n * @constructor\n * @param {object} boundaries - The graph boundaries.\n */\nvar QuadTree = /** @class */ (function () {\n    function QuadTree(params) {\n        if (params === void 0) { params = {}; }\n        this.containers = {};\n        this.cache = null;\n        this.lastRectangle = null;\n        // Allocating the underlying byte array\n        var L = Math.pow(4, MAX_LEVEL);\n        this.data = new Float32Array(BLOCKS * ((4 * L - 1) / 3));\n        if (params.boundaries)\n            this.resize(params.boundaries);\n        else\n            this.resize({\n                x: 0,\n                y: 0,\n                width: 1,\n                height: 1,\n            });\n    }\n    QuadTree.prototype.add = function (key, x, y, size) {\n        insertNode(MAX_LEVEL, this.data, this.containers, key, x, y, size);\n        return this;\n    };\n    QuadTree.prototype.resize = function (boundaries) {\n        this.clear();\n        // Building the quadrants\n        this.data[X_OFFSET] = boundaries.x;\n        this.data[Y_OFFSET] = boundaries.y;\n        this.data[WIDTH_OFFSET] = boundaries.width;\n        this.data[HEIGHT_OFFSET] = boundaries.height;\n        buildQuadrants(MAX_LEVEL, this.data);\n    };\n    QuadTree.prototype.clear = function () {\n        this.containers = {};\n        return this;\n    };\n    QuadTree.prototype.point = function (x, y) {\n        var nodes = [];\n        var block = 0, level = 0;\n        do {\n            if (this.containers[block])\n                nodes.push.apply(nodes, __spreadArray([], __read(this.containers[block])));\n            var quad = pointIsInQuad(x, y, this.data[block + X_OFFSET], this.data[block + Y_OFFSET], this.data[block + WIDTH_OFFSET], this.data[block + HEIGHT_OFFSET]);\n            block = 4 * block + quad * BLOCKS;\n            level++;\n        } while (level <= MAX_LEVEL);\n        return nodes;\n    };\n    QuadTree.prototype.rectangle = function (x1, y1, x2, y2, height) {\n        var lr = this.lastRectangle;\n        if (lr && x1 === lr.x1 && x2 === lr.x2 && y1 === lr.y1 && y2 === lr.y2 && height === lr.height) {\n            return this.cache;\n        }\n        this.lastRectangle = {\n            x1: x1,\n            y1: y1,\n            x2: x2,\n            y2: y2,\n            height: height,\n        };\n        // If the rectangle is shifted, we use the smallest aligned rectangle that contains the shifted one:\n        if (!isRectangleAligned(this.lastRectangle))\n            this.lastRectangle = getCircumscribedAlignedRectangle(this.lastRectangle);\n        this.cache = getNodesInAxisAlignedRectangleArea(MAX_LEVEL, this.data, this.containers, x1, y1, Math.abs(x1 - x2) || Math.abs(y1 - y2), height);\n        return this.cache;\n    };\n    return QuadTree;\n}());\nexports.default = QuadTree;\n","/**\n * Extend function\n * ================\n *\n * Function used to push a bunch of values into an array at once.\n *\n * Its strategy is to mutate target array's length then setting the new indices\n * to be the values to add.\n *\n * A benchmark proved that it is faster than the following strategies:\n *   1) `array.push.apply(array, values)`.\n *   2) A loop of pushes.\n *   3) `array = array.concat(values)`, obviously.\n *\n * Intuitively, this is correct because when adding a lot of elements, the\n * chosen strategies does not need to handle the `arguments` object to\n * execute #.apply's variadicity and because the array know its final length\n * at the beginning, avoiding potential multiple reallocations of the underlying\n * contiguous array. Some engines may be able to optimize the loop of push\n * operations but empirically they don't seem to do so.\n */\n\n/**\n * Extends the target array with the given values.\n *\n * @param  {array} array  - Target array.\n * @param  {array} values - Values to add.\n */\nmodule.exports = function extend(array, values) {\n  var l2 = values.length;\n\n  if (l2 === 0)\n    return;\n\n  var l1 = array.length;\n\n  array.length += l2;\n\n  for (var i = 0; i < l2; i++)\n    array[l1 + i] = values[i];\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.edgeLabelsToDisplayFromNodes = exports.labelsToDisplayFromGrid = void 0;\nvar camera_1 = __importDefault(require(\"./camera\"));\n/**\n * Constants.\n */\n// Dimensions of a normal cell\nvar DEFAULT_CELL = {\n    width: 250,\n    height: 175,\n};\n// Dimensions of an unzoomed cell. This one is usually larger than the normal\n// one to account for the fact that labels will more likely collide.\nvar DEFAULT_UNZOOMED_CELL = {\n    width: 400,\n    height: 300,\n};\n/**\n * Helpers.\n */\nfunction collision(x1, y1, w1, h1, x2, y2, w2, h2) {\n    return x1 < x2 + w2 && x1 + w1 > x2 && y1 < y2 + h2 && y1 + h1 > y2;\n}\n// TODO: cache camera position of selected nodes to avoid costly computations\n// in anti-collision step\n// TOOD: document a little bit more so future people can understand this mess\n/**\n * Label grid heuristic selecting labels to display.\n *\n * @param  {object} params                 - Parameters:\n * @param  {object}   cache                - Cache storing nodes' data.\n * @param  {Camera}   camera               - The renderer's camera.\n * @param  {Set}      displayedLabels      - Currently displayed labels.\n * @param  {Array}    visibleNodes         - Nodes visible for this render.\n * @param  {Graph}    graph                - The rendered graph.\n * @return {Array}                         - The selected labels.\n */\nfunction labelsToDisplayFromGrid(params) {\n    var cache = params.cache, camera = params.camera, userCell = params.cell, dimensions = params.dimensions, displayedLabels = params.displayedLabels, _a = params.fontSize, fontSize = _a === void 0 ? 14 : _a, graph = params.graph, _b = params.renderedSizeThreshold, renderedSizeThreshold = _b === void 0 ? -Infinity : _b, visibleNodes = params.visibleNodes;\n    var cameraState = camera.getState(), previousCameraState = camera.getPreviousState();\n    var previousCamera = new camera_1.default();\n    previousCamera.setState(previousCameraState);\n    // TODO: should factorize. This same code is used quite a lot throughout the codebase\n    // TODO: POW RATIO is currently default 0.5 and harcoded\n    var sizeRatio = Math.pow(cameraState.ratio, 0.5);\n    // State\n    var zooming = cameraState.ratio < previousCameraState.ratio, panning = cameraState.x !== previousCameraState.x || cameraState.y !== previousCameraState.y, unzooming = cameraState.ratio > previousCameraState.ratio, unzoomedPanning = panning && !zooming && !unzooming && cameraState.ratio >= 1, zoomedPanning = panning && displayedLabels.size && !zooming && !unzooming;\n    // Trick to discretize unzooming\n    if (unzooming && Math.trunc(cameraState.ratio * 100) % 5 !== 0)\n        return Array.from(displayedLabels);\n    // If panning while unzoomed, we shouldn't change label selection\n    if (unzoomedPanning && displayedLabels.size !== 0)\n        return Array.from(displayedLabels);\n    // When unzoomed & zooming\n    if (zooming && cameraState.ratio >= 1)\n        return Array.from(displayedLabels);\n    // Adapting cell dimensions\n    var cell = userCell ? userCell : DEFAULT_CELL;\n    if (cameraState.ratio >= 1.3)\n        cell = DEFAULT_UNZOOMED_CELL;\n    var cwr = dimensions.width % cell.width;\n    var cellWidth = cell.width + cwr / Math.floor(dimensions.width / cell.width);\n    var chr = dimensions.height % cell.height;\n    var cellHeight = cell.height + chr / Math.floor(dimensions.height / cell.height);\n    var adjustedWidth = dimensions.width + cellWidth, adjustedHeight = dimensions.height + cellHeight, adjustedX = -cellWidth, adjustedY = -cellHeight;\n    var panningWidth = dimensions.width + cellWidth / 2, panningHeight = dimensions.height + cellHeight / 2, panningX = -(cellWidth / 2), panningY = -(cellHeight / 2);\n    var worthyLabels = [];\n    var grid = {};\n    var maxSize = -Infinity, biggestNode = null;\n    for (var i = 0, l = visibleNodes.length; i < l; i++) {\n        var node = visibleNodes[i], nodeData = cache[node];\n        // We filter hidden nodes\n        if (nodeData.hidden)\n            continue;\n        // We filter nodes having a rendered size less than a certain thresold\n        if (nodeData.size / sizeRatio < renderedSizeThreshold)\n            continue;\n        // Finding our node's cell in the grid\n        var pos = camera.framedGraphToViewport(dimensions, nodeData);\n        // Node is not actually visible on screen\n        // NOTE: can optimize margin on the right side (only if we know where the labels go)\n        if (pos.x < adjustedX || pos.x > adjustedWidth || pos.y < adjustedY || pos.y > adjustedHeight)\n            continue;\n        // Keeping track of the maximum node size for certain cases\n        if (nodeData.size > maxSize) {\n            maxSize = nodeData.size;\n            biggestNode = node;\n        }\n        // If panning when zoomed, we consider only displayed labels and newly\n        // visible nodes\n        if (zoomedPanning) {\n            var ppos = previousCamera.framedGraphToViewport(dimensions, nodeData);\n            // Was node visible earlier?\n            if (ppos.x >= panningX && ppos.x <= panningWidth && ppos.y >= panningY && ppos.y <= panningHeight) {\n                // Was the label displayed?\n                if (!displayedLabels.has(node))\n                    continue;\n            }\n        }\n        var xKey = Math.floor(pos.x / cellWidth), yKey = Math.floor(pos.y / cellHeight);\n        var key = xKey + \"\\u00A7\" + yKey;\n        if (typeof grid[key] === \"undefined\") {\n            // This cell is not yet occupied\n            grid[key] = node;\n        }\n        else {\n            // We must solve a conflict in this cell\n            var currentNode = grid[key], currentNodeData = cache[currentNode];\n            // We prefer already displayed labels\n            if (displayedLabels.size > 0) {\n                var n1 = displayedLabels.has(node), n2 = displayedLabels.has(currentNode);\n                if (!n1 && n2) {\n                    continue;\n                }\n                if (n1 && !n2) {\n                    grid[key] = node;\n                    continue;\n                }\n                if ((zoomedPanning || zooming) && n1 && n2) {\n                    worthyLabels.push(node);\n                    continue;\n                }\n            }\n            // In case of size & degree equality, we use the node's key so that the\n            // process remains deterministic\n            var won = false;\n            if (nodeData.size > currentNodeData.size) {\n                won = true;\n            }\n            else if (nodeData.size === currentNodeData.size) {\n                var nodeDegree = graph.degree(node), currentNodeDegree = graph.degree(currentNode);\n                if (nodeDegree > currentNodeDegree) {\n                    won = true;\n                }\n                else if (nodeDegree === currentNodeDegree) {\n                    if (node > currentNode)\n                        won = true;\n                }\n            }\n            if (won)\n                grid[key] = node;\n        }\n    }\n    // Compiling the labels\n    var biggestNodeShown = worthyLabels.some(function (node) { return node === biggestNode; });\n    for (var key in grid) {\n        var node = grid[key];\n        if (node === biggestNode)\n            biggestNodeShown = true;\n        worthyLabels.push(node);\n    }\n    // Always keeping biggest node shown on screen\n    if (!biggestNodeShown && biggestNode)\n        worthyLabels.push(biggestNode);\n    // Basic anti-collision\n    var collisions = new Set();\n    for (var i = 0, l = worthyLabels.length; i < l; i++) {\n        var n1 = worthyLabels[i], d1 = cache[n1], p1 = camera.framedGraphToViewport(dimensions, d1);\n        if (collisions.has(n1))\n            continue;\n        for (var j = i + 1; j < l; j++) {\n            var n2 = worthyLabels[j], d2 = cache[n2], p2 = camera.framedGraphToViewport(dimensions, d2);\n            var c = collision(\n            // First abstract bbox\n            p1.x, p1.y, d1.label.length * 8, fontSize, \n            // Second abstract bbox\n            p2.x, p2.y, d2.label.length * 8, fontSize);\n            if (c) {\n                // NOTE: add degree as tie-breaker here if required in the future\n                // NOTE: add final stable tie-breaker using node key if required\n                if (d1.size < d2.size)\n                    collisions.add(n1);\n                else\n                    collisions.add(n2);\n            }\n        }\n    }\n    // console.log(collisions)\n    return worthyLabels.filter(function (l) { return !collisions.has(l); });\n}\nexports.labelsToDisplayFromGrid = labelsToDisplayFromGrid;\n/**\n * Label heuristic selecting edge labels to display, based on displayed node\n * labels\n *\n * @param  {object} params                 - Parameters:\n * @param  {object}   nodeDataCache        - Cache storing nodes data.\n * @param  {object}   edgeDataCache        - Cache storing edges data.\n * @param  {Set}      displayedNodeLabels  - Currently displayed node labels.\n * @param  {Set}      highlightedNodes     - Highlighted nodes.\n * @param  {Graph}    graph                - The rendered graph.\n * @param  {string}   hoveredNode          - Hovered node (optional)\n * @return {Array}                         - The selected labels.\n */\nfunction edgeLabelsToDisplayFromNodes(params) {\n    var nodeDataCache = params.nodeDataCache, edgeDataCache = params.edgeDataCache, graph = params.graph, hoveredNode = params.hoveredNode, highlightedNodes = params.highlightedNodes, displayedNodeLabels = params.displayedNodeLabels;\n    var worthyEdges = new Set();\n    var displayedNodeLabelsArray = Array.from(displayedNodeLabels);\n    // Each edge connecting a highlighted node has its label displayed if the other extremity is not hidden:\n    var highlightedNodesArray = Array.from(highlightedNodes);\n    if (hoveredNode && !highlightedNodes.has(hoveredNode))\n        highlightedNodesArray.push(hoveredNode);\n    for (var i = 0; i < highlightedNodesArray.length; i++) {\n        var key = highlightedNodesArray[i];\n        var edges = graph.edges(key);\n        for (var j = 0; j < edges.length; j++) {\n            var edgeKey = edges[j];\n            var extremities = graph.extremities(edgeKey), sourceData = nodeDataCache[extremities[0]], targetData = nodeDataCache[extremities[1]], edgeData = edgeDataCache[edgeKey];\n            if (edgeData.hidden && sourceData.hidden && targetData.hidden) {\n                worthyEdges.add(edgeKey);\n            }\n        }\n    }\n    // Each edge connecting two nodes with visible labels has its label displayed:\n    for (var i = 0; i < displayedNodeLabelsArray.length; i++) {\n        var key = displayedNodeLabelsArray[i];\n        var edges = graph.outboundEdges(key);\n        for (var j = 0; j < edges.length; j++)\n            if (!edgeDataCache[edges[j]].hidden && displayedNodeLabels.has(graph.opposite(key, edges[j])))\n                worthyEdges.add(edges[j]);\n    }\n    return Array.from(worthyEdges);\n}\nexports.edgeLabelsToDisplayFromNodes = edgeLabelsToDisplayFromNodes;\n","\"use strict\";\n/**\n * Sigma.js Settings\n * =================================\n *\n * The list of settings and some handy functions.\n * @module\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_SETTINGS = exports.validateSettings = void 0;\nvar label_1 = __importDefault(require(\"./rendering/canvas/label\"));\nvar hover_1 = __importDefault(require(\"./rendering/canvas/hover\"));\nvar edge_label_1 = __importDefault(require(\"./rendering/canvas/edge-label\"));\nvar node_fast_1 = __importDefault(require(\"./rendering/webgl/programs/node.fast\"));\nvar edge_1 = __importDefault(require(\"./rendering/webgl/programs/edge\"));\nvar edge_arrow_1 = __importDefault(require(\"./rendering/webgl/programs/edge.arrow\"));\nfunction validateSettings(settings) {\n    // Label grid cell\n    if (settings.labelGrid &&\n        settings.labelGrid.cell &&\n        typeof settings.labelGrid.cell === \"object\" &&\n        (!settings.labelGrid.cell.width || !settings.labelGrid.cell.height)) {\n        throw new Error(\"Settings: invalid `labelGrid.cell`. Expecting {width, height}.\");\n    }\n}\nexports.validateSettings = validateSettings;\nexports.DEFAULT_SETTINGS = {\n    // Performance\n    hideEdgesOnMove: false,\n    hideLabelsOnMove: false,\n    renderLabels: true,\n    renderEdgeLabels: false,\n    // Component rendering\n    defaultNodeColor: \"#999\",\n    defaultNodeType: \"circle\",\n    defaultEdgeColor: \"#ccc\",\n    defaultEdgeType: \"line\",\n    labelFont: \"Arial\",\n    labelSize: 14,\n    labelWeight: \"normal\",\n    edgeLabelFont: \"Arial\",\n    edgeLabelSize: 14,\n    edgeLabelWeight: \"normal\",\n    // Labels\n    labelGrid: {\n        cell: null,\n        renderedSizeThreshold: -Infinity,\n    },\n    // Reducers\n    nodeReducer: null,\n    edgeReducer: null,\n    // Features\n    zIndex: false,\n    // Renderers\n    labelRenderer: label_1.default,\n    hoverRenderer: hover_1.default,\n    edgeLabelRenderer: edge_label_1.default,\n    // Program classes\n    nodeProgramClasses: {\n        circle: node_fast_1.default,\n    },\n    edgeProgramClasses: {\n        arrow: edge_arrow_1.default,\n        line: edge_1.default,\n    },\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction drawLabel(context, data, settings) {\n    var size = settings.labelSize, font = settings.labelFont, weight = settings.labelWeight;\n    context.fillStyle = \"#000\";\n    context.font = weight + \" \" + size + \"px \" + font;\n    context.fillText(data.label, data.x + data.size + 3, data.y + size / 3);\n}\nexports.default = drawLabel;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar node_1 = __importDefault(require(\"./node\"));\nvar label_1 = __importDefault(require(\"./label\"));\nfunction drawHover(context, data, settings) {\n    var size = settings.labelSize, font = settings.labelFont, weight = settings.labelWeight;\n    context.font = weight + \" \" + size + \"px \" + font;\n    // Then we draw the label background\n    context.beginPath();\n    context.fillStyle = \"#fff\";\n    context.shadowOffsetX = 0;\n    context.shadowOffsetY = 0;\n    context.shadowBlur = 8;\n    context.shadowColor = \"#000\";\n    var textWidth = context.measureText(data.label).width;\n    var x = Math.round(data.x - size / 2 - 2), y = Math.round(data.y - size / 2 - 2), w = Math.round(textWidth + size / 2 + data.size + 9), h = Math.round(size + 4), e = Math.round(size / 2 + 2);\n    context.moveTo(x, y + e);\n    context.moveTo(x, y + e);\n    context.arcTo(x, y, x + e, y, e);\n    context.lineTo(x + w, y);\n    context.lineTo(x + w, y + h);\n    context.lineTo(x + e, y + h);\n    context.arcTo(x, y + h, x, y + h - e, e);\n    context.lineTo(x, y + e);\n    context.closePath();\n    context.fill();\n    context.shadowOffsetX = 0;\n    context.shadowOffsetY = 0;\n    context.shadowBlur = 0;\n    // Then we need to draw the node\n    node_1.default(context, data);\n    // And finally we draw the label\n    label_1.default(context, data, settings);\n}\nexports.default = drawHover;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PI_TIMES_2 = Math.PI * 2;\nfunction drawNode(context, data) {\n    context.fillStyle = data.color;\n    context.beginPath();\n    context.arc(data.x, data.y, data.size, 0, PI_TIMES_2, true);\n    context.closePath();\n    context.fill();\n}\nexports.default = drawNode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction drawEdgeLabel(context, edgeData, sourceData, targetData, settings) {\n    var size = settings.edgeLabelSize, font = settings.edgeLabelFont, weight = settings.edgeLabelWeight, label = edgeData.label;\n    context.fillStyle = edgeData.color;\n    context.font = weight + \" \" + size + \"px \" + font;\n    var textWidth = context.measureText(label).width;\n    var cx = (sourceData.x + targetData.x) / 2;\n    var cy = (sourceData.y + targetData.y) / 2;\n    var dx = targetData.x - sourceData.x;\n    var dy = targetData.y - sourceData.y;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    var angle;\n    if (dx > 0) {\n        if (dy > 0)\n            angle = Math.acos(dx / d);\n        else\n            angle = Math.asin(dy / d);\n    }\n    else {\n        if (dy > 0)\n            angle = Math.acos(dx / d) + Math.PI;\n        else\n            angle = Math.asin(dx / d) + Math.PI / 2;\n    }\n    context.save();\n    context.translate(cx, cy);\n    context.rotate(angle);\n    context.fillText(label, -textWidth / 2, edgeData.size / 2 + size);\n    context.restore();\n}\nexports.default = drawEdgeLabel;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../../../utils\");\nvar node_fast_vert_glsl_1 = __importDefault(require(\"../shaders/node.fast.vert.glsl.js\"));\nvar node_fast_frag_glsl_1 = __importDefault(require(\"../shaders/node.fast.frag.glsl.js\"));\nvar node_1 = require(\"./common/node\");\nvar POINTS = 1, ATTRIBUTES = 4;\nvar NodeProgramFast = /** @class */ (function (_super) {\n    __extends(NodeProgramFast, _super);\n    function NodeProgramFast(gl) {\n        var _this = _super.call(this, gl, node_fast_vert_glsl_1.default, node_fast_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        _this.bind();\n        return _this;\n    }\n    NodeProgramFast.prototype.process = function (data, hidden, offset) {\n        var array = this.array;\n        var i = offset * POINTS * ATTRIBUTES;\n        if (hidden) {\n            array[i++] = 0;\n            array[i++] = 0;\n            array[i++] = 0;\n            array[i++] = 0;\n            return;\n        }\n        var color = utils_1.floatColor(data.color);\n        array[i++] = data.x;\n        array[i++] = data.y;\n        array[i++] = data.size;\n        array[i] = color;\n    };\n    NodeProgramFast.prototype.render = function (params) {\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        gl.uniform1f(this.ratioLocation, 1 / Math.pow(params.ratio, params.nodesPowRatio));\n        gl.uniform1f(this.scaleLocation, params.scalingRatio);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.drawArrays(gl.POINTS, 0, this.array.length / ATTRIBUTES);\n    };\n    return NodeProgramFast;\n}(node_1.AbstractNodeProgram));\nexports.default = NodeProgramFast;\n","(()=>{\"use strict\";var o={d:(t,n)=>{for(var e in n)o.o(n,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(o,\"__esModule\",{value:!0})}},t={};o.r(t),o.d(t,{default:()=>n});const n=\"attribute vec2 a_position;\\nattribute float a_size;\\nattribute vec4 a_color;\\n\\nuniform float u_ratio;\\nuniform float u_scale;\\nuniform mat3 u_matrix;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n\\n  gl_Position = vec4(\\n    (u_matrix * vec3(a_position, 1)).xy,\\n    0,\\n    1\\n  );\\n\\n  // Multiply the point size twice:\\n  //  - x SCALING_RATIO to correct the canvas scaling\\n  //  - x 2 to correct the formulae\\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\\n\\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=t})();","(()=>{\"use strict\";var o={d:(e,n)=>{for(var r in n)o.o(n,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(o,e)=>Object.prototype.hasOwnProperty.call(o,e),r:o=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(o,\"__esModule\",{value:!0})}},e={};o.r(e),o.d(e,{default:()=>n});const n=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float radius = 0.5;\\n\\nvoid main(void) {\\n  vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\\n  float dist = radius - length(m);\\n\\n  float t = 0.0;\\n  if (dist > v_border)\\n    t = 1.0;\\n  else if (dist > 0.0)\\n    t = dist / v_border;\\n\\n  gl_FragColor = mix(color0, v_color, t);\\n}\\n\";module.exports=e})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createNodeCompoundProgram = exports.AbstractNodeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Node Program\n * =====================================\n *\n * @module\n */\nvar program_1 = require(\"./program\");\n/**\n * Node Program class.\n *\n * @constructor\n */\nvar AbstractNodeProgram = /** @class */ (function (_super) {\n    __extends(AbstractNodeProgram, _super);\n    function AbstractNodeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        var _this = _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.sizeLocation = gl.getAttribLocation(_this.program, \"a_size\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        // Uniform Location\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var ratioLocation = gl.getUniformLocation(_this.program, \"u_ratio\");\n        if (ratioLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting ratioLocation\");\n        _this.ratioLocation = ratioLocation;\n        var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n        if (scaleLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting scaleLocation\");\n        _this.scaleLocation = scaleLocation;\n        return _this;\n    }\n    AbstractNodeProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.sizeLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.sizeLocation, 1, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, this.attributes * Float32Array.BYTES_PER_ELEMENT, 12);\n    };\n    return AbstractNodeProgram;\n}(program_1.AbstractProgram));\nexports.AbstractNodeProgram = AbstractNodeProgram;\n/**\n * Helper function combining two or more programs into a single compound one.\n * Note that this is more a quick & easy way to combine program than a really\n * performant option. More performant programs can be written entirely.\n *\n * @param  {array}    programClasses - Program classes to combine.\n * @return {function}\n */\nfunction createNodeCompoundProgram(programClasses) {\n    return /** @class */ (function () {\n        function NodeCompoundProgram(gl) {\n            this.programs = programClasses.map(function (ProgramClass) { return new ProgramClass(gl); });\n        }\n        NodeCompoundProgram.prototype.bufferData = function () {\n            this.programs.forEach(function (program) { return program.bufferData(); });\n        };\n        NodeCompoundProgram.prototype.allocate = function (capacity) {\n            this.programs.forEach(function (program) { return program.allocate(capacity); });\n        };\n        NodeCompoundProgram.prototype.bind = function () {\n            // nothing todo, it's already done in each program constructor\n        };\n        NodeCompoundProgram.prototype.render = function (params) {\n            this.programs.forEach(function (program) { return program.render(params); });\n        };\n        NodeCompoundProgram.prototype.process = function (data, hidden, offset) {\n            this.programs.forEach(function (program) { return program.process(data, hidden, offset); });\n        };\n        return NodeCompoundProgram;\n    }());\n}\nexports.createNodeCompoundProgram = createNodeCompoundProgram;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractProgram = void 0;\n/**\n * Sigma.js WebGL Renderer Program\n * ================================\n *\n * Class representing a single WebGL program used by sigma's WebGL renderer.\n * @module\n */\nvar utils_1 = require(\"../../shaders/utils\");\n/**\n * Abstract Program class.\n *\n * @constructor\n */\nvar AbstractProgram = /** @class */ (function () {\n    function AbstractProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        this.array = new Float32Array();\n        this.points = points;\n        this.attributes = attributes;\n        this.gl = gl;\n        this.vertexShaderSource = vertexShaderSource;\n        this.fragmentShaderSource = fragmentShaderSource;\n        var buffer = gl.createBuffer();\n        if (buffer === null)\n            throw new Error(\"AbstractProgram: error while creating the buffer\");\n        this.buffer = buffer;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        this.vertexShader = utils_1.loadVertexShader(gl, this.vertexShaderSource);\n        this.fragmentShader = utils_1.loadFragmentShader(gl, this.fragmentShaderSource);\n        this.program = utils_1.loadProgram(gl, [this.vertexShader, this.fragmentShader]);\n    }\n    AbstractProgram.prototype.bufferData = function () {\n        var gl = this.gl;\n        gl.bufferData(gl.ARRAY_BUFFER, this.array, gl.DYNAMIC_DRAW);\n    };\n    AbstractProgram.prototype.allocate = function (capacity) {\n        this.array = new Float32Array(this.points * this.attributes * capacity);\n    };\n    return AbstractProgram;\n}());\nexports.AbstractProgram = AbstractProgram;\n","\"use strict\";\n/**\n * Sigma.js Shader Utils\n * ======================\n *\n * Code used to load sigma's shaders.\n * @module\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.loadProgram = exports.loadFragmentShader = exports.loadVertexShader = void 0;\n/**\n * Function used to load a shader.\n */\nfunction loadShader(type, gl, source) {\n    var glType = type === \"VERTEX\" ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER;\n    // Creating the shader\n    var shader = gl.createShader(glType);\n    if (shader === null) {\n        throw new Error(\"loadShader: error while creating the shader\");\n    }\n    // Loading source\n    gl.shaderSource(shader, source);\n    // Compiling the shader\n    gl.compileShader(shader);\n    // Retrieving compilation status\n    var successfullyCompiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    // Throwing if something went awry\n    if (!successfullyCompiled) {\n        var infoLog = gl.getShaderInfoLog(shader);\n        gl.deleteShader(shader);\n        throw new Error(\"loadShader: error while compiling the shader:\\n\" + infoLog + \"\\n\" + source);\n    }\n    return shader;\n}\nfunction loadVertexShader(gl, source) {\n    return loadShader(\"VERTEX\", gl, source);\n}\nexports.loadVertexShader = loadVertexShader;\nfunction loadFragmentShader(gl, source) {\n    return loadShader(\"FRAGMENT\", gl, source);\n}\nexports.loadFragmentShader = loadFragmentShader;\n/**\n * Function used to load a program.\n */\nfunction loadProgram(gl, shaders) {\n    var program = gl.createProgram();\n    if (program === null) {\n        throw new Error(\"loadProgram: error while creating the program.\");\n    }\n    var i, l;\n    // Attaching the shaders\n    for (i = 0, l = shaders.length; i < l; i++)\n        gl.attachShader(program, shaders[i]);\n    gl.linkProgram(program);\n    // Checking status\n    var successfullyLinked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!successfullyLinked) {\n        gl.deleteProgram(program);\n        throw new Error(\"loadProgram: error while linking the program.\");\n    }\n    return program;\n}\nexports.loadProgram = loadProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js WebGL Renderer Edge Program\n * =====================================\n *\n * Program rendering edges as thick lines using four points translated\n * orthogonally from the source & target's centers by half thickness.\n *\n * Rendering two triangles by using only four points is made possible through\n * the use of indices.\n *\n * This method should be faster than the 6 points / 2 triangles approach and\n * should handle thickness better than with gl.LINES.\n *\n * This version of the shader balances geometry computation evenly between\n * the CPU & GPU (normals are computed on the CPU side).\n * @module\n */\nvar utils_1 = require(\"../../../utils\");\nvar edge_vert_glsl_1 = __importDefault(require(\"../shaders/edge.vert.glsl.js\"));\nvar edge_frag_glsl_1 = __importDefault(require(\"../shaders/edge.frag.glsl.js\"));\nvar edge_1 = require(\"./common/edge\");\nvar POINTS = 4, ATTRIBUTES = 6, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeProgram = /** @class */ (function (_super) {\n    __extends(EdgeProgram, _super);\n    function EdgeProgram(gl) {\n        var _this = _super.call(this, gl, edge_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Initializing indices buffer\n        var indicesBuffer = gl.createBuffer();\n        if (indicesBuffer === null)\n            throw new Error(\"EdgeProgram: error while getting resolutionLocation\");\n        _this.indicesBuffer = indicesBuffer;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.thicknessLocation = gl.getAttribLocation(_this.program, \"a_thickness\");\n        // Uniform locations\n        var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n        if (scaleLocation === null)\n            throw new Error(\"EdgeProgram: error while getting scaleLocation\");\n        _this.scaleLocation = scaleLocation;\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var cameraRatioLocation = gl.getUniformLocation(_this.program, \"u_cameraRatio\");\n        if (cameraRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting cameraRatioLocation\");\n        _this.cameraRatioLocation = cameraRatioLocation;\n        var viewportRatioLocation = gl.getUniformLocation(_this.program, \"u_viewportRatio\");\n        if (viewportRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting viewportRatioLocation\");\n        _this.viewportRatioLocation = viewportRatioLocation;\n        var thicknessRatioLocation = gl.getUniformLocation(_this.program, \"u_thicknessRatio\");\n        if (thicknessRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting thicknessRatioLocation\");\n        _this.thicknessRatioLocation = thicknessRatioLocation;\n        // Enabling the OES_element_index_uint extension\n        // NOTE: on older GPUs, this means that really large graphs won't\n        // have all their edges rendered. But it seems that the\n        // `OES_element_index_uint` is quite everywhere so we'll handle\n        // the potential issue if it really arises.\n        // NOTE: when using webgl2, the extension is enabled by default\n        _this.canUse32BitsIndices = utils_1.canUse32BitsIndices(gl);\n        _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n        _this.indicesArray = new _this.IndicesArray();\n        _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n        _this.bind();\n        return _this;\n    }\n    EdgeProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.thicknessLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.thicknessLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n    };\n    EdgeProgram.prototype.computeIndices = function () {\n        var l = this.array.length / ATTRIBUTES;\n        var size = l + l / 2;\n        var indices = new this.IndicesArray(size);\n        for (var i = 0, c = 0; i < l; i += 4) {\n            indices[c++] = i;\n            indices[c++] = i + 1;\n            indices[c++] = i + 2;\n            indices[c++] = i + 2;\n            indices[c++] = i + 1;\n            indices[c++] = i + 3;\n        }\n        this.indicesArray = indices;\n    };\n    EdgeProgram.prototype.bufferData = function () {\n        _super.prototype.bufferData.call(this);\n        // Indices data\n        var gl = this.gl;\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n    };\n    EdgeProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, color = utils_1.floatColor(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len;\n            n2 = dx * len;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        // First point flipped\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        // Second point flipped\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i] = color;\n    };\n    EdgeProgram.prototype.render = function (params) {\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniform1f(this.scaleLocation, params.scalingRatio);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.cameraRatioLocation, params.ratio);\n        gl.uniform1f(this.viewportRatioLocation, 1 / Math.min(params.width, params.height));\n        gl.uniform1f(this.thicknessRatioLocation, 1 / Math.pow(params.ratio, params.edgesPowRatio));\n        // Drawing:\n        gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n    };\n    return EdgeProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeProgram;\n","(()=>{\"use strict\";var n={d:(t,o)=>{for(var e in o)n.o(o,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})},o:(n,t)=>Object.prototype.hasOwnProperty.call(n,t),r:n=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>o});const o=\"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute float a_thickness;\\nattribute vec4 a_color;\\n\\nuniform mat3 u_matrix;\\nuniform float u_scale;\\nuniform float u_cameraRatio;\\nuniform float u_viewportRatio;\\nuniform float u_thicknessRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 0.8;\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n\\n  // Computing thickness in screen space:\\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\\n  thickness = max(thickness, minThickness * u_viewportRatio);\\n\\n  // Add normal vector to the position in screen space, but correct thickness first:\\n  vec2 position = (u_matrix * vec3(a_position + a_normal * thickness * u_cameraRatio, 1)).xy;\\n\\n  gl_Position = vec4(position, 0, 1);\\n\\n  v_normal = a_normal;\\n  v_thickness = thickness;\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=t})();","(()=>{\"use strict\";var e={d:(n,o)=>{for(var t in o)e.o(o,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:o[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>o});const o=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float feather = 0.001;\\nconst vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  float dist = length(v_normal) * v_thickness;\\n\\n  float t = smoothstep(\\n    v_thickness - feather,\\n    v_thickness,\\n    dist\\n  );\\n\\n  gl_FragColor = mix(v_color, color0, t);\\n}\\n\";module.exports=n})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createEdgeCompoundProgram = exports.AbstractEdgeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Edge Program\n * =====================================\n *\n * @module\n */\nvar program_1 = require(\"./program\");\n/**\n * Edge Program class.\n *\n * @constructor\n */\nvar AbstractEdgeProgram = /** @class */ (function (_super) {\n    __extends(AbstractEdgeProgram, _super);\n    function AbstractEdgeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        return _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n    }\n    return AbstractEdgeProgram;\n}(program_1.AbstractProgram));\nexports.AbstractEdgeProgram = AbstractEdgeProgram;\nfunction createEdgeCompoundProgram(programClasses) {\n    return /** @class */ (function () {\n        function EdgeCompoundProgram(gl) {\n            this.programs = programClasses.map(function (ProgramClass) { return new ProgramClass(gl); });\n        }\n        EdgeCompoundProgram.prototype.bufferData = function () {\n            this.programs.forEach(function (program) { return program.bufferData(); });\n        };\n        EdgeCompoundProgram.prototype.allocate = function (capacity) {\n            this.programs.forEach(function (program) { return program.allocate(capacity); });\n        };\n        EdgeCompoundProgram.prototype.bind = function () {\n            // nothing todo, it's already done in each program constructor\n        };\n        EdgeCompoundProgram.prototype.computeIndices = function () {\n            this.programs.forEach(function (program) { return program.computeIndices(); });\n        };\n        EdgeCompoundProgram.prototype.render = function (params) {\n            this.programs.forEach(function (program) {\n                program.bind();\n                program.bufferData();\n                program.render(params);\n            });\n        };\n        EdgeCompoundProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n            this.programs.forEach(function (program) { return program.process(sourceData, targetData, data, hidden, offset); });\n        };\n        return EdgeCompoundProgram;\n    }());\n}\nexports.createEdgeCompoundProgram = createEdgeCompoundProgram;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js WebGL Renderer Edge Arrow Program\n * ===========================================\n *\n * Compound program rendering edges as an arrow from the source to the target.\n * @module\n */\nvar edge_1 = require(\"./common/edge\");\nvar edge_arrowHead_1 = __importDefault(require(\"./edge.arrowHead\"));\nvar edge_clamped_1 = __importDefault(require(\"./edge.clamped\"));\nvar program = edge_1.createEdgeCompoundProgram([edge_clamped_1.default, edge_arrowHead_1.default]);\nexports.default = program;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../../../utils\");\nvar edge_arrowHead_vert_glsl_1 = __importDefault(require(\"../shaders/edge.arrowHead.vert.glsl.js\"));\nvar edge_arrowHead_frag_glsl_1 = __importDefault(require(\"../shaders/edge.arrowHead.frag.glsl.js\"));\nvar edge_1 = require(\"./common/edge\");\nvar POINTS = 3, ATTRIBUTES = 10, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeArrowHeadProgram = /** @class */ (function (_super) {\n    __extends(EdgeArrowHeadProgram, _super);\n    function EdgeArrowHeadProgram(gl) {\n        var _this = _super.call(this, gl, edge_arrowHead_vert_glsl_1.default, edge_arrowHead_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.thicknessLocation = gl.getAttribLocation(_this.program, \"a_thickness\");\n        _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n        _this.barycentricLocation = gl.getAttribLocation(_this.program, \"a_barycentric\");\n        // Uniform locations\n        var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n        if (scaleLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting scaleLocation\");\n        _this.scaleLocation = scaleLocation;\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var cameraRatioLocation = gl.getUniformLocation(_this.program, \"u_cameraRatio\");\n        if (cameraRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting cameraRatioLocation\");\n        _this.cameraRatioLocation = cameraRatioLocation;\n        var viewportRatioLocation = gl.getUniformLocation(_this.program, \"u_viewportRatio\");\n        if (viewportRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting viewportRatioLocation\");\n        _this.viewportRatioLocation = viewportRatioLocation;\n        var thicknessRatioLocation = gl.getUniformLocation(_this.program, \"u_thicknessRatio\");\n        if (thicknessRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting thicknessRatioLocation\");\n        _this.thicknessRatioLocation = thicknessRatioLocation;\n        _this.bind();\n        return _this;\n    }\n    EdgeArrowHeadProgram.prototype.bind = function () {\n        var gl = this.gl;\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.thicknessLocation);\n        gl.enableVertexAttribArray(this.radiusLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.enableVertexAttribArray(this.barycentricLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.thicknessLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 24);\n        // TODO: maybe we can optimize here by packing this in a bit mask\n        gl.vertexAttribPointer(this.barycentricLocation, 3, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 28);\n    };\n    EdgeArrowHeadProgram.prototype.computeIndices = function () {\n        // nothing to do\n    };\n    EdgeArrowHeadProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, radius = targetData.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, color = utils_1.floatColor(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len;\n            n2 = dx * len;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 1;\n        array[i++] = 0;\n        array[i++] = 0;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 0;\n        array[i++] = 1;\n        array[i++] = 0;\n        // Third point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 0;\n        array[i++] = 0;\n        array[i] = 1;\n    };\n    EdgeArrowHeadProgram.prototype.render = function (params) {\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniform1f(this.scaleLocation, params.scalingRatio);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.cameraRatioLocation, params.ratio);\n        gl.uniform1f(this.viewportRatioLocation, 1 / Math.min(params.width, params.height));\n        gl.uniform1f(this.thicknessRatioLocation, 1 / Math.pow(params.ratio, params.edgesPowRatio));\n        // Drawing:\n        gl.drawArrays(gl.TRIANGLES, 0, this.array.length / ATTRIBUTES);\n    };\n    return EdgeArrowHeadProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeArrowHeadProgram;\n","(()=>{\"use strict\";var a={d:(n,t)=>{for(var o in t)a.o(t,o)&&!a.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(a,n)=>Object.prototype.hasOwnProperty.call(a,n),r:a=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(a,\"__esModule\",{value:!0})}},n={};a.r(n),a.d(n,{default:()=>t});const t=\"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute float a_thickness;\\nattribute float a_radius;\\nattribute vec4 a_color;\\nattribute vec3 a_barycentric;\\n\\nuniform mat3 u_matrix;\\nuniform float u_scale;\\nuniform float u_cameraRatio;\\nuniform float u_viewportRatio;\\nuniform float u_thicknessRatio;\\n\\nvarying vec4 v_color;\\n\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\nconst float arrowHeadWidthLengthRatio = 0.66;\\nconst float minThickness = 0.8;\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n\\n  // Computing thickness in screen space:\\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\\n  thickness = max(thickness, minThickness * u_viewportRatio);\\n\\n  float nodeRadius = a_radius * u_thicknessRatio * u_viewportRatio * u_cameraRatio;\\n  float arrowHeadLength = thickness * 2.0 * arrowHeadLengthThicknessRatio * u_cameraRatio;\\n  float arrowHeadHalfWidth = arrowHeadWidthLengthRatio * arrowHeadLength / 2.0;\\n\\n  float da = a_barycentric.x;\\n  float db = a_barycentric.y;\\n  float dc = a_barycentric.z;\\n\\n  vec2 delta = vec2(\\n      da * ((nodeRadius) * a_normal.y)\\n    + db * ((nodeRadius + arrowHeadLength) * a_normal.y + arrowHeadHalfWidth * a_normal.x)\\n    + dc * ((nodeRadius + arrowHeadLength) * a_normal.y - arrowHeadHalfWidth * a_normal.x),\\n\\n      da * (-(nodeRadius) * a_normal.x)\\n    + db * (-(nodeRadius + arrowHeadLength) * a_normal.x + arrowHeadHalfWidth * a_normal.y)\\n    + dc * (-(nodeRadius + arrowHeadLength) * a_normal.x - arrowHeadHalfWidth * a_normal.y)\\n  );\\n\\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\\n\\n  gl_Position = vec4(position, 0, 1);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=n})();","(()=>{\"use strict\";var e={d:(o,r)=>{for(var t in r)e.o(r,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:r[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>r});const r=\"precision mediump float;\\n\\nvarying vec4 v_color;\\n\\nvoid main(void) {\\n  gl_FragColor = v_color;\\n}\\n\";module.exports=o})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar edge_1 = require(\"./common/edge\");\nvar utils_1 = require(\"../../../utils\");\nvar edge_clamped_vert_glsl_1 = __importDefault(require(\"../shaders/edge.clamped.vert.glsl.js\"));\nvar edge_frag_glsl_1 = __importDefault(require(\"../shaders/edge.frag.glsl.js\"));\nvar POINTS = 4, ATTRIBUTES = 7, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeClampedProgram = /** @class */ (function (_super) {\n    __extends(EdgeClampedProgram, _super);\n    function EdgeClampedProgram(gl) {\n        var _this = _super.call(this, gl, edge_clamped_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Initializing indices buffer\n        var indicesBuffer = gl.createBuffer();\n        if (indicesBuffer === null)\n            throw new Error(\"EdgeClampedProgram: error while getting resolutionLocation\");\n        _this.indicesBuffer = indicesBuffer;\n        // Locations:\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.thicknessLocation = gl.getAttribLocation(_this.program, \"a_thickness\");\n        _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n        // Uniform locations\n        var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n        if (scaleLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting scaleLocation\");\n        _this.scaleLocation = scaleLocation;\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var cameraRatioLocation = gl.getUniformLocation(_this.program, \"u_cameraRatio\");\n        if (cameraRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting cameraRatioLocation\");\n        _this.cameraRatioLocation = cameraRatioLocation;\n        var viewportRatioLocation = gl.getUniformLocation(_this.program, \"u_viewportRatio\");\n        if (viewportRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting viewportRatioLocation\");\n        _this.viewportRatioLocation = viewportRatioLocation;\n        var thicknessRatioLocation = gl.getUniformLocation(_this.program, \"u_thicknessRatio\");\n        if (thicknessRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting thicknessRatioLocation\");\n        _this.thicknessRatioLocation = thicknessRatioLocation;\n        // Enabling the OES_element_index_uint extension\n        // NOTE: on older GPUs, this means that really large graphs won't\n        // have all their edges rendered. But it seems that the\n        // `OES_element_index_uint` is quite everywhere so we'll handle\n        // the potential issue if it really arises.\n        // NOTE: when using webgl2, the extension is enabled by default\n        _this.canUse32BitsIndices = utils_1.canUse32BitsIndices(gl);\n        _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n        _this.indicesArray = new _this.IndicesArray();\n        _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n        _this.bind();\n        return _this;\n    }\n    EdgeClampedProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.thicknessLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.enableVertexAttribArray(this.radiusLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.thicknessLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n        gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 24);\n    };\n    EdgeClampedProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, radius = targetData.size || 1, color = utils_1.floatColor(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len;\n            n2 = dx * len;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        array[i++] = 0;\n        // First point flipped\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        array[i++] = 0;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        array[i++] = radius;\n        // Second point flipped\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        array[i] = -radius;\n    };\n    EdgeClampedProgram.prototype.computeIndices = function () {\n        var l = this.array.length / ATTRIBUTES;\n        var size = l + l / 2;\n        var indices = new this.IndicesArray(size);\n        for (var i = 0, c = 0; i < l; i += 4) {\n            indices[c++] = i;\n            indices[c++] = i + 1;\n            indices[c++] = i + 2;\n            indices[c++] = i + 2;\n            indices[c++] = i + 1;\n            indices[c++] = i + 3;\n        }\n        this.indicesArray = indices;\n    };\n    EdgeClampedProgram.prototype.bufferData = function () {\n        _super.prototype.bufferData.call(this);\n        // Indices data\n        var gl = this.gl;\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n    };\n    EdgeClampedProgram.prototype.render = function (params) {\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniform1f(this.scaleLocation, params.scalingRatio);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.cameraRatioLocation, params.ratio);\n        gl.uniform1f(this.viewportRatioLocation, 1 / Math.min(params.width, params.height));\n        gl.uniform1f(this.thicknessRatioLocation, 1 / Math.pow(params.ratio, params.edgesPowRatio));\n        // Drawing:\n        gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n    };\n    return EdgeClampedProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeClampedProgram;\n","(()=>{\"use strict\";var n={d:(t,o)=>{for(var e in o)n.o(o,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})},o:(n,t)=>Object.prototype.hasOwnProperty.call(n,t),r:n=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>o});const o=\"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute float a_thickness;\\nattribute vec4 a_color;\\nattribute float a_radius;\\n\\nuniform mat3 u_matrix;\\nuniform float u_scale;\\nuniform float u_cameraRatio;\\nuniform float u_viewportRatio;\\nuniform float u_thicknessRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\nconst float minThickness = 0.8;\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n\\n  // Computing thickness in screen space:\\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\\n  thickness = max(thickness, minThickness * u_viewportRatio);\\n\\n  float direction = sign(a_radius);\\n  float nodeRadius = direction * a_radius * u_thicknessRatio * u_viewportRatio;\\n  float arrowHeadLength = thickness * 2.0 * arrowHeadLengthThicknessRatio;\\n\\n  vec2 arrowHeadVector = vec2(-direction * a_normal.y, direction * a_normal.x);\\n\\n  // Add normal vector to the position in screen space, but correct thickness first:\\n  vec2 position = a_position + a_normal * thickness * u_cameraRatio;\\n  // Add vector that corrects the arrow head length:\\n  position = position + arrowHeadVector * (arrowHeadLength + nodeRadius) * u_cameraRatio;\\n  // Apply camera\\n  position = (u_matrix * vec3(position, 1)).xy;\\n\\n  gl_Position = vec4(position, 0, 1);\\n\\n  v_normal = a_normal;\\n  v_thickness = thickness;\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=t})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar captor_1 = __importStar(require(\"./captor\"));\nvar camera_1 = __importDefault(require(\"../camera\"));\nvar DRAG_TIMEOUT = 200;\nvar TOUCH_INERTIA_RATIO = 3;\nvar TOUCH_INERTIA_DURATION = 200;\n/**\n * Touch captor class.\n *\n * @constructor\n */\nvar TouchCaptor = /** @class */ (function (_super) {\n    __extends(TouchCaptor, _super);\n    function TouchCaptor(container, camera) {\n        var _this = _super.call(this, container, camera) || this;\n        _this.enabled = true;\n        _this.isMoving = false;\n        _this.touchMode = 0; // number of touches down\n        // Binding methods:\n        _this.handleStart = _this.handleStart.bind(_this);\n        _this.handleLeave = _this.handleLeave.bind(_this);\n        _this.handleMove = _this.handleMove.bind(_this);\n        // Binding events\n        container.addEventListener(\"touchstart\", _this.handleStart, false);\n        container.addEventListener(\"touchend\", _this.handleLeave, false);\n        container.addEventListener(\"touchcancel\", _this.handleLeave, false);\n        container.addEventListener(\"touchmove\", _this.handleMove, false);\n        return _this;\n    }\n    TouchCaptor.prototype.kill = function () {\n        var container = this.container;\n        container.removeEventListener(\"touchstart\", this.handleStart);\n        container.removeEventListener(\"touchend\", this.handleLeave);\n        container.removeEventListener(\"touchcancel\", this.handleLeave);\n        container.removeEventListener(\"touchmove\", this.handleMove);\n    };\n    TouchCaptor.prototype.getDimensions = function () {\n        return {\n            width: this.container.offsetWidth,\n            height: this.container.offsetHeight,\n        };\n    };\n    TouchCaptor.prototype.dispatchRelatedMouseEvent = function (type, e, position, emitter) {\n        var mousePosition = position || captor_1.getPosition(e.touches[0]);\n        var mouseEvent = new MouseEvent(type, {\n            clientX: mousePosition.x,\n            clientY: mousePosition.y,\n            altKey: e.altKey,\n            ctrlKey: e.ctrlKey,\n        });\n        (emitter || this.container).dispatchEvent(mouseEvent);\n    };\n    TouchCaptor.prototype.handleStart = function (e) {\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousedown\", e);\n        var touches = captor_1.getTouchesArray(e.touches);\n        this.isMoving = true;\n        this.touchMode = touches.length;\n        this.startCameraState = this.camera.getState();\n        this.startTouchesPositions = touches.map(captor_1.getPosition);\n        this.lastTouchesPositions = this.startTouchesPositions;\n        // When there are two touches down, let's record distance and angle as well:\n        if (this.touchMode === 2) {\n            var _a = __read(this.startTouchesPositions, 2), _b = _a[0], x0 = _b.x, y0 = _b.y, _c = _a[1], x1 = _c.x, y1 = _c.y;\n            this.startTouchesAngle = Math.atan2(y1 - y0, x1 - x0);\n            this.startTouchesDistance = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\n        }\n        this.emit(\"touchdown\", captor_1.getTouchCoords(e));\n    };\n    TouchCaptor.prototype.handleLeave = function (e) {\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 0 && this.lastTouchesPositions && this.lastTouchesPositions.length) {\n            this.dispatchRelatedMouseEvent(\"mouseup\", e, this.lastTouchesPositions[0], document);\n            this.dispatchRelatedMouseEvent(\"click\", e, this.lastTouchesPositions[0]);\n        }\n        if (this.movingTimeout) {\n            this.isMoving = false;\n            clearTimeout(this.movingTimeout);\n        }\n        switch (this.touchMode) {\n            case 2:\n                if (e.touches.length === 1) {\n                    this.handleStart(e);\n                    e.preventDefault();\n                    break;\n                }\n            /* falls through */\n            case 1:\n                // TODO\n                // Dispatch event\n                if (this.isMoving) {\n                    var cameraState = this.camera.getState(), previousCameraState = this.camera.getPreviousState();\n                    this.camera.animate({\n                        x: cameraState.x + TOUCH_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n                        y: cameraState.y + TOUCH_INERTIA_RATIO * (cameraState.y - previousCameraState.y),\n                    }, {\n                        duration: TOUCH_INERTIA_DURATION,\n                        easing: \"quadraticOut\",\n                    });\n                }\n                this.isMoving = false;\n                this.touchMode = 0;\n                break;\n        }\n        this.emit(\"touchup\", captor_1.getTouchCoords(e));\n    };\n    TouchCaptor.prototype.handleMove = function (e) {\n        var _a;\n        var _this = this;\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousemove\", e);\n        var startCameraState = this.startCameraState;\n        var touches = captor_1.getTouchesArray(e.touches);\n        var touchesPositions = touches.map(captor_1.getPosition);\n        this.lastTouchesPositions = touchesPositions;\n        this.isMoving = true;\n        if (this.movingTimeout)\n            clearTimeout(this.movingTimeout);\n        this.movingTimeout = window.setTimeout(function () {\n            _this.isMoving = false;\n        }, DRAG_TIMEOUT);\n        switch (this.touchMode) {\n            case 1: {\n                var _b = this.camera.viewportToFramedGraph(this.getDimensions(), (this.startTouchesPositions || [])[0]), xStart = _b.x, yStart = _b.y;\n                var _c = this.camera.viewportToFramedGraph(this.getDimensions(), touchesPositions[0]), x = _c.x, y = _c.y;\n                this.camera.setState({\n                    x: startCameraState.x + xStart - x,\n                    y: startCameraState.y + yStart - y,\n                });\n                break;\n            }\n            case 2: {\n                /**\n                 * Here is the thinking here:\n                 *\n                 * 1. We can find the new angle and ratio, by comparing the vector from \"touch one\" to \"touch two\" at the start\n                 *    of the d'n'd and now\n                 *\n                 * 2. We can use `Camera#viewportToGraph` inside formula to retrieve the new camera position, using the graph\n                 *    position of a touch at the beginning of the d'n'd (using `startCamera.viewportToGraph`) and the viewport\n                 *    position of this same touch now\n                 */\n                var newCameraState = {};\n                var _d = touchesPositions[0], x0 = _d.x, y0 = _d.y;\n                var _e = touchesPositions[1], x1 = _e.x, y1 = _e.y;\n                var angleDiff = Math.atan2(y1 - y0, x1 - x0) - this.startTouchesAngle;\n                var ratioDiff = Math.hypot(y1 - y0, x1 - x0) / this.startTouchesDistance;\n                // 1.\n                newCameraState.ratio = startCameraState.ratio / ratioDiff;\n                newCameraState.angle = startCameraState.angle + angleDiff;\n                // 2.\n                var dimensions = this.getDimensions();\n                var touchGraphPosition = camera_1.default.from(startCameraState).viewportToFramedGraph(dimensions, (this.startTouchesPositions || [])[0]);\n                var smallestDimension = Math.min(dimensions.width, dimensions.height);\n                var dx = smallestDimension / dimensions.width;\n                var dy = smallestDimension / dimensions.height;\n                var ratio = newCameraState.ratio / smallestDimension;\n                // Align with center of the graph:\n                var x = x0 - smallestDimension / 2 / dx;\n                var y = y0 - smallestDimension / 2 / dy;\n                // Rotate:\n                _a = __read([\n                    x * Math.cos(-newCameraState.angle) - y * Math.sin(-newCameraState.angle),\n                    y * Math.cos(-newCameraState.angle) + x * Math.sin(-newCameraState.angle),\n                ], 2), x = _a[0], y = _a[1];\n                newCameraState.x = touchGraphPosition.x - x * ratio;\n                newCameraState.y = touchGraphPosition.y + y * ratio;\n                this.camera.setState(newCameraState);\n                break;\n            }\n        }\n        this.emit(\"touchmove\", captor_1.getTouchCoords(e));\n    };\n    return TouchCaptor;\n}(captor_1.default));\nexports.default = TouchCaptor;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__47__;","import React from \"react\";\nimport { useSigma } from \"./hooks\";\n\ninterface Props {\n  animationDuration?: number;\n}\n\nexport const ZoomControl: React.FC<Props> = ({ animationDuration = 200 }) => {\n  // Get sigma\n  const sigma = useSigma();\n\n  /**\n   * Function to zoom in sigma.\n   */\n  function zoom(ratio?: number): void {\n    if (sigma) {\n      if (!ratio) {\n        sigma.getCamera().animatedReset({ duration: animationDuration });\n      } else if (ratio > 0) {\n        sigma.getCamera().animatedZoom({ duration: animationDuration });\n      } else if (ratio < 0) {\n        sigma.getCamera().animatedUnzoom({ duration: animationDuration });\n      }\n    }\n  }\n\n  return (\n    <>\n      <div className=\"react-sigma-control-zoom-in\">\n        <button onClick={() => zoom(1)} title=\"Zoom In\"></button>\n      </div>\n      <div className=\"react-sigma-control-zoom-out\">\n        <button onClick={() => zoom(-1)} title=\"Zoom Out\"></button>\n      </div>\n      <div className=\"react-sigma-control-zoom-center\">\n        <button onClick={() => zoom()} title=\"See whole graph\"></button>\n      </div>\n    </>\n  );\n};\n","import React, { ReactNode } from \"react\";\n\ninterface Props {\n  children?: ReactNode;\n  position?: \"top-right\" | \"top-left\" | \"bottom-right\" | \"bottom-left\";\n}\n\nexport const ControlsContainer: React.FC<Props> = ({ children, position = \"bottom-left\" }) => {\n  return <div className={`react-sigma-controls ${position}`}>{children}</div>;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { CameraState } from \"sigma/core/camera\";\nimport { useSigma, useRegisterEvents, useLoadGraph, useSetSettings } from \"./hooks\";\nimport { ForceAtlasControl } from \"./ForceAtlasControl\";\nimport { SigmaContainer } from \"./SigmaContainer\";\nimport { ZoomControl } from \"./ZoomControl\";\nimport { ControlsContainer } from \"./ControlsContainer\";\n\ninterface EventHandlers {\n  clickNode: ({ node: NodeKey, event: MouseCoords }) => void;\n  rightClickNode: ({ node: NodeKey, event: MouseCoords }) => void;\n  downNode: ({ node: NodeKey, event: MouseCoords }) => void;\n  leaveNode: ({ node: NodeKey }) => void;\n  enterNode: ({ node: NodeKey }) => void;\n  clickStage: ({ event: MouseCoords }) => void;\n  rightClickStage: ({ event: MouseCoords }) => void;\n  downStage: ({ event: MouseCoords }) => void;\n  kill: () => void;\n  cameraUpdated: (e: CameraState) => void;\n}\n\nexport {\n  ControlsContainer,\n  EventHandlers,\n  ForceAtlasControl,\n  SigmaContainer,\n  ZoomControl,\n  useSigma,\n  useRegisterEvents,\n  useLoadGraph,\n  useSetSettings,\n};\n"],"sourceRoot":""}