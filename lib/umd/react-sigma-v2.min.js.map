{"version":3,"sources":["webpack://react-sigma-v2/webpack/universalModuleDefinition","webpack://react-sigma-v2/./src/hooks.ts","webpack://react-sigma-v2/external \"react\"","webpack://react-sigma-v2/./src/context.ts","webpack://react-sigma-v2/./src/SigmaContainer.tsx","webpack://react-sigma-v2/./node_modules/sigma/sigma.js","webpack://react-sigma-v2/./node_modules/events/events.js","webpack://react-sigma-v2/./node_modules/graphology-metrics/extent.js","webpack://react-sigma-v2/./node_modules/graphology-utils/is-graph.js","webpack://react-sigma-v2/./node_modules/sigma/core/camera.js","webpack://react-sigma-v2/./node_modules/sigma/utils/animate.js","webpack://react-sigma-v2/./node_modules/sigma/utils/index.js","webpack://react-sigma-v2/./node_modules/sigma/node_modules/graphology-utils/is-graph.js","webpack://react-sigma-v2/./node_modules/sigma/utils/matrices.js","webpack://react-sigma-v2/./node_modules/sigma/utils/easings.js","webpack://react-sigma-v2/./node_modules/sigma/core/captors/mouse.js","webpack://react-sigma-v2/./node_modules/sigma/core/captors/captor.js","webpack://react-sigma-v2/./node_modules/sigma/core/quadtree.js","webpack://react-sigma-v2/./node_modules/@yomguithereal/helpers/extend.js","webpack://react-sigma-v2/./node_modules/sigma/core/labels.js","webpack://react-sigma-v2/./node_modules/sigma/settings.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/canvas/label.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/canvas/hover.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/canvas/node.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/canvas/edge-label.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/node.fast.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/node.fast.vert.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/node.fast.frag.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/common/node.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/common/program.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/utils.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/edge.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/edge.vert.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/edge.frag.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/common/edge.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/edge.arrow.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/edge.arrowHead.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/edge.arrowHead.vert.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/edge.arrowHead.frag.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/programs/edge.clamped.js","webpack://react-sigma-v2/./node_modules/sigma/rendering/webgl/shaders/edge.clamped.vert.glsl.js","webpack://react-sigma-v2/./node_modules/sigma/core/captors/touch.js","webpack://react-sigma-v2/external \"graphology\"","webpack://react-sigma-v2/./src/controls/ControlsContainer.tsx","webpack://react-sigma-v2/./src/controls/ForceAtlasControl.tsx","webpack://react-sigma-v2/./node_modules/graphology-layout-forceatlas2/worker.js","webpack://react-sigma-v2/./node_modules/graphology-layout-forceatlas2/webworker.js","webpack://react-sigma-v2/./node_modules/graphology-layout-forceatlas2/helpers.js","webpack://react-sigma-v2/./node_modules/graphology-layout-forceatlas2/defaults.js","webpack://react-sigma-v2/./src/controls/ZoomControl.tsx","webpack://react-sigma-v2/./src/controls/FullScreenControl.tsx","webpack://react-sigma-v2/./src/controls/SearchControl.tsx","webpack://react-sigma-v2/webpack/bootstrap","webpack://react-sigma-v2/./src/index.ts"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__42__","__WEBPACK_EXTERNAL_MODULE__2__","useSigma","useSigmaContext","sigma","graph","clear","getGraph","order","import","eventHandlers","setEventHandlers","useState","useEffect","Object","keys","forEach","name","camera","on","removeListener","settings","setSettings","prevSettings","key","getSetting","setSetting","SigmaContext","createContext","SigmaProvider","Provider","context","useContext","Error","SigmaContainer","graphOptions","id","className","style","initialSettings","children","containerRef","useRef","props","setSigma","current","instance","kill","useMemo","contents","value","ref","extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__importDefault","mod","__esModule","defineProperty","events_1","extent_1","camera_1","mouse_1","quadtree_1","utils_1","labels_1","settings_1","touch_1","nodeExtent","default","edgeExtent","PIXEL_RATIO","getPixelRatio","WEBGL_OVERSAMPLING_RATIO","applyNodeDefaults","data","color","defaultNodeColor","label","size","hidden","highlighted","applyEdgeDefaults","defaultEdgeColor","Sigma","_super","container","_this","elements","canvasContexts","webGLContexts","activeListeners","quadtree","nodeDataCache","edgeDataCache","nodeKeyToIndex","edgeKeyToIndex","normalizationFunction","createNormalizationFunction","x","Infinity","y","width","height","highlightedNodes","Set","displayedLabels","hoveredNode","renderFrame","renderHighlightedNodesFrame","needToProcess","needToSoftProcess","nodePrograms","edgePrograms","assignDeep","DEFAULT_SETTINGS","validateSettings","validateGraph","HTMLElement","initializeCache","createWebGLContext","createCanvasContext","gl","nodes","type","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","enable","BLEND","edges","nodeProgramClasses","NodeProgramClass","edgeProgramClasses","EdgeProgramClass","resize","bindCameraHandlers","mouseCaptor","mouse","touchCaptor","bindEventHandlers","bindGraphHandlers","process","render","createCanvas","canvas","createElement","position","class","appendChild","getContext","preserveDrawingBuffer","antialias","contextOptions","i","forEachNode","forEachEdge","scheduleRefresh","handleResize","window","addEventListener","mouseIsOnNode","mouseX","mouseY","nodeX","nodeY","Math","sqrt","pow","getQuadNodes","mouseGraphPosition","viewportToFramedGraph","point","handleMove","e","sizeRatio","getState","ratio","quadNodes","dimensions","minDistance","nodeToHover","l","length","node","pos","framedGraphToViewport","distance","emit","scheduleHighlightedNodesRender","createClickListener","eventType","captor","event","handleClick","handleRightClick","handleDown","graphUpdate","softGraphUpdate","addNodeGraphUpdate","addEdgeGraphUpdate","keepArrays","nodeExtentProperties","zIndex","push","nodeProgram","defaultNodeType","allocate","zIndexOrdering","z","getNodeAttribute","getNodeAttributes","nodeReducer","assign","applyTo","add","bind","bufferData","edgeProgram","defaultEdgeType","edge","getEdgeAttribute","getEdgeAttributes","edgeReducer","extremities","sourceData","targetData","computeIndices","renderLabels","visibleNodes","cameraState","viewRectangle","rectangle","x1","y1","x2","y2","gridSettings","labelGrid","labelsToDisplay","labelsToDisplayFromGrid","cache","cell","fontSize","labelSize","renderedSizeThreshold","labels","_a","labelRenderer","renderEdgeLabels","edgeLabels","clearRect","edgeLabelsToDisplay","edgeLabelsToDisplayFromNodes","displayedNodeLabels","edgeData","sourceX","sourceY","_b","targetX","targetY","edgeLabelRenderer","renderHighlightedNodes","hovers","hoverRenderer","requestFrame","cancelFrame","moving","isAnimated","isMoving","draggedEvents","currentWheelDirection","cameraMatrix","matrixFromCamera","matrix","nodesPowRatio","scalingRatio","hideEdgesOnMove","edgesPowRatio","hideLabelsOnMove","getCamera","getMouseCaptor","getTouchCaptor","getDimensions","undefined","updateSetting","updater","previousWidth","previousHeight","offsetWidth","offsetHeight","element","setAttribute","scale","viewport","COLOR_BUFFER_BIT","refresh","viewportToGraph","viewportPoint","inverse","graphToViewport","graphPoint","removeAllListeners","removeEventListener","firstChild","removeChild","EventEmitter","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","init","once","emitter","Promise","resolve","reject","errorListener","err","resolver","slice","arguments","eventTargetAgnosticAddListener","handler","flags","addErrorHandlerIfEventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","m","events","existing","warning","newListener","unshift","warned","w","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","n","copy","wrapListener","arg","enumerable","get","set","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","message","len","listeners","addListener","prependListener","prependOnceListener","list","originalListener","shift","index","pop","spliceOne","off","rawListeners","eventNames","isGraph","attribute","a","attributes","results","extent","addUndirectedEdgeWithKey","dropNode","multi","__assign","t","s","__read","o","Symbol","iterator","r","ar","next","done","animate_1","easings_1","DEFAULT_ZOOMING_RATIO","Camera","angle","nextFrame","enabled","previousState","from","setState","disable","getPreviousState","coordinates","smallestDimension","min","dx","dy","cos","sin","marginX","marginY","p1","p2","h","getViewportZoomedState","viewportTarget","ratioDiff","center","graphMousePosition","graphCenterPosition","animate","opts","callback","options","ANIMATE_DEFAULTS","easing","start","Date","now","initialState","fn","duration","animationCallback","coefficient","newState","animatedZoom","factorOrOptions","factor","animatedUnzoom","animatedReset","animateNodes","index_1","targets","startPositions","attrs","k","frame","step","setNodeAttribute","canUse32BitsIndices","extractPixel","floatColor","isPlainObject","is_graph_1","matrices_1","objects","_i","requestAnimationFrame","setTimeout","cancelAnimationFrame","requestID","clearTimeout","tag","document","devicePixelRatio","minX","maxX","minY","maxY","max","dX","dY","getter","sort","zA","zB","FLOAT_COLOR_CACHE","INT8","Int8Array","INT32","Int32Array","buffer","FLOAT32","Float32Array","RGBA_TEST_REGEX","RGBA_EXTRACT_REGEX","val","g","parseInt","charAt","test","match","identity","cameraCentering","translate","cameraScaling","cameraRotation","rotate","viewportScaling","multiply","array","Uint8Array","readPixels","RGBA","UNSIGNED_BYTE","WebGL2RenderingContext","getExtension","isFinite","of","c","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","cubicInOut","cubicOut","cubicIn","quadraticInOut","quadraticOut","quadraticIn","linear","easings","__createBinding","k2","__setModuleDefault","v","__importStar","result","captor_1","MouseCaptor","downStartTime","lastMouseX","lastMouseY","isMouseDown","movingTimeout","startCameraState","clicks","doubleClickTimeout","handleUp","handleWheel","handleOut","handleDoubleClick","getMouseCoords","newRatio","getX","getY","preventDefault","returnValue","stopPropagation","which","previousCameraState","eX","eY","lastMouse","offsetX","offsetY","delta","getWheelDelta","wheelDirection","lastWheelTriggerTime","MOUSE_ZOOM_DURATION","getTouchCoords","getTouchesArray","getPosition","clientX","clientY","ctrlKey","metaKey","altKey","shiftKey","original","touches","map","deltaY","detail","Captor","__spreadArray","to","il","j","rectangleCollidesWithQuad","squareCollidesWithQuad","getCircumscribedAlignedRectangle","isRectangleAligned","extend_1","rect","heightVector","tl","tr","bl","br","xL","xR","yT","qx","qy","qw","qh","pointIsInQuad","left","QuadTree","params","containers","lastRectangle","L","boundaries","maxLevel","level","block","topLeftBlock","topRightBlock","bottomLeftBlock","bottomRightBlock","collidingWithTopLeft","collidingWithTopRight","collidingWithBottomLeft","collidingWithBottomRight","collisions","reduce","acc","insertNode","stack","hw","hh","buildQuadrants","lr","collectedNodes","getNodesInAxisAlignedRectangleArea","abs","values","l2","l1","DEFAULT_CELL","DEFAULT_UNZOOMED_CELL","userCell","previousCamera","zooming","panning","unzooming","unzoomedPanning","zoomedPanning","trunc","cwr","cellWidth","floor","chr","cellHeight","adjustedWidth","adjustedHeight","adjustedX","adjustedY","panningWidth","panningHeight","panningX","panningY","worthyLabels","grid","maxSize","biggestNode","nodeData","ppos","has","currentNode","currentNodeData","n1","n2","won","nodeDegree","degree","currentNodeDegree","biggestNodeShown","some","w1","h1","w2","h2","d1","d2","filter","worthyEdges","displayedNodeLabelsArray","highlightedNodesArray","edgeKey","outboundEdges","opposite","label_1","hover_1","edge_label_1","node_fast_1","edge_1","edge_arrow_1","labelFont","labelWeight","edgeLabelFont","edgeLabelSize","edgeLabelWeight","circle","arrow","line","font","weight","fillStyle","fillText","node_1","beginPath","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","textWidth","measureText","round","moveTo","arcTo","lineTo","closePath","fill","PI_TIMES_2","PI","arc","cx","cy","acos","asin","save","restore","node_fast_vert_glsl_1","node_fast_frag_glsl_1","NodeProgramFast","offset","program","useProgram","uniform1f","ratioLocation","scaleLocation","uniformMatrix3fv","matrixLocation","drawArrays","POINTS","AbstractNodeProgram","toStringTag","createNodeCompoundProgram","vertexShaderSource","fragmentShaderSource","points","positionLocation","getAttribLocation","sizeLocation","colorLocation","getUniformLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","BYTES_PER_ELEMENT","AbstractProgram","programClasses","NodeCompoundProgram","programs","ProgramClass","capacity","createBuffer","bindBuffer","ARRAY_BUFFER","vertexShader","loadVertexShader","fragmentShader","loadFragmentShader","loadProgram","DYNAMIC_DRAW","loadShader","source","glType","VERTEX_SHADER","FRAGMENT_SHADER","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","infoLog","getShaderInfoLog","deleteShader","shaders","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","deleteProgram","edge_vert_glsl_1","edge_frag_glsl_1","EdgeProgram","indicesBuffer","normalLocation","thicknessLocation","cameraRatioLocation","viewportRatioLocation","thicknessRatioLocation","IndicesArray","Uint32Array","Uint16Array","indicesArray","indicesType","UNSIGNED_INT","UNSIGNED_SHORT","ELEMENT_ARRAY_BUFFER","indices","STATIC_DRAW","i_1","thickness","drawElements","TRIANGLES","AbstractEdgeProgram","createEdgeCompoundProgram","EdgeCompoundProgram","edge_arrowHead_1","edge_clamped_1","edge_arrowHead_vert_glsl_1","edge_arrowHead_frag_glsl_1","ATTRIBUTES","EdgeArrowHeadProgram","radiusLocation","barycentricLocation","radius","edge_clamped_vert_glsl_1","EdgeClampedProgram","TouchCaptor","touchMode","handleStart","handleLeave","dispatchRelatedMouseEvent","mousePosition","mouseEvent","MouseEvent","dispatchEvent","startTouchesPositions","lastTouchesPositions","x0","y0","_c","startTouchesAngle","atan2","startTouchesDistance","touchesPositions","xStart","yStart","newCameraState","_d","_e","angleDiff","hypot","touchGraphPosition","ControlsContainer","ForceAtlasControl","autoRunFor","fa2","setFa2","fa2IsRunning","setFa2IsRunning","nFa2","timeout","stop","onClick","title","workerFunction","helpers","FA2LayoutSupervisor","validationError","worker","matrices","running","killed","handleMessage","alreadyRespawning","self","handleAddition","spawnWorker","setImmediate","terminate","createWorker","assignLayoutChanges","askForIterations","withEdges","payload","buffers","postMessage","graphToByteArrays","NODES","EDGES","PPN","moduleShim","NodeMatrix","EdgeMatrix","rn","outboundAttCompensation","xDist","yDist","ewc","force","swinging","traction","nodespeed","newX","newY","adjustSizes","thetaSquared","barnesHutTheta","RegionMatrix","outboundAttractionDistribution","barnesHutOptimize","q","q2","subdivisionAttempts","PPR","gravity","strongGravityMode","edgeWeightInfluence","linLogMode","log","slowDown","iterate","attr","fixed","collectLayoutChanges","positions","xURL","URL","webkitURL","code","toString","objectUrl","createObjectURL","Blob","Worker","revokeObjectURL","ZoomControl","animationDuration","zoom","FullScreenControl","isFullScreen","setFullScreen","sigmaRootElement","closest","classList","contains","remove","SearchControl","search","setSearch","setValues","selected","setSelected","newValues","toLowerCase","includes","placeholder","onChange","searchString","valueItem","find","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","useRegisterEvents","useLoadGraph","useSetSettings"],"mappings":"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","file":"react-sigma-v2.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"graphology\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"graphology\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"react-sigma-v2\"] = factory(require(\"graphology\"), require(\"react\"));\n\telse\n\t\troot[\"react-sigma-v2\"] = factory(root[\"graphology\"], root[\"react\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__42__, __WEBPACK_EXTERNAL_MODULE__2__) {\nreturn ","import { useEffect, useState } from \"react\";\nimport { Sigma } from \"sigma/sigma\";\nimport { Settings } from \"sigma/settings\";\nimport Graph from \"graphology\";\nimport { useSigmaContext } from \"./context\";\nimport { EventHandlers } from \"./index\";\n\nexport function useSigma(): Sigma {\n  return useSigmaContext().sigma;\n}\n\nexport function useLoadGraph(): (graph: Graph, clear?: boolean) => void {\n  const sigma = useSigma();\n\n  return (graph: Graph, clear = true) => {\n    if (sigma && graph) {\n      if (clear && sigma.getGraph().order > 0) sigma.getGraph().clear();\n      sigma.getGraph().import(graph);\n    }\n  };\n}\n\nexport function useRegisterEvents(): (eventHandlers: Partial<EventHandlers>) => void {\n  const sigma = useSigma();\n  const [eventHandlers, setEventHandlers] = useState<Partial<EventHandlers>>({});\n\n  useEffect(() => {\n    if (sigma && eventHandlers) {\n      Object.keys(eventHandlers).forEach(name => {\n        if (name === \"cameraUpdated\") {\n          sigma.camera.on(name, eventHandlers[name]);\n        } else {\n          sigma.on(name, eventHandlers[name]);\n        }\n      });\n      // cleanup\n      return () => {\n        Object.keys(eventHandlers).forEach(name => {\n          if (name === \"cameraUpdated\") {\n            sigma.camera.removeListener(name, eventHandlers[name]);\n          } else {\n            sigma.removeListener(name, eventHandlers[name]);\n          }\n        });\n      };\n    }\n  }, [sigma, eventHandlers]);\n\n  return setEventHandlers;\n}\n\nexport function useSetSettings(): (settings: Partial<Settings>) => void {\n  const sigma = useSigma();\n  const [settings, setSettings] = useState<Partial<Settings>>({});\n\n  useEffect(() => {\n    if (sigma && settings) {\n      const prevSettings: Partial<Settings> = {};\n\n      Object.keys(settings).forEach(key => {\n        prevSettings[key] = sigma.getSetting(key);\n        sigma.setSetting(key, settings[key]);\n      });\n\n      // cleanup\n      return () => {\n        Object.keys(prevSettings).forEach(key => {\n          sigma.setSetting(key, prevSettings[key]);\n        });\n      };\n    }\n  }, [sigma, settings]);\n\n  return setSettings;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","import { createContext, useContext } from \"react\";\nimport { Sigma } from \"sigma/sigma\";\n\nexport interface SigmaContextInterface {\n  sigma: Sigma;\n}\n\nexport const SigmaContext = createContext<SigmaContextInterface | null>(null);\n\nexport const SigmaProvider = SigmaContext.Provider;\n\nexport function useSigmaContext(): SigmaContextInterface {\n  const context = useContext(SigmaContext);\n  if (context == null) {\n    throw new Error(\"No context provided: useSigmaContext() can only be used in a descendant of <SigmaContainer>\");\n  }\n  return context;\n}\n","import React, { CSSProperties, ReactNode, useEffect, useMemo, useRef, useState } from \"react\";\nimport Sigma from \"sigma/sigma\";\nimport { Settings } from \"sigma/settings\";\nimport Graph from \"graphology\";\nimport { GraphOptions } from \"graphology-types\";\nimport { SigmaContext, SigmaProvider } from \"./context\";\n\ninterface SigmaContainerProps {\n  graphOptions?: GraphOptions;\n  initialSettings?: Settings;\n  id?: string;\n  className?: string;\n  style?: CSSProperties;\n  children?: ReactNode;\n}\n\nexport const SigmaContainer: React.FC<SigmaContainerProps> = ({\n  graphOptions,\n  id,\n  className,\n  style,\n  initialSettings,\n  children,\n}) => {\n  // HTML element for the sigma instance\n  const containerRef = useRef<HTMLDivElement>(null);\n  // Common html props for the container\n  const [props] = useState({ className: `react-sigma-v2 ${className ? className : \"\"}`, id, style });\n  // The sigma instance\n  const [sigma, setSigma] = useState<Sigma | null>(null);\n\n  // When graphOptions or settings changed\n  useEffect(() => {\n    if (containerRef.current !== null) {\n      const instance = new Sigma(new Graph(graphOptions), containerRef.current, initialSettings);\n      setSigma(instance);\n    }\n    return () => {\n      setSigma(instance => {\n        if (instance) instance.kill();\n        return null;\n      });\n    };\n  }, [containerRef]);\n\n  const context = useMemo(() => (sigma ? { sigma } : null), [sigma]);\n  const contents = context !== null ? <SigmaProvider value={context}>{children}</SigmaProvider> : null;\n\n  return (\n    <div {...props}>\n      <div className={\"sigma-container\"} ref={containerRef}></div>\n      {contents}\n    </div>\n  );\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js\n * ========\n * @module\n */\nvar events_1 = require(\"events\");\nvar extent_1 = __importDefault(require(\"graphology-metrics/extent\"));\nvar camera_1 = __importDefault(require(\"./core/camera\"));\nvar mouse_1 = __importDefault(require(\"./core/captors/mouse\"));\nvar quadtree_1 = __importDefault(require(\"./core/quadtree\"));\nvar utils_1 = require(\"./utils\");\nvar labels_1 = require(\"./core/labels\");\nvar settings_1 = require(\"./settings\");\nvar touch_1 = __importDefault(require(\"./core/captors/touch\"));\nvar nodeExtent = extent_1.default.nodeExtent, edgeExtent = extent_1.default.edgeExtent;\n/**\n * Constants.\n */\nvar PIXEL_RATIO = utils_1.getPixelRatio();\nvar WEBGL_OVERSAMPLING_RATIO = utils_1.getPixelRatio();\n/**\n * Important functions.\n */\nfunction applyNodeDefaults(settings, key, data) {\n    if (!data.hasOwnProperty(\"x\") || !data.hasOwnProperty(\"y\"))\n        throw new Error(\"Sigma: could not find a valid position (x, y) for node \\\"\" + key + \"\\\". All your nodes must have a number \\\"x\\\" and \\\"y\\\". Maybe your forgot to apply a layout or your \\\"nodeReducer\\\" is not returning the correct data?\");\n    if (!data.color)\n        data.color = settings.defaultNodeColor;\n    if (!data.label)\n        data.label = \"\";\n    if (!data.size)\n        data.size = 2;\n    if (!data.hasOwnProperty(\"hidden\"))\n        data.hidden = false;\n    if (!data.hasOwnProperty(\"highlighted\"))\n        data.highlighted = false;\n}\nfunction applyEdgeDefaults(settings, key, data) {\n    if (!data.color)\n        data.color = settings.defaultEdgeColor;\n    if (!data.label)\n        data.label = \"\";\n    if (!data.size)\n        data.size = 0.5;\n    if (!data.hasOwnProperty(\"hidden\"))\n        data.hidden = false;\n}\n/**\n * Main class.\n *\n * @constructor\n * @param {Graph}       graph     - Graph to render.\n * @param {HTMLElement} container - DOM container in which to render.\n * @param {object}      settings  - Optional settings.\n */\nvar Sigma = /** @class */ (function (_super) {\n    __extends(Sigma, _super);\n    function Sigma(graph, container, settings) {\n        if (settings === void 0) { settings = {}; }\n        var _this = _super.call(this) || this;\n        _this.elements = {};\n        _this.canvasContexts = {};\n        _this.webGLContexts = {};\n        _this.activeListeners = {};\n        _this.quadtree = new quadtree_1.default();\n        _this.nodeDataCache = {};\n        _this.edgeDataCache = {};\n        _this.nodeKeyToIndex = {};\n        _this.edgeKeyToIndex = {};\n        _this.nodeExtent = null;\n        _this.edgeExtent = null;\n        _this.normalizationFunction = utils_1.createNormalizationFunction({\n            x: [-Infinity, Infinity],\n            y: [-Infinity, Infinity],\n        });\n        // Starting dimensions\n        _this.width = 0;\n        _this.height = 0;\n        // State\n        _this.highlightedNodes = new Set();\n        _this.displayedLabels = new Set();\n        _this.hoveredNode = null;\n        _this.renderFrame = null;\n        _this.renderHighlightedNodesFrame = null;\n        _this.needToProcess = false;\n        _this.needToSoftProcess = false;\n        // programs\n        _this.nodePrograms = {};\n        _this.edgePrograms = {};\n        _this.settings = utils_1.assignDeep({}, settings_1.DEFAULT_SETTINGS, settings);\n        // Validating\n        settings_1.validateSettings(_this.settings);\n        utils_1.validateGraph(graph);\n        if (!(container instanceof HTMLElement))\n            throw new Error(\"Sigma: container should be an html element.\");\n        // Properties\n        _this.graph = graph;\n        _this.container = container;\n        _this.initializeCache();\n        // Initializing contexts\n        _this.createWebGLContext(\"edges\");\n        _this.createWebGLContext(\"nodes\");\n        _this.createCanvasContext(\"edgeLabels\");\n        _this.createCanvasContext(\"labels\");\n        _this.createCanvasContext(\"hovers\");\n        _this.createCanvasContext(\"mouse\");\n        // Blending\n        var gl = _this.webGLContexts.nodes;\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n        gl = _this.webGLContexts.edges;\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n        // Loading programs\n        for (var type in _this.settings.nodeProgramClasses) {\n            var NodeProgramClass = _this.settings.nodeProgramClasses[type];\n            _this.nodePrograms[type] = new NodeProgramClass(_this.webGLContexts.nodes);\n        }\n        for (var type in _this.settings.edgeProgramClasses) {\n            var EdgeProgramClass = _this.settings.edgeProgramClasses[type];\n            _this.edgePrograms[type] = new EdgeProgramClass(_this.webGLContexts.edges);\n        }\n        // Initial resize\n        _this.resize();\n        // Initializing the camera\n        _this.camera = new camera_1.default();\n        // Binding camera events\n        _this.bindCameraHandlers();\n        // Initializing captors\n        _this.mouseCaptor = new mouse_1.default(_this.elements.mouse, _this.camera);\n        _this.touchCaptor = new touch_1.default(_this.elements.mouse, _this.camera);\n        // Binding event handlers\n        _this.bindEventHandlers();\n        // Binding graph handlers\n        _this.bindGraphHandlers();\n        // Processing data for the first time & render\n        _this.process();\n        _this.render();\n        return _this;\n    }\n    /**---------------------------------------------------------------------------\n     * Internal methods.\n     **---------------------------------------------------------------------------\n     */\n    /**\n     * Internal function used to create a canvas element.\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createCanvas = function (id) {\n        var canvas = utils_1.createElement(\"canvas\", {\n            position: \"absolute\",\n        }, {\n            class: \"sigma-\" + id,\n        });\n        this.elements[id] = canvas;\n        this.container.appendChild(canvas);\n        return canvas;\n    };\n    /**\n     * Internal function used to create a canvas context and add the relevant\n     * DOM elements.\n     *\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createCanvasContext = function (id) {\n        var canvas = this.createCanvas(id);\n        var contextOptions = {\n            preserveDrawingBuffer: false,\n            antialias: false,\n        };\n        this.canvasContexts[id] = canvas.getContext(\"2d\", contextOptions);\n        return this;\n    };\n    /**\n     * Internal function used to create a canvas context and add the relevant\n     * DOM elements.\n     *\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createWebGLContext = function (id) {\n        var canvas = this.createCanvas(id);\n        var contextOptions = {\n            preserveDrawingBuffer: false,\n            antialias: false,\n        };\n        var context;\n        // First we try webgl2 for an easy performance boost\n        context = canvas.getContext(\"webgl2\", contextOptions);\n        // Else we fall back to webgl\n        if (!context)\n            context = canvas.getContext(\"webgl\", contextOptions);\n        // Edge, I am looking right at you...\n        if (!context)\n            context = canvas.getContext(\"experimental-webgl\", contextOptions);\n        this.webGLContexts[id] = context;\n        return this;\n    };\n    /**\n     * Method used to initialize display data cache.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.initializeCache = function () {\n        var _this = this;\n        var graph = this.graph;\n        // NOTE: the data caches are never reset to avoid paying a GC cost\n        // But this could prove to be a bad decision. In which case just \"reset\"\n        // them here.\n        var i = 0;\n        graph.forEachNode(function (key) {\n            _this.nodeKeyToIndex[key] = i++;\n            _this.nodeDataCache[key] = {};\n        });\n        i = 0;\n        graph.forEachEdge(function (key) {\n            _this.edgeKeyToIndex[key] = i++;\n            _this.edgeDataCache[key] = {};\n        });\n    };\n    /**\n     * Method binding camera handlers.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindCameraHandlers = function () {\n        var _this = this;\n        this.activeListeners.camera = function () {\n            _this.scheduleRefresh();\n        };\n        this.camera.on(\"updated\", this.activeListeners.camera);\n        return this;\n    };\n    /**\n     * Method binding event handlers.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindEventHandlers = function () {\n        var _this = this;\n        // Handling window resize\n        this.activeListeners.handleResize = function () {\n            _this.needToSoftProcess = true;\n            _this.scheduleRefresh();\n        };\n        window.addEventListener(\"resize\", this.activeListeners.handleResize);\n        // Function checking if the mouse is on the given node\n        var mouseIsOnNode = function (mouseX, mouseY, nodeX, nodeY, size) {\n            return (mouseX > nodeX - size &&\n                mouseX < nodeX + size &&\n                mouseY > nodeY - size &&\n                mouseY < nodeY + size &&\n                Math.sqrt(Math.pow(mouseX - nodeX, 2) + Math.pow(mouseY - nodeY, 2)) < size);\n        };\n        // Function returning the nodes in the mouse's quad\n        var getQuadNodes = function (mouseX, mouseY) {\n            var mouseGraphPosition = _this.camera.viewportToFramedGraph({ width: _this.width, height: _this.height }, { x: mouseX, y: mouseY });\n            // TODO: minus 1? lol\n            return _this.quadtree.point(mouseGraphPosition.x, 1 - mouseGraphPosition.y);\n        };\n        // Handling mouse move\n        this.activeListeners.handleMove = function (e) {\n            // NOTE: for the canvas renderer, testing the pixel's alpha should\n            // give some boost but this slows things down for WebGL empirically.\n            // TODO: this should be a method from the camera (or can be passed to graph to display somehow)\n            var sizeRatio = Math.pow(_this.camera.getState().ratio, 0.5);\n            var quadNodes = getQuadNodes(e.x, e.y);\n            var dimensions = { width: _this.width, height: _this.height };\n            // We will hover the node whose center is closest to mouse\n            var minDistance = Infinity, nodeToHover = null;\n            for (var i = 0, l = quadNodes.length; i < l; i++) {\n                var node = quadNodes[i];\n                var data = _this.nodeDataCache[node];\n                var pos = _this.camera.framedGraphToViewport(dimensions, data);\n                var size = data.size / sizeRatio;\n                if (mouseIsOnNode(e.x, e.y, pos.x, pos.y, size)) {\n                    var distance = Math.sqrt(Math.pow(e.x - pos.x, 2) + Math.pow(e.y - pos.y, 2));\n                    // TODO: sort by min size also for cases where center is the same\n                    if (distance < minDistance) {\n                        minDistance = distance;\n                        nodeToHover = node;\n                    }\n                }\n            }\n            if (nodeToHover && _this.hoveredNode !== nodeToHover) {\n                // Handling passing from one node to the other directly\n                if (_this.hoveredNode)\n                    _this.emit(\"leaveNode\", { node: _this.hoveredNode });\n                _this.hoveredNode = nodeToHover;\n                _this.emit(\"enterNode\", { node: nodeToHover });\n                _this.scheduleHighlightedNodesRender();\n                return;\n            }\n            // Checking if the hovered node is still hovered\n            if (_this.hoveredNode) {\n                var data = _this.nodeDataCache[_this.hoveredNode];\n                var pos = _this.camera.framedGraphToViewport(dimensions, data);\n                var size = data.size / sizeRatio;\n                if (!mouseIsOnNode(e.x, e.y, pos.x, pos.y, size)) {\n                    var node = _this.hoveredNode;\n                    _this.hoveredNode = null;\n                    _this.emit(\"leaveNode\", { node: node });\n                    return _this.scheduleHighlightedNodesRender();\n                }\n            }\n        };\n        // Handling click\n        var createClickListener = function (eventType) {\n            return function (e) {\n                var sizeRatio = Math.pow(_this.camera.getState().ratio, 0.5);\n                var quadNodes = getQuadNodes(e.x, e.y);\n                var dimensions = { width: _this.width, height: _this.height };\n                for (var i = 0, l = quadNodes.length; i < l; i++) {\n                    var node = quadNodes[i];\n                    var data = _this.nodeDataCache[node];\n                    var pos = _this.camera.framedGraphToViewport(dimensions, data);\n                    var size = data.size / sizeRatio;\n                    if (mouseIsOnNode(e.x, e.y, pos.x, pos.y, size))\n                        return _this.emit(eventType + \"Node\", { node: node, captor: e, event: e });\n                }\n                return _this.emit(eventType + \"Stage\", { event: e });\n            };\n        };\n        this.activeListeners.handleClick = createClickListener(\"click\");\n        this.activeListeners.handleRightClick = createClickListener(\"rightClick\");\n        this.activeListeners.handleDown = createClickListener(\"down\");\n        this.mouseCaptor.on(\"mousemove\", this.activeListeners.handleMove);\n        this.mouseCaptor.on(\"click\", this.activeListeners.handleClick);\n        this.mouseCaptor.on(\"rightClick\", this.activeListeners.handleRightClick);\n        this.mouseCaptor.on(\"mousedown\", this.activeListeners.handleDown);\n        // TODO\n        // Deal with Touch captor events\n        return this;\n    };\n    /**\n     * Method binding graph handlers\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindGraphHandlers = function () {\n        var _this = this;\n        var graph = this.graph;\n        this.activeListeners.graphUpdate = function () {\n            _this.needToProcess = true;\n            _this.scheduleRefresh();\n        };\n        this.activeListeners.softGraphUpdate = function () {\n            _this.needToSoftProcess = true;\n            _this.scheduleRefresh();\n        };\n        this.activeListeners.addNodeGraphUpdate = function (e) {\n            // Adding entry to cache\n            _this.nodeKeyToIndex[e.key] = graph.order - 1;\n            _this.nodeDataCache[e.key] = {};\n            _this.activeListeners.graphUpdate();\n        };\n        this.activeListeners.addEdgeGraphUpdate = function (e) {\n            // Adding entry to cache\n            _this.nodeKeyToIndex[e.key] = graph.order - 1;\n            _this.edgeDataCache[e.key] = {};\n            _this.activeListeners.graphUpdate();\n        };\n        // TODO: clean cache on drop!\n        // TODO: bind this on composed state events\n        // TODO: it could be possible to update only specific node etc. by holding\n        // a fixed-size pool of updated items\n        graph.on(\"nodeAdded\", this.activeListeners.addNodeGraphUpdate);\n        graph.on(\"nodeDropped\", this.activeListeners.graphUpdate);\n        graph.on(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.on(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.on(\"edgeAdded\", this.activeListeners.addEdgeGraphUpdate);\n        graph.on(\"edgeDropped\", this.activeListeners.graphUpdate);\n        graph.on(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.on(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.on(\"edgesCleared\", this.activeListeners.graphUpdate);\n        graph.on(\"cleared\", this.activeListeners.graphUpdate);\n        return this;\n    };\n    /**\n     * Method used to process the whole graph's data.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.process = function (keepArrays) {\n        if (keepArrays === void 0) { keepArrays = false; }\n        var graph = this.graph, settings = this.settings;\n        // Clearing the quad\n        this.quadtree.clear();\n        // Clear the highlightedNodes\n        this.highlightedNodes = new Set();\n        // Computing extents\n        var nodeExtentProperties = [\"x\", \"y\", \"z\"];\n        if (this.settings.zIndex) {\n            nodeExtentProperties.push(\"z\");\n            this.edgeExtent = edgeExtent(graph, [\"z\"]);\n        }\n        this.nodeExtent = nodeExtent(graph, nodeExtentProperties);\n        // Rescaling function\n        this.normalizationFunction = utils_1.createNormalizationFunction(this.nodeExtent);\n        var nodeProgram = this.nodePrograms[this.settings.defaultNodeType];\n        if (!keepArrays)\n            nodeProgram.allocate(graph.order);\n        var nodes = graph.nodes();\n        // Handling node z-index\n        // TODO: z-index needs us to compute display data before hand\n        if (this.settings.zIndex)\n            nodes = utils_1.zIndexOrdering(this.nodeExtent.z, function (node) { return graph.getNodeAttribute(node, \"z\"); }, nodes);\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            var node = nodes[i];\n            // Node display data resolution:\n            //   1. First we get the node's attributes\n            //   2. We optionally reduce them using the function provided by the user\n            //      Note that this function must return a total object and won't be merged\n            //   3. We apply our defaults, while running some vital checks\n            //   4. We apply the normalization function\n            var data = graph.getNodeAttributes(node);\n            if (settings.nodeReducer)\n                data = settings.nodeReducer(node, data);\n            // We shallow copy the data to avoid mutating both the graph and the reducer's result\n            data = Object.assign(this.nodeDataCache[node], data);\n            applyNodeDefaults(this.settings, node, data);\n            this.normalizationFunction.applyTo(data);\n            this.quadtree.add(node, data.x, 1 - data.y, data.size / this.width);\n            nodeProgram.process(data, data.hidden, i);\n            // Save the node in the highlighted set if needed\n            if (data.highlighted && !data.hidden)\n                this.highlightedNodes.add(node);\n            this.nodeKeyToIndex[node] = i;\n        }\n        // TODO: maybe we should bind and buffer as part of rendering?\n        // We also need to find when it is useful and when it's really not\n        nodeProgram.bind();\n        nodeProgram.bufferData();\n        var edgeProgram = this.edgePrograms[this.settings.defaultEdgeType];\n        if (!keepArrays)\n            edgeProgram.allocate(graph.size);\n        var edges = graph.edges();\n        // Handling edge z-index\n        if (this.settings.zIndex && this.edgeExtent)\n            edges = utils_1.zIndexOrdering(this.edgeExtent.z, function (edge) { return graph.getEdgeAttribute(edge, \"z\"); }, edges);\n        for (var i = 0, l = edges.length; i < l; i++) {\n            var edge = edges[i];\n            // Edge display data resolution:\n            //   1. First we get the edge's attributes\n            //   2. We optionally reduce them using the function provided by the user\n            //      Note that this function must return a total object and won't be merged\n            //   3. We apply our defaults, while running some vital checks\n            var data = graph.getEdgeAttributes(edge);\n            if (settings.edgeReducer)\n                data = settings.edgeReducer(edge, data);\n            // We shallow copy the data to avoid mutating both the graph and the reducer's result\n            data = Object.assign(this.edgeDataCache[edge], data);\n            applyEdgeDefaults(this.settings, edge, data);\n            var extremities = graph.extremities(edge), sourceData = this.nodeDataCache[extremities[0]], targetData = this.nodeDataCache[extremities[1]];\n            var hidden = data.hidden || sourceData.hidden || targetData.hidden;\n            edgeProgram.process(sourceData, targetData, data, hidden, i);\n            this.nodeKeyToIndex[edge] = i;\n        }\n        // Computing edge indices if necessary\n        if (!keepArrays && typeof edgeProgram.computeIndices === \"function\")\n            edgeProgram.computeIndices();\n        // TODO: maybe we should bind and buffer as part of rendering?\n        // We also need to find when it is useful and when it's really not\n        edgeProgram.bind();\n        edgeProgram.bufferData();\n        return this;\n    };\n    /**\n     * Method used to render labels.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderLabels = function () {\n        if (!this.settings.renderLabels)\n            return this;\n        var cameraState = this.camera.getState();\n        var dimensions = { width: this.width, height: this.height };\n        // Finding visible nodes to display their labels\n        var visibleNodes;\n        if (cameraState.ratio >= 1) {\n            // Camera is unzoomed so no need to ask the quadtree for visible nodes\n            visibleNodes = this.graph.nodes();\n        }\n        else {\n            // Let's ask the quadtree\n            var viewRectangle = this.camera.viewRectangle(dimensions);\n            visibleNodes = this.quadtree.rectangle(viewRectangle.x1, 1 - viewRectangle.y1, viewRectangle.x2, 1 - viewRectangle.y2, viewRectangle.height);\n        }\n        // Selecting labels to draw\n        var gridSettings = this.settings.labelGrid;\n        var labelsToDisplay = labels_1.labelsToDisplayFromGrid({\n            cache: this.nodeDataCache,\n            camera: this.camera,\n            cell: gridSettings.cell,\n            dimensions: dimensions,\n            displayedLabels: this.displayedLabels,\n            fontSize: this.settings.labelSize,\n            graph: this.graph,\n            renderedSizeThreshold: gridSettings.renderedSizeThreshold,\n            visibleNodes: visibleNodes,\n        });\n        // Drawing labels\n        var context = this.canvasContexts.labels;\n        var sizeRatio = Math.pow(cameraState.ratio, 0.5);\n        for (var i = 0, l = labelsToDisplay.length; i < l; i++) {\n            var data = this.nodeDataCache[labelsToDisplay[i]];\n            var _a = this.camera.framedGraphToViewport(dimensions, data), x = _a.x, y = _a.y;\n            // TODO: we can cache the labels we need to render until the camera's ratio changes\n            // TODO: this should be computed in the canvas components?\n            var size = data.size / sizeRatio;\n            this.settings.labelRenderer(context, {\n                key: labelsToDisplay[i],\n                label: data.label,\n                color: \"#000\",\n                size: size,\n                x: x,\n                y: y,\n            }, this.settings);\n        }\n        // Caching visible nodes and displayed labels\n        this.displayedLabels = new Set(labelsToDisplay);\n        return this;\n    };\n    /**\n     * Method used to render edge labels, based on which node labels were\n     * rendered.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderEdgeLabels = function () {\n        if (!this.settings.renderEdgeLabels)\n            return this;\n        var cameraState = this.camera.getState();\n        var sizeRatio = Math.pow(cameraState.ratio, 0.5);\n        var context = this.canvasContexts.edgeLabels;\n        var dimensions = { width: this.width, height: this.height };\n        // Clearing\n        context.clearRect(0, 0, this.width, this.height);\n        var edgeLabelsToDisplay = labels_1.edgeLabelsToDisplayFromNodes({\n            nodeDataCache: this.nodeDataCache,\n            edgeDataCache: this.edgeDataCache,\n            graph: this.graph,\n            hoveredNode: this.hoveredNode,\n            displayedNodeLabels: this.displayedLabels,\n            highlightedNodes: this.highlightedNodes,\n        });\n        for (var i = 0, l = edgeLabelsToDisplay.length; i < l; i++) {\n            var edge = edgeLabelsToDisplay[i], extremities = this.graph.extremities(edge), sourceData = this.nodeDataCache[extremities[0]], targetData = this.nodeDataCache[extremities[1]], edgeData = this.edgeDataCache[edgeLabelsToDisplay[i]];\n            var _a = this.camera.framedGraphToViewport(dimensions, sourceData), sourceX = _a.x, sourceY = _a.y;\n            var _b = this.camera.framedGraphToViewport(dimensions, targetData), targetX = _b.x, targetY = _b.y;\n            // TODO: we can cache the labels we need to render until the camera's ratio changes\n            // TODO: this should be computed in the canvas components?\n            var size = edgeData.size / sizeRatio;\n            this.settings.edgeLabelRenderer(context, {\n                key: edge,\n                label: edgeData.label,\n                color: edgeData.color,\n                size: size,\n            }, {\n                key: extremities[0],\n                x: sourceX,\n                y: sourceY,\n            }, {\n                key: extremities[1],\n                x: targetX,\n                y: targetY,\n            }, this.settings);\n        }\n        return this;\n    };\n    /**\n     * Method used to render the highlighted nodes.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderHighlightedNodes = function () {\n        var _this = this;\n        var camera = this.camera;\n        var sizeRatio = Math.pow(camera.getState().ratio, 0.5);\n        var context = this.canvasContexts.hovers;\n        // Clearing\n        context.clearRect(0, 0, this.width, this.height);\n        // Rendering\n        var render = function (node) {\n            var data = _this.nodeDataCache[node];\n            var _a = camera.framedGraphToViewport({ width: _this.width, height: _this.height }, data), x = _a.x, y = _a.y;\n            var size = data.size / sizeRatio;\n            _this.settings.hoverRenderer(context, {\n                key: node,\n                label: data.label,\n                color: data.color,\n                size: size,\n                x: x,\n                y: y,\n            }, _this.settings);\n        };\n        if (this.hoveredNode) {\n            render(this.hoveredNode);\n        }\n        this.highlightedNodes.forEach(render);\n    };\n    /**\n     * Method used to schedule a hover render.\n     *\n     */\n    Sigma.prototype.scheduleHighlightedNodesRender = function () {\n        var _this = this;\n        if (this.renderHighlightedNodesFrame || this.renderFrame)\n            return;\n        this.renderHighlightedNodesFrame = utils_1.requestFrame(function () {\n            // Resetting state\n            _this.renderHighlightedNodesFrame = null;\n            // Rendering\n            _this.renderHighlightedNodes();\n            _this.renderEdgeLabels();\n        });\n    };\n    /**\n     * Method used to render.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.render = function () {\n        // If a render was scheduled, we cancel it\n        if (this.renderFrame) {\n            utils_1.cancelFrame(this.renderFrame);\n            this.renderFrame = null;\n            this.needToProcess = false;\n            this.needToSoftProcess = false;\n        }\n        // First we need to resize\n        this.resize();\n        // Clearing the canvases\n        this.clear();\n        // If we have no nodes we can stop right there\n        if (!this.graph.order)\n            return this;\n        // TODO: improve this heuristic or move to the captor itself?\n        // TODO: deal with the touch captor here as well\n        var mouseCaptor = this.mouseCaptor;\n        var moving = this.camera.isAnimated() ||\n            mouseCaptor.isMoving ||\n            mouseCaptor.draggedEvents ||\n            mouseCaptor.currentWheelDirection;\n        // Then we need to extract a matrix from the camera\n        var cameraState = this.camera.getState(), cameraMatrix = utils_1.matrixFromCamera(cameraState, {\n            width: this.width,\n            height: this.height,\n        });\n        var program;\n        // Drawing nodes\n        program = this.nodePrograms[this.settings.defaultNodeType];\n        program.render({\n            matrix: cameraMatrix,\n            width: this.width,\n            height: this.height,\n            ratio: cameraState.ratio,\n            nodesPowRatio: 0.5,\n            scalingRatio: WEBGL_OVERSAMPLING_RATIO,\n        });\n        // Drawing edges\n        if (!this.settings.hideEdgesOnMove || !moving) {\n            program = this.edgePrograms[this.settings.defaultEdgeType];\n            program.render({\n                matrix: cameraMatrix,\n                width: this.width,\n                height: this.height,\n                ratio: cameraState.ratio,\n                edgesPowRatio: 0.5,\n                scalingRatio: WEBGL_OVERSAMPLING_RATIO,\n            });\n        }\n        // Do not display labels on move per setting\n        if (this.settings.hideLabelsOnMove && moving)\n            return this;\n        this.renderLabels();\n        this.renderEdgeLabels();\n        this.renderHighlightedNodes();\n        return this;\n    };\n    /**---------------------------------------------------------------------------\n     * Public API.\n     **---------------------------------------------------------------------------\n     */\n    /**\n     * Method returning the renderer's camera.\n     *\n     * @return {Camera}\n     */\n    Sigma.prototype.getCamera = function () {\n        return this.camera;\n    };\n    /**\n     * Method returning the renderer's graph.\n     *\n     * @return {Graph}\n     */\n    Sigma.prototype.getGraph = function () {\n        return this.graph;\n    };\n    /**\n     * Method returning the mouse captor.\n     *\n     * @return {MouseCaptor}\n     */\n    Sigma.prototype.getMouseCaptor = function () {\n        return this.mouseCaptor;\n    };\n    /**\n     * Method returning the touch captor.\n     *\n     * @return {TouchCaptor}\n     */\n    Sigma.prototype.getTouchCaptor = function () {\n        return this.touchCaptor;\n    };\n    /**\n     * Method returning the current renderer's dimensions.\n     *\n     * @return {Dimensions}\n     */\n    Sigma.prototype.getDimensions = function () {\n        return { width: this.width, height: this.height };\n    };\n    /**\n     * Method used to get all the sigma node attributes.\n     * It's usefull for example to get the position of a node\n     * and to get values that are set by the nodeReducer\n     *\n     * @param  {string} key - The node's key.\n     * @return {Partial<NodeAttributes>} A copy of the desired node's attribute or undefined if not found\n     */\n    Sigma.prototype.getNodeAttributes = function (key) {\n        var node = this.nodeDataCache[key];\n        return node ? Object.assign({}, node) : undefined;\n    };\n    /**\n     * Method used to get all the sigma edge attributes.\n     * It's usefull for example to get values that are set by the edgeReducer.\n     *\n     * @param  {string} key - The edge's key.\n     * @return {Partial<EdgeAttributes> | undefined} A copy of the desired edge's attribute or undefined if not found\n     */\n    Sigma.prototype.getEdgeAttributes = function (key) {\n        var edge = this.edgeDataCache[key];\n        return edge ? Object.assign({}, edge) : undefined;\n    };\n    /**\n     * Method returning the current value for a given setting key.\n     *\n     * @param  {string} key - The setting key to get.\n     * @return {any} The value attached to this setting key or undefined if not found\n     */\n    Sigma.prototype.getSetting = function (key) {\n        return this.settings[key];\n    };\n    /**\n     * Method setting the value of a given setting key. Note that this will schedule\n     * a new render next frame.\n     *\n     * @param  {string} key - The setting key to set.\n     * @param  {any}    value - The value to set.\n     * @return {Sigma}\n     */\n    Sigma.prototype.setSetting = function (key, value) {\n        this.settings[key] = value;\n        settings_1.validateSettings(this.settings);\n        this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n        this.scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method updating the value of a given setting key using the provided function.\n     * Note that this will schedule a new render next frame.\n     *\n     * @param  {string} key - The setting key to set.\n     * @param  {any}    value - The value to set.\n     * @return {Sigma}\n     */\n    Sigma.prototype.updateSetting = function (key, updater) {\n        this.settings[key] = updater(this.settings[key]);\n        settings_1.validateSettings(this.settings);\n        this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n        this.scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method used to resize the renderer.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.resize = function () {\n        var previousWidth = this.width, previousHeight = this.height;\n        this.width = this.container.offsetWidth;\n        this.height = this.container.offsetHeight;\n        if (this.width === 0)\n            throw new Error(\"Sigma: container has no width.\");\n        if (this.height === 0)\n            throw new Error(\"Sigma: container has no height.\");\n        // If nothing has changed, we can stop right here\n        if (previousWidth === this.width && previousHeight === this.height)\n            return this;\n        // Sizing dom elements\n        for (var id in this.elements) {\n            var element = this.elements[id];\n            element.style.width = this.width + \"px\";\n            element.style.height = this.height + \"px\";\n        }\n        // Sizing canvas contexts\n        for (var id in this.canvasContexts) {\n            this.elements[id].setAttribute(\"width\", this.width * PIXEL_RATIO + \"px\");\n            this.elements[id].setAttribute(\"height\", this.height * PIXEL_RATIO + \"px\");\n            if (PIXEL_RATIO !== 1)\n                this.canvasContexts[id].scale(PIXEL_RATIO, PIXEL_RATIO);\n        }\n        // Sizing WebGL contexts\n        for (var id in this.webGLContexts) {\n            this.elements[id].setAttribute(\"width\", this.width * WEBGL_OVERSAMPLING_RATIO + \"px\");\n            this.elements[id].setAttribute(\"height\", this.height * WEBGL_OVERSAMPLING_RATIO + \"px\");\n            this.webGLContexts[id].viewport(0, 0, this.width * WEBGL_OVERSAMPLING_RATIO, this.height * WEBGL_OVERSAMPLING_RATIO);\n        }\n        return this;\n    };\n    /**\n     * Method used to clear all the canvases.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.clear = function () {\n        this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT);\n        this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT);\n        this.canvasContexts.labels.clearRect(0, 0, this.width, this.height);\n        this.canvasContexts.hovers.clearRect(0, 0, this.width, this.height);\n        this.canvasContexts.edgeLabels.clearRect(0, 0, this.width, this.height);\n        return this;\n    };\n    /**\n     * Method used to refresh all computed data.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.refresh = function () {\n        // Do we need to process data?\n        if (this.needToProcess) {\n            this.process();\n        }\n        else if (this.needToSoftProcess) {\n            this.process(true);\n        }\n        // Resetting state\n        this.needToProcess = false;\n        this.needToSoftProcess = false;\n        // Rendering\n        this.render();\n        return this;\n    };\n    /**\n     * Method used to refresh all computed data, at the next available frame.\n     * If this method has already been called this frame, then it will only render once at the next available frame.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.scheduleRefresh = function () {\n        var _this = this;\n        if (!this.renderFrame) {\n            this.renderFrame = utils_1.requestFrame(function () {\n                _this.refresh();\n                _this.renderFrame = null;\n            });\n        }\n        return this;\n    };\n    /**\n     * Method used to translate a point's coordinates from the viewport system (pixel distance from the top-left of the\n     * stage) to the graph system (the reference system of data as they are in the given graph instance).\n     *\n     * @param {Coordinates} viewportPoint\n     */\n    Sigma.prototype.viewportToGraph = function (viewportPoint) {\n        return this.normalizationFunction.inverse(this.camera.viewportToFramedGraph(this.getDimensions(), viewportPoint));\n    };\n    /**\n     * Method used to translate a point's coordinates from the graph system (the reference system of data as they are in\n     * the given graph instance) to the viewport system (pixel distance from the top-left of the stage).\n     *\n     * @param {Coordinates} graphPoint\n     */\n    Sigma.prototype.graphToViewport = function (graphPoint) {\n        return this.camera.framedGraphToViewport(this.getDimensions(), this.normalizationFunction(graphPoint));\n    };\n    /**\n     * Method used to shut the container & release event listeners.\n     *\n     * @return {undefined}\n     */\n    Sigma.prototype.kill = function () {\n        var graph = this.graph;\n        // Emitting \"kill\" events so that plugins and such can cleanup\n        this.emit(\"kill\");\n        // Releasing events\n        this.removeAllListeners();\n        // Releasing camera handlers\n        this.camera.removeListener(\"updated\", this.activeListeners.camera);\n        // Releasing DOM events & captors\n        window.removeEventListener(\"resize\", this.activeListeners.handleResize);\n        this.mouseCaptor.kill();\n        this.touchCaptor.kill();\n        // Releasing graph handlers\n        graph.removeListener(\"nodeAdded\", this.activeListeners.addNodeGraphUpdate);\n        graph.removeListener(\"nodeDropped\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.removeListener(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgeAdded\", this.activeListeners.addEdgeGraphUpdate);\n        graph.removeListener(\"edgeDropped\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.removeListener(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgesCleared\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"cleared\", this.activeListeners.graphUpdate);\n        // Releasing cache & state\n        this.quadtree = new quadtree_1.default();\n        this.nodeDataCache = {};\n        this.edgeDataCache = {};\n        this.highlightedNodes = new Set();\n        this.displayedLabels = new Set();\n        // Clearing frames\n        if (this.renderFrame) {\n            utils_1.cancelFrame(this.renderFrame);\n            this.renderFrame = null;\n        }\n        if (this.renderHighlightedNodesFrame) {\n            utils_1.cancelFrame(this.renderHighlightedNodesFrame);\n            this.renderHighlightedNodesFrame = null;\n        }\n        // Destroying canvases\n        var container = this.container;\n        while (container.firstChild)\n            container.removeChild(container.firstChild);\n    };\n    return Sigma;\n}(events_1.EventEmitter));\nexports.default = Sigma;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * Graphology Extent\n * ==================\n *\n * Simple function returning the extent of selected attributes of the graph.\n */\nvar isGraph = require('graphology-utils/is-graph');\n\n/**\n * Function returning the extent of the selected node attributes.\n *\n * @param  {Graph}        graph     - Target graph.\n * @param  {string|array} attribute - Single or multiple attributes.\n * @return {array|object}\n */\nfunction nodeExtent(graph, attribute) {\n  if (!isGraph(graph))\n    throw new Error('graphology-metrics/extent: the given graph is not a valid graphology instance.');\n\n  var attributes = [].concat(attribute);\n\n  var value,\n      key,\n      a;\n\n  var results = {};\n\n  for (a = 0; a < attributes.length; a++) {\n    key = attributes[a];\n\n    results[key] = [Infinity, -Infinity];\n  }\n\n  graph.forEachNode(function(node, data) {\n    for (a = 0; a < attributes.length; a++) {\n      key = attributes[a];\n      value = data[key];\n\n      if (value < results[key][0])\n        results[key][0] = value;\n\n      if (value > results[key][1])\n        results[key][1] = value;\n    }\n  });\n\n  return typeof attribute === 'string' ? results[attribute] : results;\n}\n\n/**\n * Function returning the extent of the selected edge attributes.\n *\n * @param  {Graph}        graph     - Target graph.\n * @param  {string|array} attribute - Single or multiple attributes.\n * @return {array|object}\n */\nfunction edgeExtent(graph, attribute) {\n  if (!isGraph(graph))\n    throw new Error('graphology-metrics/extent: the given graph is not a valid graphology instance.');\n\n  var attributes = [].concat(attribute);\n\n  var value,\n      key,\n      a;\n\n  var results = {};\n\n  for (a = 0; a < attributes.length; a++) {\n    key = attributes[a];\n\n    results[key] = [Infinity, -Infinity];\n  }\n\n  graph.forEachEdge(function(edge, data) {\n    for (a = 0; a < attributes.length; a++) {\n      key = attributes[a];\n      value = data[key];\n\n      if (value < results[key][0])\n        results[key][0] = value;\n\n      if (value > results[key][1])\n        results[key][1] = value;\n    }\n  });\n\n  return typeof attribute === 'string' ? results[attribute] : results;\n}\n\n/**\n * Exporting.\n */\nvar extent = nodeExtent;\nextent.nodeExtent = nodeExtent;\nextent.edgeExtent = edgeExtent;\n\nmodule.exports = extent;\n","/**\n * Graphology isGraph\n * ===================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology instance.\n */\n\n/**\n * Checking the value is a graphology instance.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraph(value) {\n  return (\n    value !== null &&\n    typeof value === 'object' &&\n    typeof value.addUndirectedEdgeWithKey === 'function' &&\n    typeof value.dropNode === 'function' &&\n    typeof value.multi === 'boolean'\n  );\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js Camera Class\n * ======================\n *\n * Class designed to store camera information & used to update it.\n * @module\n */\nvar events_1 = require(\"events\");\nvar animate_1 = require(\"../utils/animate\");\nvar easings_1 = __importDefault(require(\"../utils/easings\"));\nvar utils_1 = require(\"../utils\");\n/**\n * Defaults.\n */\nvar DEFAULT_ZOOMING_RATIO = 1.5;\n// TODO: animate options = number polymorphism?\n// TODO: pan, zoom, unzoom, reset, rotate, zoomTo\n// TODO: add width / height to camera and add #.resize\n// TODO: bind camera to renderer rather than sigma\n// TODO: add #.graphToDisplay, #.displayToGraph, batch methods later\n/**\n * Camera class\n *\n * @constructor\n */\nvar Camera = /** @class */ (function (_super) {\n    __extends(Camera, _super);\n    function Camera() {\n        var _this = _super.call(this) || this;\n        _this.x = 0.5;\n        _this.y = 0.5;\n        _this.angle = 0;\n        _this.ratio = 1;\n        _this.nextFrame = null;\n        _this.enabled = true;\n        // State\n        _this.previousState = _this.getState();\n        return _this;\n    }\n    /**\n     * Static method used to create a Camera object with a given state.\n     *\n     * @param state\n     * @return {Camera}\n     */\n    Camera.from = function (state) {\n        var camera = new Camera();\n        return camera.setState(state);\n    };\n    /**\n     * Method used to enable the camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.enable = function () {\n        this.enabled = true;\n        return this;\n    };\n    /**\n     * Method used to disable the camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.disable = function () {\n        this.enabled = false;\n        return this;\n    };\n    /**\n     * Method used to retrieve the camera's current state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.getState = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            angle: this.angle,\n            ratio: this.ratio,\n        };\n    };\n    /**\n     * Method used to retrieve the camera's previous state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.getPreviousState = function () {\n        var state = this.previousState;\n        return {\n            x: state.x,\n            y: state.y,\n            angle: state.angle,\n            ratio: state.ratio,\n        };\n    };\n    /**\n     * Method used to check whether the camera is currently being animated.\n     *\n     * @return {boolean}\n     */\n    Camera.prototype.isAnimated = function () {\n        return !!this.nextFrame;\n    };\n    /**\n     * Method returning the coordinates of a point from the framed graph system to the\n     * viewport system.\n     *\n     * @param  {object} dimensions  - Dimensions of the viewport.\n     * @param  {object} coordinates - Coordinates of the point.\n     * @return {object}             - The point coordinates in the viewport.\n     */\n    Camera.prototype.framedGraphToViewport = function (dimensions, coordinates) {\n        var smallestDimension = Math.min(dimensions.width, dimensions.height);\n        var dx = smallestDimension / dimensions.width;\n        var dy = smallestDimension / dimensions.height;\n        var ratio = this.ratio / smallestDimension;\n        // Align with center of the graph:\n        var x1 = (coordinates.x - this.x) / ratio;\n        var y1 = (this.y - coordinates.y) / ratio;\n        // Rotate:\n        var x2 = x1 * Math.cos(this.angle) - y1 * Math.sin(this.angle);\n        var y2 = y1 * Math.cos(this.angle) + x1 * Math.sin(this.angle);\n        return {\n            // Translate to center of screen\n            x: x2 + smallestDimension / 2 / dx,\n            y: y2 + smallestDimension / 2 / dy,\n        };\n    };\n    /**\n     * Method returning the coordinates of a point from the viewport system to the\n     * framed graph system.\n     *\n     * @param  {object} dimensions  - Dimensions of the viewport.\n     * @param  {object} coordinates - Coordinates of the point.\n     * @return {object}             - The point coordinates in the graph frame.\n     */\n    Camera.prototype.viewportToFramedGraph = function (dimensions, coordinates) {\n        var _a;\n        var smallestDimension = Math.min(dimensions.width, dimensions.height);\n        var dx = smallestDimension / dimensions.width;\n        var dy = smallestDimension / dimensions.height;\n        var ratio = this.ratio / smallestDimension;\n        // Align with center of the graph:\n        var x = coordinates.x - smallestDimension / 2 / dx;\n        var y = coordinates.y - smallestDimension / 2 / dy;\n        // Rotate:\n        _a = __read([\n            x * Math.cos(-this.angle) - y * Math.sin(-this.angle),\n            y * Math.cos(-this.angle) + x * Math.sin(-this.angle),\n        ], 2), x = _a[0], y = _a[1];\n        return {\n            x: x * ratio + this.x,\n            y: -y * ratio + this.y,\n        };\n    };\n    /**\n     * Method returning the abstract rectangle containing the graph according\n     * to the camera's state.\n     *\n     * @return {object} - The view's rectangle.\n     */\n    Camera.prototype.viewRectangle = function (dimensions) {\n        // TODO: reduce relative margin?\n        var marginX = (0 * dimensions.width) / 8, marginY = (0 * dimensions.height) / 8;\n        var p1 = this.viewportToFramedGraph(dimensions, { x: 0 - marginX, y: 0 - marginY }), p2 = this.viewportToFramedGraph(dimensions, { x: dimensions.width + marginX, y: 0 - marginY }), h = this.viewportToFramedGraph(dimensions, { x: 0, y: dimensions.height + marginY });\n        return {\n            x1: p1.x,\n            y1: p1.y,\n            x2: p2.x,\n            y2: p2.y,\n            height: p2.y - h.y,\n        };\n    };\n    /**\n     * Method used to set the camera's state.\n     *\n     * @param  {object} state - New state.\n     * @return {Camera}\n     */\n    Camera.prototype.setState = function (state) {\n        if (!this.enabled)\n            return this;\n        // TODO: validations\n        // TODO: update by function\n        // Keeping track of last state\n        this.previousState = this.getState();\n        if (state.x)\n            this.x = state.x;\n        if (state.y)\n            this.y = state.y;\n        if (state.angle)\n            this.angle = state.angle;\n        if (state.ratio)\n            this.ratio = state.ratio;\n        // Emitting\n        // TODO: don't emit if nothing changed?\n        this.emit(\"updated\", this.getState());\n        return this;\n    };\n    /**\n     * Method used to (un)zoom, while preserving the position of a viewport point.\n     * Used for instance to\n     *\n     * @param viewportTarget\n     * @param dimensions\n     * @param ratio\n     * @return {CameraState}\n     */\n    Camera.prototype.getViewportZoomedState = function (viewportTarget, dimensions, ratio) {\n        // TODO: handle max zoom\n        var ratioDiff = ratio / this.ratio;\n        var center = {\n            x: dimensions.width / 2,\n            y: dimensions.height / 2,\n        };\n        var graphMousePosition = this.viewportToFramedGraph(dimensions, viewportTarget);\n        var graphCenterPosition = this.viewportToFramedGraph(dimensions, center);\n        return __assign(__assign({}, this.getState()), { x: (graphMousePosition.x - graphCenterPosition.x) * (1 - ratioDiff) + this.x, y: (graphMousePosition.y - graphCenterPosition.y) * (1 - ratioDiff) + this.y, ratio: ratio });\n    };\n    /**\n     * Method used to animate the camera.\n     *\n     * @param  {object}                    state      - State to reach eventually.\n     * @param  {object}                    opts       - Options:\n     * @param  {number}                      duration - Duration of the animation.\n     * @param  {string | number => number}   easing   - Easing function or name of an existing one\n     * @param  {function}                  callback   - Callback\n     */\n    Camera.prototype.animate = function (state, opts, callback) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        var options = Object.assign({}, animate_1.ANIMATE_DEFAULTS, opts);\n        var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n        // State\n        var start = Date.now(), initialState = this.getState();\n        // Function performing the animation\n        var fn = function () {\n            var t = (Date.now() - start) / options.duration;\n            // The animation is over:\n            if (t >= 1) {\n                _this.nextFrame = null;\n                _this.setState(state);\n                if (_this.animationCallback) {\n                    _this.animationCallback.call(null);\n                    _this.animationCallback = undefined;\n                }\n                return;\n            }\n            var coefficient = easing(t);\n            var newState = {};\n            if (state.x)\n                newState.x = initialState.x + (state.x - initialState.x) * coefficient;\n            if (state.y)\n                newState.y = initialState.y + (state.y - initialState.y) * coefficient;\n            if (state.angle)\n                newState.angle = initialState.angle + (state.angle - initialState.angle) * coefficient;\n            if (state.ratio)\n                newState.ratio = initialState.ratio + (state.ratio - initialState.ratio) * coefficient;\n            _this.setState(newState);\n            _this.nextFrame = utils_1.requestFrame(fn);\n        };\n        if (this.nextFrame) {\n            utils_1.cancelFrame(this.nextFrame);\n            if (this.animationCallback)\n                this.animationCallback.call(null);\n            this.nextFrame = utils_1.requestFrame(fn);\n        }\n        else {\n            fn();\n        }\n        this.animationCallback = callback;\n    };\n    /**\n     * Method used to zoom the camera.\n     *\n     * @param  {number|object} factorOrOptions - Factor or options.\n     * @return {function}\n     */\n    Camera.prototype.animatedZoom = function (factorOrOptions) {\n        if (!factorOrOptions) {\n            this.animate({ ratio: this.ratio / DEFAULT_ZOOMING_RATIO });\n        }\n        else {\n            if (typeof factorOrOptions === \"number\")\n                return this.animate({ ratio: this.ratio / factorOrOptions });\n            else\n                this.animate({\n                    ratio: this.ratio / (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO),\n                }, factorOrOptions);\n        }\n    };\n    /**\n     * Method used to unzoom the camera.\n     *\n     * @param  {number|object} factorOrOptions - Factor or options.\n     */\n    Camera.prototype.animatedUnzoom = function (factorOrOptions) {\n        if (!factorOrOptions) {\n            this.animate({ ratio: this.ratio * DEFAULT_ZOOMING_RATIO });\n        }\n        else {\n            if (typeof factorOrOptions === \"number\")\n                return this.animate({ ratio: this.ratio * factorOrOptions });\n            else\n                this.animate({\n                    ratio: this.ratio * (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO),\n                }, factorOrOptions);\n        }\n    };\n    /**\n     * Method used to reset the camera.\n     *\n     * @param  {object} options - Options.\n     */\n    Camera.prototype.animatedReset = function (options) {\n        this.animate({\n            x: 0.5,\n            y: 0.5,\n            ratio: 1,\n            angle: 0,\n        }, options);\n    };\n    /**\n     * Returns a new Camera instance, with the same state as the current camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.copy = function () {\n        return Camera.from(this.getState());\n    };\n    return Camera;\n}(events_1.EventEmitter));\nexports.default = Camera;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.animateNodes = exports.ANIMATE_DEFAULTS = void 0;\nvar index_1 = require(\"./index\");\nvar easings_1 = __importDefault(require(\"./easings\"));\nexports.ANIMATE_DEFAULTS = {\n    easing: \"quadraticInOut\",\n    duration: 150,\n};\n/**\n * Function used to animate the nodes.\n */\nfunction animateNodes(graph, targets, opts, callback) {\n    var options = Object.assign({}, exports.ANIMATE_DEFAULTS, opts);\n    var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n    var start = Date.now();\n    var startPositions = {};\n    for (var node in targets) {\n        var attrs = targets[node];\n        startPositions[node] = {};\n        for (var k in attrs)\n            startPositions[node][k] = graph.getNodeAttribute(node, k);\n    }\n    var frame = null;\n    var step = function () {\n        var p = (Date.now() - start) / options.duration;\n        if (p >= 1) {\n            // Animation is done\n            for (var node in targets) {\n                var attrs = targets[node];\n                for (var k in attrs)\n                    graph.setNodeAttribute(node, k, attrs[k]);\n            }\n            if (typeof callback === \"function\")\n                callback();\n            return;\n        }\n        p = easing(p);\n        for (var node in targets) {\n            var attrs = targets[node];\n            var s = startPositions[node];\n            for (var k in attrs)\n                graph.setNodeAttribute(node, k, attrs[k] * p + s[k] * (1 - p));\n        }\n        frame = index_1.requestFrame(step);\n    };\n    step();\n    return function () {\n        if (frame)\n            index_1.cancelFrame(frame);\n    };\n}\nexports.animateNodes = animateNodes;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateGraph = exports.canUse32BitsIndices = exports.extractPixel = exports.matrixFromCamera = exports.floatColor = exports.zIndexOrdering = exports.createNormalizationFunction = exports.getPixelRatio = exports.createElement = exports.cancelFrame = exports.requestFrame = exports.assignDeep = exports.isPlainObject = void 0;\nvar is_graph_1 = __importDefault(require(\"graphology-utils/is-graph\"));\nvar matrices_1 = require(\"./matrices\");\n/**\n * Checks whether the given value is a plain object.\n *\n * @param  {mixed}   value - Target value.\n * @return {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\nfunction isPlainObject(value) {\n    return typeof value === \"object\" && value !== null && value.constructor === Object;\n}\nexports.isPlainObject = isPlainObject;\n/**\n * Very simple recursive Object.assign-like function.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assignDeep(target) {\n    var objects = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        objects[_i - 1] = arguments[_i];\n    }\n    target = target || {};\n    for (var i = 0, l = objects.length; i < l; i++) {\n        var o = objects[i];\n        if (!o)\n            continue;\n        for (var k in o) {\n            if (isPlainObject(o[k])) {\n                target[k] = assignDeep(target[k], o[k]);\n            }\n            else {\n                target[k] = o[k];\n            }\n        }\n    }\n    return target;\n}\nexports.assignDeep = assignDeep;\n/**\n * Just some dirty trick to make requestAnimationFrame and cancelAnimationFrame \"work\" in Node.js, for unit tests:\n */\nexports.requestFrame = typeof requestAnimationFrame !== \"undefined\"\n    ? function (callback) { return requestAnimationFrame(callback); }\n    : function (callback) { return setTimeout(callback, 0); };\nexports.cancelFrame = typeof cancelAnimationFrame !== \"undefined\"\n    ? function (requestID) { return cancelAnimationFrame(requestID); }\n    : function (requestID) { return clearTimeout(requestID); };\n/**\n * Function used to create DOM elements easily.\n *\n * @param  {string} tag        - Tag name of the element to create.\n * @param  {object} style      - Styles map.\n * @param  {object} attributes - Attributes map.\n * @return {HTMLElement}\n */\nfunction createElement(tag, style, attributes) {\n    var element = document.createElement(tag);\n    if (style) {\n        for (var k in style) {\n            element.style[k] = style[k];\n        }\n    }\n    if (attributes) {\n        for (var k in attributes) {\n            element.setAttribute(k, attributes[k]);\n        }\n    }\n    return element;\n}\nexports.createElement = createElement;\n/**\n * Function returning the browser's pixel ratio.\n *\n * @return {number}\n */\nfunction getPixelRatio() {\n    if (typeof window.devicePixelRatio !== \"undefined\")\n        return window.devicePixelRatio;\n    return 1;\n}\nexports.getPixelRatio = getPixelRatio;\nfunction createNormalizationFunction(extent) {\n    var _a = __read(extent.x, 2), minX = _a[0], maxX = _a[1], _b = __read(extent.y, 2), minY = _b[0], maxY = _b[1];\n    var ratio = Math.max(maxX - minX, maxY - minY);\n    if (ratio === 0)\n        ratio = 1;\n    var dX = (maxX + minX) / 2, dY = (maxY + minY) / 2;\n    var fn = function (data) {\n        return {\n            x: 0.5 + (data.x - dX) / ratio,\n            y: 0.5 + (data.y - dY) / ratio,\n        };\n    };\n    // TODO: possibility to apply this in batch over array of indices\n    fn.applyTo = function (data) {\n        data.x = 0.5 + (data.x - dX) / ratio;\n        data.y = 0.5 + (data.y - dY) / ratio;\n    };\n    fn.inverse = function (data) {\n        return {\n            x: dX + ratio * (data.x - 0.5),\n            y: dY + ratio * (data.y - 0.5),\n        };\n    };\n    fn.ratio = ratio;\n    return fn;\n}\nexports.createNormalizationFunction = createNormalizationFunction;\n/**\n * Function ordering the given elements in reverse z-order so they drawn\n * the correct way.\n *\n * @param  {number}   extent   - [min, max] z values.\n * @param  {function} getter   - Z attribute getter function.\n * @param  {array}    elements - The array to sort.\n * @return {array} - The sorted array.\n */\nfunction zIndexOrdering(extent, getter, elements) {\n    // If k is > n, we'll use a standard sort\n    return elements.sort(function (a, b) {\n        var zA = getter(a) || 0, zB = getter(b) || 0;\n        if (zA < zB)\n            return -1;\n        if (zA > zB)\n            return 1;\n        return 0;\n    });\n    // TODO: counting sort optimization\n}\nexports.zIndexOrdering = zIndexOrdering;\n/**\n * WebGL utils\n * ===========\n */\n/**\n * Memoized function returning a float-encoded color from various string\n * formats describing colors.\n */\nvar FLOAT_COLOR_CACHE = {};\nvar INT8 = new Int8Array(4);\nvar INT32 = new Int32Array(INT8.buffer, 0, 1);\nvar FLOAT32 = new Float32Array(INT8.buffer, 0, 1);\nvar RGBA_TEST_REGEX = /^\\s*rgba?\\s*\\(/;\nvar RGBA_EXTRACT_REGEX = /^\\s*rgba?\\s*\\(\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*,\\s*([0-9]*)(?:\\s*,\\s*(.*)?)?\\)\\s*$/;\nfunction floatColor(val) {\n    // If the color is already computed, we yield it\n    if (typeof FLOAT_COLOR_CACHE[val] !== \"undefined\")\n        return FLOAT_COLOR_CACHE[val];\n    var r = 0, g = 0, b = 0, a = 1;\n    // Handling hexadecimal notation\n    if (val[0] === \"#\") {\n        if (val.length === 4) {\n            r = parseInt(val.charAt(1) + val.charAt(1), 16);\n            g = parseInt(val.charAt(2) + val.charAt(2), 16);\n            b = parseInt(val.charAt(3) + val.charAt(3), 16);\n        }\n        else {\n            r = parseInt(val.charAt(1) + val.charAt(2), 16);\n            g = parseInt(val.charAt(3) + val.charAt(4), 16);\n            b = parseInt(val.charAt(5) + val.charAt(6), 16);\n        }\n    }\n    // Handling rgb notation\n    else if (RGBA_TEST_REGEX.test(val)) {\n        var match = val.match(RGBA_EXTRACT_REGEX);\n        if (match) {\n            r = +match[1];\n            g = +match[2];\n            b = +match[3];\n            if (match[4])\n                a = +match[4];\n        }\n    }\n    a = (a * 255) | 0;\n    INT32[0] = ((a << 24) | (b << 16) | (g << 8) | r) & 0xfeffffff;\n    var color = FLOAT32[0];\n    FLOAT_COLOR_CACHE[val] = color;\n    return color;\n}\nexports.floatColor = floatColor;\n/**\n * Function returning a matrix from the current state of the camera.\n */\n// TODO: it's possible to optimize this drastically!\nfunction matrixFromCamera(state, dimensions) {\n    var angle = state.angle, ratio = state.ratio, x = state.x, y = state.y;\n    var width = dimensions.width, height = dimensions.height;\n    var matrix = matrices_1.identity();\n    var smallestDimension = Math.min(width, height);\n    var cameraCentering = matrices_1.translate(matrices_1.identity(), -x, -y), cameraScaling = matrices_1.scale(matrices_1.identity(), 1 / ratio), cameraRotation = matrices_1.rotate(matrices_1.identity(), -angle), viewportScaling = matrices_1.scale(matrices_1.identity(), 2 * (smallestDimension / width), 2 * (smallestDimension / height));\n    // Logical order is reversed\n    matrices_1.multiply(matrix, viewportScaling);\n    matrices_1.multiply(matrix, cameraRotation);\n    matrices_1.multiply(matrix, cameraScaling);\n    matrices_1.multiply(matrix, cameraCentering);\n    return matrix;\n}\nexports.matrixFromCamera = matrixFromCamera;\n/**\n * Function extracting the color at the given pixel.\n */\nfunction extractPixel(gl, x, y, array) {\n    var data = array || new Uint8Array(4);\n    gl.readPixels(x, y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    return data;\n}\nexports.extractPixel = extractPixel;\n/**\n * Function used to know whether given webgl context can use 32 bits indices.\n */\nfunction canUse32BitsIndices(gl) {\n    var webgl2 = typeof WebGL2RenderingContext !== \"undefined\" && gl instanceof WebGL2RenderingContext;\n    return webgl2 || !!gl.getExtension(\"OES_element_index_uint\");\n}\nexports.canUse32BitsIndices = canUse32BitsIndices;\n/**\n * Check if the graph variable is a valid graph, and if sigma can render it.\n */\nfunction validateGraph(graph) {\n    // check if it's a valid graphology instance\n    if (!is_graph_1.default(graph))\n        throw new Error(\"Sigma: invalid graph instance.\");\n    // check if nodes have x/y attributes\n    graph.forEachNode(function (key, attributes) {\n        if (!Number.isFinite(attributes.x) || !Number.isFinite(attributes.y)) {\n            throw new Error(\"Sigma: Coordinates of node \" + key + \" are invalid. A node must have a numeric 'x' and 'y' attribute.\");\n        }\n    });\n}\nexports.validateGraph = validateGraph;\n","/**\n * Graphology isGraph\n * ===================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology instance.\n */\n\n/**\n * Checking the value is a graphology instance.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraph(value) {\n  return (\n    value !== null &&\n    typeof value === 'object' &&\n    typeof value.addUndirectedEdgeWithKey === 'function' &&\n    typeof value.dropNode === 'function' &&\n    typeof value.multi === 'boolean'\n  );\n};\n","\"use strict\";\n/**\n * Sigma.js WebGL Matrices Helpers\n * ================================\n *\n * Matrices-related helper functions used by sigma's WebGL renderer.\n * @module\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiply = exports.translate = exports.rotate = exports.scale = exports.identity = void 0;\nfunction identity() {\n    return Float32Array.of(1, 0, 0, 0, 1, 0, 0, 0, 1);\n}\nexports.identity = identity;\n// TODO: optimize\nfunction scale(m, x, y) {\n    m[0] = x;\n    m[4] = typeof y === \"number\" ? y : x;\n    return m;\n}\nexports.scale = scale;\nfunction rotate(m, r) {\n    var s = Math.sin(r), c = Math.cos(r);\n    m[0] = c;\n    m[1] = s;\n    m[3] = -s;\n    m[4] = c;\n    return m;\n}\nexports.rotate = rotate;\nfunction translate(m, x, y) {\n    m[6] = x;\n    m[7] = y;\n    return m;\n}\nexports.translate = translate;\nfunction multiply(a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2];\n    var a10 = a[3], a11 = a[4], a12 = a[5];\n    var a20 = a[6], a21 = a[7], a22 = a[8];\n    var b00 = b[0], b01 = b[1], b02 = b[2];\n    var b10 = b[3], b11 = b[4], b12 = b[5];\n    var b20 = b[6], b21 = b[7], b22 = b[8];\n    a[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    a[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    a[2] = b00 * a02 + b01 * a12 + b02 * a22;\n    a[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    a[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    a[5] = b10 * a02 + b11 * a12 + b12 * a22;\n    a[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    a[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    a[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return a;\n}\nexports.multiply = multiply;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cubicInOut = exports.cubicOut = exports.cubicIn = exports.quadraticInOut = exports.quadraticOut = exports.quadraticIn = exports.linear = void 0;\n/**\n * Sigma.js Easings\n * =================\n *\n * Handy collection of easing functions.\n * @module\n */\nvar linear = function (k) { return k; };\nexports.linear = linear;\nvar quadraticIn = function (k) { return k * k; };\nexports.quadraticIn = quadraticIn;\nvar quadraticOut = function (k) { return k * (2 - k); };\nexports.quadraticOut = quadraticOut;\nvar quadraticInOut = function (k) {\n    if ((k *= 2) < 1)\n        return 0.5 * k * k;\n    return -0.5 * (--k * (k - 2) - 1);\n};\nexports.quadraticInOut = quadraticInOut;\nvar cubicIn = function (k) { return k * k * k; };\nexports.cubicIn = cubicIn;\nvar cubicOut = function (k) { return --k * k * k + 1; };\nexports.cubicOut = cubicOut;\nvar cubicInOut = function (k) {\n    if ((k *= 2) < 1)\n        return 0.5 * k * k * k;\n    return 0.5 * ((k -= 2) * k * k + 2);\n};\nexports.cubicInOut = cubicInOut;\nvar easings = {\n    linear: exports.linear,\n    quadraticIn: exports.quadraticIn,\n    quadraticOut: exports.quadraticOut,\n    quadraticInOut: exports.quadraticInOut,\n    cubicIn: exports.cubicIn,\n    cubicOut: exports.cubicOut,\n    cubicInOut: exports.cubicInOut,\n};\nexports.default = easings;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar captor_1 = __importStar(require(\"./captor\"));\n/**\n * Constants.\n */\nvar DRAG_TIMEOUT = 200;\nvar DRAGGED_EVENTS_TOLERANCE = 3;\nvar MOUSE_INERTIA_DURATION = 200;\nvar MOUSE_INERTIA_RATIO = 3;\nvar MOUSE_ZOOM_DURATION = 250;\nvar ZOOMING_RATIO = 1.7;\nvar DOUBLE_CLICK_TIMEOUT = 300;\nvar DOUBLE_CLICK_ZOOMING_RATIO = 2.2;\nvar DOUBLE_CLICK_ZOOMING_DURATION = 200;\n/**\n * Mouse captor class.\n *\n * @constructor\n */\nvar MouseCaptor = /** @class */ (function (_super) {\n    __extends(MouseCaptor, _super);\n    function MouseCaptor(container, camera) {\n        var _this = _super.call(this, container, camera) || this;\n        // State\n        _this.enabled = true;\n        _this.draggedEvents = 0;\n        _this.downStartTime = null;\n        _this.lastMouseX = null;\n        _this.lastMouseY = null;\n        _this.isMouseDown = false;\n        _this.isMoving = false;\n        _this.movingTimeout = null;\n        _this.startCameraState = null;\n        _this.clicks = 0;\n        _this.doubleClickTimeout = null;\n        _this.currentWheelDirection = 0;\n        // Binding methods\n        _this.handleClick = _this.handleClick.bind(_this);\n        _this.handleRightClick = _this.handleRightClick.bind(_this);\n        _this.handleDown = _this.handleDown.bind(_this);\n        _this.handleUp = _this.handleUp.bind(_this);\n        _this.handleMove = _this.handleMove.bind(_this);\n        _this.handleWheel = _this.handleWheel.bind(_this);\n        _this.handleOut = _this.handleOut.bind(_this);\n        // Binding events\n        container.addEventListener(\"click\", _this.handleClick, false);\n        container.addEventListener(\"contextmenu\", _this.handleRightClick, false);\n        container.addEventListener(\"mousedown\", _this.handleDown, false);\n        container.addEventListener(\"mousemove\", _this.handleMove, false);\n        container.addEventListener(\"wheel\", _this.handleWheel, false);\n        container.addEventListener(\"mouseout\", _this.handleOut, false);\n        document.addEventListener(\"mouseup\", _this.handleUp, false);\n        return _this;\n    }\n    MouseCaptor.prototype.kill = function () {\n        var container = this.container;\n        container.removeEventListener(\"click\", this.handleClick);\n        container.removeEventListener(\"contextmenu\", this.handleRightClick);\n        container.removeEventListener(\"mousedown\", this.handleDown);\n        container.removeEventListener(\"mousemove\", this.handleMove);\n        container.removeEventListener(\"wheel\", this.handleWheel);\n        container.removeEventListener(\"mouseout\", this.handleOut);\n        document.removeEventListener(\"mouseup\", this.handleUp);\n    };\n    MouseCaptor.prototype.handleClick = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        this.clicks++;\n        if (this.clicks === 2) {\n            this.clicks = 0;\n            if (typeof this.doubleClickTimeout === \"number\") {\n                clearTimeout(this.doubleClickTimeout);\n                this.doubleClickTimeout = null;\n            }\n            return this.handleDoubleClick(e);\n        }\n        setTimeout(function () {\n            _this.clicks = 0;\n            _this.doubleClickTimeout = null;\n        }, DOUBLE_CLICK_TIMEOUT);\n        // NOTE: this is here to prevent click events on drag\n        if (this.draggedEvents < DRAGGED_EVENTS_TOLERANCE)\n            this.emit(\"click\", captor_1.getMouseCoords(e));\n    };\n    MouseCaptor.prototype.handleRightClick = function (e) {\n        if (!this.enabled)\n            return;\n        this.emit(\"rightClick\", captor_1.getMouseCoords(e));\n    };\n    MouseCaptor.prototype.handleDoubleClick = function (e) {\n        if (!this.enabled)\n            return;\n        var newRatio = this.camera.getState().ratio / DOUBLE_CLICK_ZOOMING_RATIO;\n        this.camera.animate(this.camera.getViewportZoomedState({ x: captor_1.getX(e), y: captor_1.getY(e) }, {\n            width: this.container.offsetWidth,\n            height: this.container.offsetHeight,\n        }, newRatio), {\n            easing: \"quadraticInOut\",\n            duration: DOUBLE_CLICK_ZOOMING_DURATION,\n        });\n        if (e.preventDefault)\n            e.preventDefault();\n        else\n            e.returnValue = false;\n        e.stopPropagation();\n        return false;\n    };\n    MouseCaptor.prototype.handleDown = function (e) {\n        if (!this.enabled)\n            return;\n        this.startCameraState = this.camera.getState();\n        this.lastMouseX = captor_1.getX(e);\n        this.lastMouseY = captor_1.getY(e);\n        this.draggedEvents = 0;\n        this.downStartTime = Date.now();\n        // TODO: dispatch events\n        switch (e.which) {\n            default:\n                // Left button pressed\n                this.isMouseDown = true;\n                this.emit(\"mousedown\", captor_1.getMouseCoords(e));\n        }\n    };\n    MouseCaptor.prototype.handleUp = function (e) {\n        var _this = this;\n        if (!this.enabled || !this.isMouseDown)\n            return;\n        this.isMouseDown = false;\n        if (typeof this.movingTimeout === \"number\") {\n            clearTimeout(this.movingTimeout);\n            this.movingTimeout = null;\n        }\n        var x = captor_1.getX(e), y = captor_1.getY(e);\n        var cameraState = this.camera.getState(), previousCameraState = this.camera.getPreviousState();\n        if (this.isMoving) {\n            this.camera.animate({\n                x: cameraState.x + MOUSE_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n                y: cameraState.y + MOUSE_INERTIA_RATIO * (cameraState.y - previousCameraState.y),\n            }, {\n                duration: MOUSE_INERTIA_DURATION,\n                easing: \"quadraticOut\",\n            });\n        }\n        else if (this.lastMouseX !== x || this.lastMouseY !== y) {\n            this.camera.setState({\n                x: cameraState.x,\n                y: cameraState.y,\n            });\n        }\n        this.isMoving = false;\n        setTimeout(function () { return (_this.draggedEvents = 0); }, 0);\n        this.emit(\"mouseup\", captor_1.getMouseCoords(e));\n    };\n    MouseCaptor.prototype.handleMove = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        this.emit(\"mousemove\", captor_1.getMouseCoords(e));\n        if (this.isMouseDown) {\n            // TODO: dispatch events\n            this.isMoving = true;\n            this.draggedEvents++;\n            if (typeof this.movingTimeout === \"number\") {\n                clearTimeout(this.movingTimeout);\n            }\n            this.movingTimeout = window.setTimeout(function () {\n                _this.movingTimeout = null;\n                _this.isMoving = false;\n            }, DRAG_TIMEOUT);\n            var dimensions = {\n                width: this.container.offsetWidth,\n                height: this.container.offsetHeight,\n            };\n            var eX = captor_1.getX(e), eY = captor_1.getY(e);\n            var lastMouse = this.camera.viewportToFramedGraph(dimensions, {\n                x: this.lastMouseX,\n                y: this.lastMouseY,\n            });\n            var mouse = this.camera.viewportToFramedGraph(dimensions, { x: eX, y: eY });\n            var offsetX = lastMouse.x - mouse.x, offsetY = lastMouse.y - mouse.y;\n            var cameraState = this.camera.getState();\n            var x = cameraState.x + offsetX, y = cameraState.y + offsetY;\n            this.camera.setState({ x: x, y: y });\n            this.lastMouseX = eX;\n            this.lastMouseY = eY;\n        }\n        if (e.preventDefault)\n            e.preventDefault();\n        else\n            e.returnValue = false;\n        e.stopPropagation();\n        return false;\n    };\n    MouseCaptor.prototype.handleWheel = function (e) {\n        var _this = this;\n        if (e.preventDefault)\n            e.preventDefault();\n        else\n            e.returnValue = false;\n        e.stopPropagation();\n        if (!this.enabled)\n            return false;\n        var delta = captor_1.getWheelDelta(e);\n        if (!delta)\n            return false;\n        var ratioDiff = delta > 0 ? 1 / ZOOMING_RATIO : ZOOMING_RATIO;\n        var newRatio = this.camera.getState().ratio * ratioDiff;\n        var wheelDirection = delta > 0 ? 1 : -1;\n        var now = Date.now();\n        // Cancel events that are too close too each other and in the same direction:\n        if (this.currentWheelDirection === wheelDirection &&\n            this.lastWheelTriggerTime &&\n            now - this.lastWheelTriggerTime < MOUSE_ZOOM_DURATION / 5) {\n            return false;\n        }\n        this.camera.animate(this.camera.getViewportZoomedState({ x: captor_1.getX(e), y: captor_1.getY(e) }, {\n            width: this.container.offsetWidth,\n            height: this.container.offsetHeight,\n        }, newRatio), {\n            easing: \"quadraticOut\",\n            duration: MOUSE_ZOOM_DURATION,\n        }, function () {\n            _this.currentWheelDirection = 0;\n        });\n        this.currentWheelDirection = wheelDirection;\n        this.lastWheelTriggerTime = now;\n        return false;\n    };\n    MouseCaptor.prototype.handleOut = function () {\n        // TODO: dispatch event\n    };\n    return MouseCaptor;\n}(captor_1.default));\nexports.default = MouseCaptor;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getWheelDelta = exports.getTouchCoords = exports.getTouchesArray = exports.getMouseCoords = exports.getPosition = exports.getY = exports.getX = void 0;\n/**\n * Sigma.js Captor Class\n * ======================\n * @module\n */\nvar events_1 = require(\"events\");\n/**\n * Captor utils functions\n * ======================\n */\n/**\n * Extract the local X position from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The local X value of the mouse.\n */\nfunction getX(e) {\n    if (typeof e.offsetX !== \"undefined\")\n        return e.offsetX;\n    if (typeof e.clientX !== \"undefined\")\n        return e.clientX;\n    throw new Error(\"Captor: could not extract x from event.\");\n}\nexports.getX = getX;\n/**\n * Extract the local Y position from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The local Y value of the mouse.\n */\nfunction getY(e) {\n    if (typeof e.offsetY !== \"undefined\")\n        return e.offsetY;\n    if (typeof e.clientY !== \"undefined\")\n        return e.clientY;\n    throw new Error(\"Captor: could not extract y from event.\");\n}\nexports.getY = getY;\n/**\n * Extract the local X and Y coordinates from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The local Y value of the mouse.\n */\nfunction getPosition(e) {\n    return {\n        x: getX(e),\n        y: getY(e),\n    };\n}\nexports.getPosition = getPosition;\n/**\n * Convert mouse coords to sigma coords.\n *\n * @param  {event}   e   - A mouse event or touch object.\n *\n * @return {object}\n */\nfunction getMouseCoords(e) {\n    return {\n        x: getX(e),\n        y: getY(e),\n        clientX: e.clientX,\n        clientY: e.clientY,\n        ctrlKey: e.ctrlKey,\n        metaKey: e.metaKey,\n        altKey: e.altKey,\n        shiftKey: e.shiftKey,\n        // TODO: this is not ideal... But I am wondering why we don't just pass the event through\n        preventDefault: e.preventDefault.bind(e),\n        original: e,\n    };\n}\nexports.getMouseCoords = getMouseCoords;\nvar MAX_TOUCHES = 2;\nfunction getTouchesArray(touches) {\n    var arr = [];\n    for (var i = 0, l = Math.min(touches.length, MAX_TOUCHES); i < l; i++)\n        arr.push(touches[i]);\n    return arr;\n}\nexports.getTouchesArray = getTouchesArray;\n/**\n * Convert touch coords to sigma coords.\n */\nfunction getTouchCoords(e) {\n    return {\n        touches: getTouchesArray(e.touches).map(getPosition),\n        ctrlKey: e.ctrlKey,\n        metaKey: e.metaKey,\n        altKey: e.altKey,\n        shiftKey: e.shiftKey,\n        // TODO: same as for getMouseCoords\n        preventDefault: e.preventDefault.bind(e),\n        original: e,\n    };\n}\nexports.getTouchCoords = getTouchCoords;\n/**\n * Extract the wheel delta from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The wheel delta of the mouse.\n */\nfunction getWheelDelta(e) {\n    // TODO: check those ratios again to ensure a clean Chrome/Firefox compat\n    if (typeof e.deltaY !== \"undefined\")\n        return (e.deltaY * -3) / 360;\n    if (typeof e.detail !== \"undefined\")\n        return e.detail / -9;\n    throw new Error(\"Captor: could not extract delta from event.\");\n}\nexports.getWheelDelta = getWheelDelta;\n/**\n * Abstract class representing a captor like the user's mouse or touch controls.\n */\nvar Captor = /** @class */ (function (_super) {\n    __extends(Captor, _super);\n    function Captor(container, camera) {\n        var _this = _super.call(this) || this;\n        // Properties\n        _this.container = container;\n        _this.camera = camera;\n        return _this;\n    }\n    return Captor;\n}(events_1.EventEmitter));\nexports.default = Captor;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rectangleCollidesWithQuad = exports.squareCollidesWithQuad = exports.getCircumscribedAlignedRectangle = exports.isRectangleAligned = void 0;\n/**\n * Sigma.js Quad Tree Class\n * =========================\n *\n * Class implementing the quad tree data structure used to solve hovers and\n * determine which elements are currently in the scope of the camera so that\n * we don't waste time rendering things the user cannot see anyway.\n * @module\n */\n/* eslint no-nested-ternary: 0 */\n/* eslint no-constant-condition: 0 */\nvar extend_1 = __importDefault(require(\"@yomguithereal/helpers/extend\"));\n// TODO: should not ask the quadtree when the camera has the whole graph in\n// sight.\n// TODO: a square can be represented as topleft + width, saying for the quad blocks (reduce mem)\n// TODO: jsdoc\n// TODO: be sure we can handle cases overcoming boundaries (because of size) or use a maxed size\n// TODO: filtering unwanted labels beforehand through the filter function\n// NOTE: this is basically a MX-CIF Quadtree at this point\n// NOTE: need to explore R-Trees for edges\n// NOTE: need to explore 2d segment tree for edges\n// NOTE: probably can do faster using spatial hashing\n/**\n * Constants.\n *\n * Note that since we are representing a static 4-ary tree, the indices of the\n * quadrants are the following:\n *   - TOP_LEFT:     4i + b\n *   - TOP_RIGHT:    4i + 2b\n *   - BOTTOM_LEFT:  4i + 3b\n *   - BOTTOM_RIGHT: 4i + 4b\n */\nvar BLOCKS = 4, MAX_LEVEL = 5;\nvar X_OFFSET = 0, Y_OFFSET = 1, WIDTH_OFFSET = 2, HEIGHT_OFFSET = 3;\nvar TOP_LEFT = 1, TOP_RIGHT = 2, BOTTOM_LEFT = 3, BOTTOM_RIGHT = 4;\n/**\n * Geometry helpers.\n */\n/**\n * Function returning whether the given rectangle is axis-aligned.\n *\n * @param  {Rectangle} rect\n * @return {boolean}\n */\nfunction isRectangleAligned(rect) {\n    return rect.x1 === rect.x2 || rect.y1 === rect.y2;\n}\nexports.isRectangleAligned = isRectangleAligned;\n/**\n * Function returning the smallest rectangle that contains the given rectangle, and that is aligned with the axis.\n *\n * @param {Rectangle} rect\n * @return {Rectangle}\n */\nfunction getCircumscribedAlignedRectangle(rect) {\n    var width = Math.sqrt(Math.pow(rect.x2 - rect.x1, 2) + Math.pow(rect.y2 - rect.y1, 2));\n    var heightVector = {\n        x: ((rect.y1 - rect.y2) * rect.height) / width,\n        y: ((rect.x2 - rect.x1) * rect.height) / width,\n    };\n    // Compute all corners:\n    var tl = { x: rect.x1, y: rect.y1 };\n    var tr = { x: rect.x2, y: rect.y2 };\n    var bl = {\n        x: rect.x1 + heightVector.x,\n        y: rect.y1 + heightVector.y,\n    };\n    var br = {\n        x: rect.x2 + heightVector.x,\n        y: rect.y2 + heightVector.y,\n    };\n    var xL = Math.min(tl.x, tr.x, bl.x, br.x);\n    var xR = Math.max(tl.x, tr.x, bl.x, br.x);\n    var yT = Math.min(tl.y, tr.y, bl.y, br.y);\n    var yB = Math.max(tl.y, tr.y, bl.y, br.y);\n    return {\n        x1: xL,\n        y1: yT,\n        x2: xR,\n        y2: yT,\n        height: yB - yT,\n    };\n}\nexports.getCircumscribedAlignedRectangle = getCircumscribedAlignedRectangle;\n/**\n *\n * @param x1\n * @param y1\n * @param w\n * @param qx\n * @param qy\n * @param qw\n * @param qh\n */\nfunction squareCollidesWithQuad(x1, y1, w, qx, qy, qw, qh) {\n    return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + w > qy;\n}\nexports.squareCollidesWithQuad = squareCollidesWithQuad;\nfunction rectangleCollidesWithQuad(x1, y1, w, h, qx, qy, qw, qh) {\n    return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + h > qy;\n}\nexports.rectangleCollidesWithQuad = rectangleCollidesWithQuad;\nfunction pointIsInQuad(x, y, qx, qy, qw, qh) {\n    var xmp = qx + qw / 2, ymp = qy + qh / 2, top = y < ymp, left = x < xmp;\n    return top ? (left ? TOP_LEFT : TOP_RIGHT) : left ? BOTTOM_LEFT : BOTTOM_RIGHT;\n}\n/**\n * Helper functions that are not bound to the class so an external user\n * cannot mess with them.\n */\nfunction buildQuadrants(maxLevel, data) {\n    // [block, level]\n    var stack = [0, 0];\n    while (stack.length) {\n        var level = stack.pop(), block = stack.pop();\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var x = data[block + X_OFFSET], y = data[block + Y_OFFSET], width = data[block + WIDTH_OFFSET], height = data[block + HEIGHT_OFFSET], hw = width / 2, hh = height / 2;\n        data[topLeftBlock + X_OFFSET] = x;\n        data[topLeftBlock + Y_OFFSET] = y;\n        data[topLeftBlock + WIDTH_OFFSET] = hw;\n        data[topLeftBlock + HEIGHT_OFFSET] = hh;\n        data[topRightBlock + X_OFFSET] = x + hw;\n        data[topRightBlock + Y_OFFSET] = y;\n        data[topRightBlock + WIDTH_OFFSET] = hw;\n        data[topRightBlock + HEIGHT_OFFSET] = hh;\n        data[bottomLeftBlock + X_OFFSET] = x;\n        data[bottomLeftBlock + Y_OFFSET] = y + hh;\n        data[bottomLeftBlock + WIDTH_OFFSET] = hw;\n        data[bottomLeftBlock + HEIGHT_OFFSET] = hh;\n        data[bottomRightBlock + X_OFFSET] = x + hw;\n        data[bottomRightBlock + Y_OFFSET] = y + hh;\n        data[bottomRightBlock + WIDTH_OFFSET] = hw;\n        data[bottomRightBlock + HEIGHT_OFFSET] = hh;\n        if (level < maxLevel - 1) {\n            stack.push(bottomRightBlock, level + 1);\n            stack.push(bottomLeftBlock, level + 1);\n            stack.push(topRightBlock, level + 1);\n            stack.push(topLeftBlock, level + 1);\n        }\n    }\n}\nfunction insertNode(maxLevel, data, containers, key, x, y, size) {\n    var x1 = x - size, y1 = y - size, w = size * 2;\n    var level = 0, block = 0;\n    while (true) {\n        // If we reached max level\n        if (level >= maxLevel) {\n            containers[block] = containers[block] || [];\n            containers[block].push(key);\n            return;\n        }\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var collidingWithTopLeft = squareCollidesWithQuad(x1, y1, w, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithTopRight = squareCollidesWithQuad(x1, y1, w, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomLeft = squareCollidesWithQuad(x1, y1, w, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomRight = squareCollidesWithQuad(x1, y1, w, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n        var collisions = [\n            collidingWithTopLeft,\n            collidingWithTopRight,\n            collidingWithBottomLeft,\n            collidingWithBottomRight,\n        ].reduce(function (acc, current) {\n            if (current)\n                return acc + 1;\n            else\n                return acc;\n        }, 0);\n        // If we don't have at least a collision, there is an issue\n        if (collisions === 0)\n            throw new Error(\"sigma/quadtree.insertNode: no collision (level: \" + level + \", key: \" + key + \", x: \" + x + \", y: \" + y + \", size: \" + size + \").\");\n        // If we have 3 collisions, we have a geometry problem obviously\n        if (collisions === 3)\n            throw new Error(\"sigma/quadtree.insertNode: 3 impossible collisions (level: \" + level + \", key: \" + key + \", x: \" + x + \", y: \" + y + \", size: \" + size + \").\");\n        // If we have more that one collision, we stop here and store the node\n        // in the relevant containers\n        if (collisions > 1) {\n            containers[block] = containers[block] || [];\n            containers[block].push(key);\n            return;\n        }\n        else {\n            level++;\n        }\n        // Else we recurse into the correct quads\n        if (collidingWithTopLeft)\n            block = topLeftBlock;\n        if (collidingWithTopRight)\n            block = topRightBlock;\n        if (collidingWithBottomLeft)\n            block = bottomLeftBlock;\n        if (collidingWithBottomRight)\n            block = bottomRightBlock;\n    }\n}\nfunction getNodesInAxisAlignedRectangleArea(maxLevel, data, containers, x1, y1, w, h) {\n    // [block, level]\n    var stack = [0, 0];\n    var collectedNodes = [];\n    var container;\n    while (stack.length) {\n        var level = stack.pop(), block = stack.pop();\n        // Collecting nodes\n        container = containers[block];\n        if (container)\n            extend_1.default(collectedNodes, container);\n        // If we reached max level\n        if (level >= maxLevel)\n            continue;\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var collidingWithTopLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithTopRight = rectangleCollidesWithQuad(x1, y1, w, h, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomRight = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n        if (collidingWithTopLeft)\n            stack.push(topLeftBlock, level + 1);\n        if (collidingWithTopRight)\n            stack.push(topRightBlock, level + 1);\n        if (collidingWithBottomLeft)\n            stack.push(bottomLeftBlock, level + 1);\n        if (collidingWithBottomRight)\n            stack.push(bottomRightBlock, level + 1);\n    }\n    return collectedNodes;\n}\n/**\n * QuadTree class.\n *\n * @constructor\n * @param {object} boundaries - The graph boundaries.\n */\nvar QuadTree = /** @class */ (function () {\n    function QuadTree(params) {\n        if (params === void 0) { params = {}; }\n        this.containers = {};\n        this.cache = null;\n        this.lastRectangle = null;\n        // Allocating the underlying byte array\n        var L = Math.pow(4, MAX_LEVEL);\n        this.data = new Float32Array(BLOCKS * ((4 * L - 1) / 3));\n        if (params.boundaries)\n            this.resize(params.boundaries);\n        else\n            this.resize({\n                x: 0,\n                y: 0,\n                width: 1,\n                height: 1,\n            });\n    }\n    QuadTree.prototype.add = function (key, x, y, size) {\n        insertNode(MAX_LEVEL, this.data, this.containers, key, x, y, size);\n        return this;\n    };\n    QuadTree.prototype.resize = function (boundaries) {\n        this.clear();\n        // Building the quadrants\n        this.data[X_OFFSET] = boundaries.x;\n        this.data[Y_OFFSET] = boundaries.y;\n        this.data[WIDTH_OFFSET] = boundaries.width;\n        this.data[HEIGHT_OFFSET] = boundaries.height;\n        buildQuadrants(MAX_LEVEL, this.data);\n    };\n    QuadTree.prototype.clear = function () {\n        this.containers = {};\n        return this;\n    };\n    QuadTree.prototype.point = function (x, y) {\n        var nodes = [];\n        var block = 0, level = 0;\n        do {\n            if (this.containers[block])\n                nodes.push.apply(nodes, __spreadArray([], __read(this.containers[block])));\n            var quad = pointIsInQuad(x, y, this.data[block + X_OFFSET], this.data[block + Y_OFFSET], this.data[block + WIDTH_OFFSET], this.data[block + HEIGHT_OFFSET]);\n            block = 4 * block + quad * BLOCKS;\n            level++;\n        } while (level <= MAX_LEVEL);\n        return nodes;\n    };\n    QuadTree.prototype.rectangle = function (x1, y1, x2, y2, height) {\n        var lr = this.lastRectangle;\n        if (lr && x1 === lr.x1 && x2 === lr.x2 && y1 === lr.y1 && y2 === lr.y2 && height === lr.height) {\n            return this.cache;\n        }\n        this.lastRectangle = {\n            x1: x1,\n            y1: y1,\n            x2: x2,\n            y2: y2,\n            height: height,\n        };\n        // If the rectangle is shifted, we use the smallest aligned rectangle that contains the shifted one:\n        if (!isRectangleAligned(this.lastRectangle))\n            this.lastRectangle = getCircumscribedAlignedRectangle(this.lastRectangle);\n        this.cache = getNodesInAxisAlignedRectangleArea(MAX_LEVEL, this.data, this.containers, x1, y1, Math.abs(x1 - x2) || Math.abs(y1 - y2), height);\n        return this.cache;\n    };\n    return QuadTree;\n}());\nexports.default = QuadTree;\n","/**\n * Extend function\n * ================\n *\n * Function used to push a bunch of values into an array at once.\n *\n * Its strategy is to mutate target array's length then setting the new indices\n * to be the values to add.\n *\n * A benchmark proved that it is faster than the following strategies:\n *   1) `array.push.apply(array, values)`.\n *   2) A loop of pushes.\n *   3) `array = array.concat(values)`, obviously.\n *\n * Intuitively, this is correct because when adding a lot of elements, the\n * chosen strategies does not need to handle the `arguments` object to\n * execute #.apply's variadicity and because the array know its final length\n * at the beginning, avoiding potential multiple reallocations of the underlying\n * contiguous array. Some engines may be able to optimize the loop of push\n * operations but empirically they don't seem to do so.\n */\n\n/**\n * Extends the target array with the given values.\n *\n * @param  {array} array  - Target array.\n * @param  {array} values - Values to add.\n */\nmodule.exports = function extend(array, values) {\n  var l2 = values.length;\n\n  if (l2 === 0)\n    return;\n\n  var l1 = array.length;\n\n  array.length += l2;\n\n  for (var i = 0; i < l2; i++)\n    array[l1 + i] = values[i];\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.edgeLabelsToDisplayFromNodes = exports.labelsToDisplayFromGrid = void 0;\nvar camera_1 = __importDefault(require(\"./camera\"));\n/**\n * Constants.\n */\n// Dimensions of a normal cell\nvar DEFAULT_CELL = {\n    width: 250,\n    height: 175,\n};\n// Dimensions of an unzoomed cell. This one is usually larger than the normal\n// one to account for the fact that labels will more likely collide.\nvar DEFAULT_UNZOOMED_CELL = {\n    width: 400,\n    height: 300,\n};\n/**\n * Helpers.\n */\nfunction collision(x1, y1, w1, h1, x2, y2, w2, h2) {\n    return x1 < x2 + w2 && x1 + w1 > x2 && y1 < y2 + h2 && y1 + h1 > y2;\n}\n// TODO: cache camera position of selected nodes to avoid costly computations\n// in anti-collision step\n// TOOD: document a little bit more so future people can understand this mess\n/**\n * Label grid heuristic selecting labels to display.\n *\n * @param  {object} params                 - Parameters:\n * @param  {object}   cache                - Cache storing nodes' data.\n * @param  {Camera}   camera               - The renderer's camera.\n * @param  {Set}      displayedLabels      - Currently displayed labels.\n * @param  {Array}    visibleNodes         - Nodes visible for this render.\n * @param  {Graph}    graph                - The rendered graph.\n * @return {Array}                         - The selected labels.\n */\nfunction labelsToDisplayFromGrid(params) {\n    var cache = params.cache, camera = params.camera, userCell = params.cell, dimensions = params.dimensions, displayedLabels = params.displayedLabels, _a = params.fontSize, fontSize = _a === void 0 ? 14 : _a, graph = params.graph, _b = params.renderedSizeThreshold, renderedSizeThreshold = _b === void 0 ? -Infinity : _b, visibleNodes = params.visibleNodes;\n    var cameraState = camera.getState(), previousCameraState = camera.getPreviousState();\n    var previousCamera = new camera_1.default();\n    previousCamera.setState(previousCameraState);\n    // TODO: should factorize. This same code is used quite a lot throughout the codebase\n    // TODO: POW RATIO is currently default 0.5 and harcoded\n    var sizeRatio = Math.pow(cameraState.ratio, 0.5);\n    // State\n    var zooming = cameraState.ratio < previousCameraState.ratio, panning = cameraState.x !== previousCameraState.x || cameraState.y !== previousCameraState.y, unzooming = cameraState.ratio > previousCameraState.ratio, unzoomedPanning = panning && !zooming && !unzooming && cameraState.ratio >= 1, zoomedPanning = panning && displayedLabels.size && !zooming && !unzooming;\n    // Trick to discretize unzooming\n    if (unzooming && Math.trunc(cameraState.ratio * 100) % 5 !== 0)\n        return Array.from(displayedLabels);\n    // If panning while unzoomed, we shouldn't change label selection\n    if (unzoomedPanning && displayedLabels.size !== 0)\n        return Array.from(displayedLabels);\n    // When unzoomed & zooming\n    if (zooming && cameraState.ratio >= 1)\n        return Array.from(displayedLabels);\n    // Adapting cell dimensions\n    var cell = userCell ? userCell : DEFAULT_CELL;\n    if (cameraState.ratio >= 1.3)\n        cell = DEFAULT_UNZOOMED_CELL;\n    var cwr = dimensions.width % cell.width;\n    var cellWidth = cell.width + cwr / Math.floor(dimensions.width / cell.width);\n    var chr = dimensions.height % cell.height;\n    var cellHeight = cell.height + chr / Math.floor(dimensions.height / cell.height);\n    var adjustedWidth = dimensions.width + cellWidth, adjustedHeight = dimensions.height + cellHeight, adjustedX = -cellWidth, adjustedY = -cellHeight;\n    var panningWidth = dimensions.width + cellWidth / 2, panningHeight = dimensions.height + cellHeight / 2, panningX = -(cellWidth / 2), panningY = -(cellHeight / 2);\n    var worthyLabels = [];\n    var grid = {};\n    var maxSize = -Infinity, biggestNode = null;\n    for (var i = 0, l = visibleNodes.length; i < l; i++) {\n        var node = visibleNodes[i], nodeData = cache[node];\n        // We filter hidden nodes\n        if (nodeData.hidden)\n            continue;\n        // We filter nodes having a rendered size less than a certain thresold\n        if (nodeData.size / sizeRatio < renderedSizeThreshold)\n            continue;\n        // Finding our node's cell in the grid\n        var pos = camera.framedGraphToViewport(dimensions, nodeData);\n        // Node is not actually visible on screen\n        // NOTE: can optimize margin on the right side (only if we know where the labels go)\n        if (pos.x < adjustedX || pos.x > adjustedWidth || pos.y < adjustedY || pos.y > adjustedHeight)\n            continue;\n        // Keeping track of the maximum node size for certain cases\n        if (nodeData.size > maxSize) {\n            maxSize = nodeData.size;\n            biggestNode = node;\n        }\n        // If panning when zoomed, we consider only displayed labels and newly\n        // visible nodes\n        if (zoomedPanning) {\n            var ppos = previousCamera.framedGraphToViewport(dimensions, nodeData);\n            // Was node visible earlier?\n            if (ppos.x >= panningX && ppos.x <= panningWidth && ppos.y >= panningY && ppos.y <= panningHeight) {\n                // Was the label displayed?\n                if (!displayedLabels.has(node))\n                    continue;\n            }\n        }\n        var xKey = Math.floor(pos.x / cellWidth), yKey = Math.floor(pos.y / cellHeight);\n        var key = xKey + \"\\u00A7\" + yKey;\n        if (typeof grid[key] === \"undefined\") {\n            // This cell is not yet occupied\n            grid[key] = node;\n        }\n        else {\n            // We must solve a conflict in this cell\n            var currentNode = grid[key], currentNodeData = cache[currentNode];\n            // We prefer already displayed labels\n            if (displayedLabels.size > 0) {\n                var n1 = displayedLabels.has(node), n2 = displayedLabels.has(currentNode);\n                if (!n1 && n2) {\n                    continue;\n                }\n                if (n1 && !n2) {\n                    grid[key] = node;\n                    continue;\n                }\n                if ((zoomedPanning || zooming) && n1 && n2) {\n                    worthyLabels.push(node);\n                    continue;\n                }\n            }\n            // In case of size & degree equality, we use the node's key so that the\n            // process remains deterministic\n            var won = false;\n            if (nodeData.size > currentNodeData.size) {\n                won = true;\n            }\n            else if (nodeData.size === currentNodeData.size) {\n                var nodeDegree = graph.degree(node), currentNodeDegree = graph.degree(currentNode);\n                if (nodeDegree > currentNodeDegree) {\n                    won = true;\n                }\n                else if (nodeDegree === currentNodeDegree) {\n                    if (node > currentNode)\n                        won = true;\n                }\n            }\n            if (won)\n                grid[key] = node;\n        }\n    }\n    // Compiling the labels\n    var biggestNodeShown = worthyLabels.some(function (node) { return node === biggestNode; });\n    for (var key in grid) {\n        var node = grid[key];\n        if (node === biggestNode)\n            biggestNodeShown = true;\n        worthyLabels.push(node);\n    }\n    // Always keeping biggest node shown on screen\n    if (!biggestNodeShown && biggestNode)\n        worthyLabels.push(biggestNode);\n    // Basic anti-collision\n    var collisions = new Set();\n    for (var i = 0, l = worthyLabels.length; i < l; i++) {\n        var n1 = worthyLabels[i], d1 = cache[n1], p1 = camera.framedGraphToViewport(dimensions, d1);\n        if (collisions.has(n1))\n            continue;\n        for (var j = i + 1; j < l; j++) {\n            var n2 = worthyLabels[j], d2 = cache[n2], p2 = camera.framedGraphToViewport(dimensions, d2);\n            var c = collision(\n            // First abstract bbox\n            p1.x, p1.y, d1.label.length * 8, fontSize, \n            // Second abstract bbox\n            p2.x, p2.y, d2.label.length * 8, fontSize);\n            if (c) {\n                // NOTE: add degree as tie-breaker here if required in the future\n                // NOTE: add final stable tie-breaker using node key if required\n                if (d1.size < d2.size)\n                    collisions.add(n1);\n                else\n                    collisions.add(n2);\n            }\n        }\n    }\n    // console.log(collisions)\n    return worthyLabels.filter(function (l) { return !collisions.has(l); });\n}\nexports.labelsToDisplayFromGrid = labelsToDisplayFromGrid;\n/**\n * Label heuristic selecting edge labels to display, based on displayed node\n * labels\n *\n * @param  {object} params                 - Parameters:\n * @param  {object}   nodeDataCache        - Cache storing nodes data.\n * @param  {object}   edgeDataCache        - Cache storing edges data.\n * @param  {Set}      displayedNodeLabels  - Currently displayed node labels.\n * @param  {Set}      highlightedNodes     - Highlighted nodes.\n * @param  {Graph}    graph                - The rendered graph.\n * @param  {string}   hoveredNode          - Hovered node (optional)\n * @return {Array}                         - The selected labels.\n */\nfunction edgeLabelsToDisplayFromNodes(params) {\n    var nodeDataCache = params.nodeDataCache, edgeDataCache = params.edgeDataCache, graph = params.graph, hoveredNode = params.hoveredNode, highlightedNodes = params.highlightedNodes, displayedNodeLabels = params.displayedNodeLabels;\n    var worthyEdges = new Set();\n    var displayedNodeLabelsArray = Array.from(displayedNodeLabels);\n    // Each edge connecting a highlighted node has its label displayed if the other extremity is not hidden:\n    var highlightedNodesArray = Array.from(highlightedNodes);\n    if (hoveredNode && !highlightedNodes.has(hoveredNode))\n        highlightedNodesArray.push(hoveredNode);\n    for (var i = 0; i < highlightedNodesArray.length; i++) {\n        var key = highlightedNodesArray[i];\n        var edges = graph.edges(key);\n        for (var j = 0; j < edges.length; j++) {\n            var edgeKey = edges[j];\n            var extremities = graph.extremities(edgeKey), sourceData = nodeDataCache[extremities[0]], targetData = nodeDataCache[extremities[1]], edgeData = edgeDataCache[edgeKey];\n            if (edgeData.hidden && sourceData.hidden && targetData.hidden) {\n                worthyEdges.add(edgeKey);\n            }\n        }\n    }\n    // Each edge connecting two nodes with visible labels has its label displayed:\n    for (var i = 0; i < displayedNodeLabelsArray.length; i++) {\n        var key = displayedNodeLabelsArray[i];\n        var edges = graph.outboundEdges(key);\n        for (var j = 0; j < edges.length; j++)\n            if (!edgeDataCache[edges[j]].hidden && displayedNodeLabels.has(graph.opposite(key, edges[j])))\n                worthyEdges.add(edges[j]);\n    }\n    return Array.from(worthyEdges);\n}\nexports.edgeLabelsToDisplayFromNodes = edgeLabelsToDisplayFromNodes;\n","\"use strict\";\n/**\n * Sigma.js Settings\n * =================================\n *\n * The list of settings and some handy functions.\n * @module\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_SETTINGS = exports.validateSettings = void 0;\nvar label_1 = __importDefault(require(\"./rendering/canvas/label\"));\nvar hover_1 = __importDefault(require(\"./rendering/canvas/hover\"));\nvar edge_label_1 = __importDefault(require(\"./rendering/canvas/edge-label\"));\nvar node_fast_1 = __importDefault(require(\"./rendering/webgl/programs/node.fast\"));\nvar edge_1 = __importDefault(require(\"./rendering/webgl/programs/edge\"));\nvar edge_arrow_1 = __importDefault(require(\"./rendering/webgl/programs/edge.arrow\"));\nfunction validateSettings(settings) {\n    // Label grid cell\n    if (settings.labelGrid &&\n        settings.labelGrid.cell &&\n        typeof settings.labelGrid.cell === \"object\" &&\n        (!settings.labelGrid.cell.width || !settings.labelGrid.cell.height)) {\n        throw new Error(\"Settings: invalid `labelGrid.cell`. Expecting {width, height}.\");\n    }\n}\nexports.validateSettings = validateSettings;\nexports.DEFAULT_SETTINGS = {\n    // Performance\n    hideEdgesOnMove: false,\n    hideLabelsOnMove: false,\n    renderLabels: true,\n    renderEdgeLabels: false,\n    // Component rendering\n    defaultNodeColor: \"#999\",\n    defaultNodeType: \"circle\",\n    defaultEdgeColor: \"#ccc\",\n    defaultEdgeType: \"line\",\n    labelFont: \"Arial\",\n    labelSize: 14,\n    labelWeight: \"normal\",\n    edgeLabelFont: \"Arial\",\n    edgeLabelSize: 14,\n    edgeLabelWeight: \"normal\",\n    // Labels\n    labelGrid: {\n        cell: null,\n        renderedSizeThreshold: -Infinity,\n    },\n    // Reducers\n    nodeReducer: null,\n    edgeReducer: null,\n    // Features\n    zIndex: false,\n    // Renderers\n    labelRenderer: label_1.default,\n    hoverRenderer: hover_1.default,\n    edgeLabelRenderer: edge_label_1.default,\n    // Program classes\n    nodeProgramClasses: {\n        circle: node_fast_1.default,\n    },\n    edgeProgramClasses: {\n        arrow: edge_arrow_1.default,\n        line: edge_1.default,\n    },\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction drawLabel(context, data, settings) {\n    var size = settings.labelSize, font = settings.labelFont, weight = settings.labelWeight;\n    context.fillStyle = \"#000\";\n    context.font = weight + \" \" + size + \"px \" + font;\n    context.fillText(data.label, data.x + data.size + 3, data.y + size / 3);\n}\nexports.default = drawLabel;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar node_1 = __importDefault(require(\"./node\"));\nvar label_1 = __importDefault(require(\"./label\"));\nfunction drawHover(context, data, settings) {\n    var size = settings.labelSize, font = settings.labelFont, weight = settings.labelWeight;\n    context.font = weight + \" \" + size + \"px \" + font;\n    // Then we draw the label background\n    context.beginPath();\n    context.fillStyle = \"#fff\";\n    context.shadowOffsetX = 0;\n    context.shadowOffsetY = 0;\n    context.shadowBlur = 8;\n    context.shadowColor = \"#000\";\n    var textWidth = context.measureText(data.label).width;\n    var x = Math.round(data.x - size / 2 - 2), y = Math.round(data.y - size / 2 - 2), w = Math.round(textWidth + size / 2 + data.size + 9), h = Math.round(size + 4), e = Math.round(size / 2 + 2);\n    context.moveTo(x, y + e);\n    context.moveTo(x, y + e);\n    context.arcTo(x, y, x + e, y, e);\n    context.lineTo(x + w, y);\n    context.lineTo(x + w, y + h);\n    context.lineTo(x + e, y + h);\n    context.arcTo(x, y + h, x, y + h - e, e);\n    context.lineTo(x, y + e);\n    context.closePath();\n    context.fill();\n    context.shadowOffsetX = 0;\n    context.shadowOffsetY = 0;\n    context.shadowBlur = 0;\n    // Then we need to draw the node\n    node_1.default(context, data);\n    // And finally we draw the label\n    label_1.default(context, data, settings);\n}\nexports.default = drawHover;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PI_TIMES_2 = Math.PI * 2;\nfunction drawNode(context, data) {\n    context.fillStyle = data.color;\n    context.beginPath();\n    context.arc(data.x, data.y, data.size, 0, PI_TIMES_2, true);\n    context.closePath();\n    context.fill();\n}\nexports.default = drawNode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction drawEdgeLabel(context, edgeData, sourceData, targetData, settings) {\n    var size = settings.edgeLabelSize, font = settings.edgeLabelFont, weight = settings.edgeLabelWeight, label = edgeData.label;\n    context.fillStyle = edgeData.color;\n    context.font = weight + \" \" + size + \"px \" + font;\n    var textWidth = context.measureText(label).width;\n    var cx = (sourceData.x + targetData.x) / 2;\n    var cy = (sourceData.y + targetData.y) / 2;\n    var dx = targetData.x - sourceData.x;\n    var dy = targetData.y - sourceData.y;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    var angle;\n    if (dx > 0) {\n        if (dy > 0)\n            angle = Math.acos(dx / d);\n        else\n            angle = Math.asin(dy / d);\n    }\n    else {\n        if (dy > 0)\n            angle = Math.acos(dx / d) + Math.PI;\n        else\n            angle = Math.asin(dx / d) + Math.PI / 2;\n    }\n    context.save();\n    context.translate(cx, cy);\n    context.rotate(angle);\n    context.fillText(label, -textWidth / 2, edgeData.size / 2 + size);\n    context.restore();\n}\nexports.default = drawEdgeLabel;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../../../utils\");\nvar node_fast_vert_glsl_1 = __importDefault(require(\"../shaders/node.fast.vert.glsl.js\"));\nvar node_fast_frag_glsl_1 = __importDefault(require(\"../shaders/node.fast.frag.glsl.js\"));\nvar node_1 = require(\"./common/node\");\nvar POINTS = 1, ATTRIBUTES = 4;\nvar NodeProgramFast = /** @class */ (function (_super) {\n    __extends(NodeProgramFast, _super);\n    function NodeProgramFast(gl) {\n        var _this = _super.call(this, gl, node_fast_vert_glsl_1.default, node_fast_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        _this.bind();\n        return _this;\n    }\n    NodeProgramFast.prototype.process = function (data, hidden, offset) {\n        var array = this.array;\n        var i = offset * POINTS * ATTRIBUTES;\n        if (hidden) {\n            array[i++] = 0;\n            array[i++] = 0;\n            array[i++] = 0;\n            array[i++] = 0;\n            return;\n        }\n        var color = utils_1.floatColor(data.color);\n        array[i++] = data.x;\n        array[i++] = data.y;\n        array[i++] = data.size;\n        array[i] = color;\n    };\n    NodeProgramFast.prototype.render = function (params) {\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        gl.uniform1f(this.ratioLocation, 1 / Math.pow(params.ratio, params.nodesPowRatio));\n        gl.uniform1f(this.scaleLocation, params.scalingRatio);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.drawArrays(gl.POINTS, 0, this.array.length / ATTRIBUTES);\n    };\n    return NodeProgramFast;\n}(node_1.AbstractNodeProgram));\nexports.default = NodeProgramFast;\n","(()=>{\"use strict\";var o={d:(t,n)=>{for(var e in n)o.o(n,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(o,\"__esModule\",{value:!0})}},t={};o.r(t),o.d(t,{default:()=>n});const n=\"attribute vec2 a_position;\\nattribute float a_size;\\nattribute vec4 a_color;\\n\\nuniform float u_ratio;\\nuniform float u_scale;\\nuniform mat3 u_matrix;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n\\n  gl_Position = vec4(\\n    (u_matrix * vec3(a_position, 1)).xy,\\n    0,\\n    1\\n  );\\n\\n  // Multiply the point size twice:\\n  //  - x SCALING_RATIO to correct the canvas scaling\\n  //  - x 2 to correct the formulae\\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\\n\\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=t})();","(()=>{\"use strict\";var o={d:(e,n)=>{for(var r in n)o.o(n,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(o,e)=>Object.prototype.hasOwnProperty.call(o,e),r:o=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(o,\"__esModule\",{value:!0})}},e={};o.r(e),o.d(e,{default:()=>n});const n=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float radius = 0.5;\\n\\nvoid main(void) {\\n  vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\\n  float dist = radius - length(m);\\n\\n  float t = 0.0;\\n  if (dist > v_border)\\n    t = 1.0;\\n  else if (dist > 0.0)\\n    t = dist / v_border;\\n\\n  gl_FragColor = mix(color0, v_color, t);\\n}\\n\";module.exports=e})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createNodeCompoundProgram = exports.AbstractNodeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Node Program\n * =====================================\n *\n * @module\n */\nvar program_1 = require(\"./program\");\n/**\n * Node Program class.\n *\n * @constructor\n */\nvar AbstractNodeProgram = /** @class */ (function (_super) {\n    __extends(AbstractNodeProgram, _super);\n    function AbstractNodeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        var _this = _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.sizeLocation = gl.getAttribLocation(_this.program, \"a_size\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        // Uniform Location\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var ratioLocation = gl.getUniformLocation(_this.program, \"u_ratio\");\n        if (ratioLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting ratioLocation\");\n        _this.ratioLocation = ratioLocation;\n        var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n        if (scaleLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting scaleLocation\");\n        _this.scaleLocation = scaleLocation;\n        return _this;\n    }\n    AbstractNodeProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.sizeLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.sizeLocation, 1, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, this.attributes * Float32Array.BYTES_PER_ELEMENT, 12);\n    };\n    return AbstractNodeProgram;\n}(program_1.AbstractProgram));\nexports.AbstractNodeProgram = AbstractNodeProgram;\n/**\n * Helper function combining two or more programs into a single compound one.\n * Note that this is more a quick & easy way to combine program than a really\n * performant option. More performant programs can be written entirely.\n *\n * @param  {array}    programClasses - Program classes to combine.\n * @return {function}\n */\nfunction createNodeCompoundProgram(programClasses) {\n    return /** @class */ (function () {\n        function NodeCompoundProgram(gl) {\n            this.programs = programClasses.map(function (ProgramClass) { return new ProgramClass(gl); });\n        }\n        NodeCompoundProgram.prototype.bufferData = function () {\n            this.programs.forEach(function (program) { return program.bufferData(); });\n        };\n        NodeCompoundProgram.prototype.allocate = function (capacity) {\n            this.programs.forEach(function (program) { return program.allocate(capacity); });\n        };\n        NodeCompoundProgram.prototype.bind = function () {\n            // nothing todo, it's already done in each program constructor\n        };\n        NodeCompoundProgram.prototype.render = function (params) {\n            this.programs.forEach(function (program) { return program.render(params); });\n        };\n        NodeCompoundProgram.prototype.process = function (data, hidden, offset) {\n            this.programs.forEach(function (program) { return program.process(data, hidden, offset); });\n        };\n        return NodeCompoundProgram;\n    }());\n}\nexports.createNodeCompoundProgram = createNodeCompoundProgram;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractProgram = void 0;\n/**\n * Sigma.js WebGL Renderer Program\n * ================================\n *\n * Class representing a single WebGL program used by sigma's WebGL renderer.\n * @module\n */\nvar utils_1 = require(\"../../shaders/utils\");\n/**\n * Abstract Program class.\n *\n * @constructor\n */\nvar AbstractProgram = /** @class */ (function () {\n    function AbstractProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        this.array = new Float32Array();\n        this.points = points;\n        this.attributes = attributes;\n        this.gl = gl;\n        this.vertexShaderSource = vertexShaderSource;\n        this.fragmentShaderSource = fragmentShaderSource;\n        var buffer = gl.createBuffer();\n        if (buffer === null)\n            throw new Error(\"AbstractProgram: error while creating the buffer\");\n        this.buffer = buffer;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        this.vertexShader = utils_1.loadVertexShader(gl, this.vertexShaderSource);\n        this.fragmentShader = utils_1.loadFragmentShader(gl, this.fragmentShaderSource);\n        this.program = utils_1.loadProgram(gl, [this.vertexShader, this.fragmentShader]);\n    }\n    AbstractProgram.prototype.bufferData = function () {\n        var gl = this.gl;\n        gl.bufferData(gl.ARRAY_BUFFER, this.array, gl.DYNAMIC_DRAW);\n    };\n    AbstractProgram.prototype.allocate = function (capacity) {\n        this.array = new Float32Array(this.points * this.attributes * capacity);\n    };\n    return AbstractProgram;\n}());\nexports.AbstractProgram = AbstractProgram;\n","\"use strict\";\n/**\n * Sigma.js Shader Utils\n * ======================\n *\n * Code used to load sigma's shaders.\n * @module\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.loadProgram = exports.loadFragmentShader = exports.loadVertexShader = void 0;\n/**\n * Function used to load a shader.\n */\nfunction loadShader(type, gl, source) {\n    var glType = type === \"VERTEX\" ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER;\n    // Creating the shader\n    var shader = gl.createShader(glType);\n    if (shader === null) {\n        throw new Error(\"loadShader: error while creating the shader\");\n    }\n    // Loading source\n    gl.shaderSource(shader, source);\n    // Compiling the shader\n    gl.compileShader(shader);\n    // Retrieving compilation status\n    var successfullyCompiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    // Throwing if something went awry\n    if (!successfullyCompiled) {\n        var infoLog = gl.getShaderInfoLog(shader);\n        gl.deleteShader(shader);\n        throw new Error(\"loadShader: error while compiling the shader:\\n\" + infoLog + \"\\n\" + source);\n    }\n    return shader;\n}\nfunction loadVertexShader(gl, source) {\n    return loadShader(\"VERTEX\", gl, source);\n}\nexports.loadVertexShader = loadVertexShader;\nfunction loadFragmentShader(gl, source) {\n    return loadShader(\"FRAGMENT\", gl, source);\n}\nexports.loadFragmentShader = loadFragmentShader;\n/**\n * Function used to load a program.\n */\nfunction loadProgram(gl, shaders) {\n    var program = gl.createProgram();\n    if (program === null) {\n        throw new Error(\"loadProgram: error while creating the program.\");\n    }\n    var i, l;\n    // Attaching the shaders\n    for (i = 0, l = shaders.length; i < l; i++)\n        gl.attachShader(program, shaders[i]);\n    gl.linkProgram(program);\n    // Checking status\n    var successfullyLinked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!successfullyLinked) {\n        gl.deleteProgram(program);\n        throw new Error(\"loadProgram: error while linking the program.\");\n    }\n    return program;\n}\nexports.loadProgram = loadProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js WebGL Renderer Edge Program\n * =====================================\n *\n * Program rendering edges as thick lines using four points translated\n * orthogonally from the source & target's centers by half thickness.\n *\n * Rendering two triangles by using only four points is made possible through\n * the use of indices.\n *\n * This method should be faster than the 6 points / 2 triangles approach and\n * should handle thickness better than with gl.LINES.\n *\n * This version of the shader balances geometry computation evenly between\n * the CPU & GPU (normals are computed on the CPU side).\n * @module\n */\nvar utils_1 = require(\"../../../utils\");\nvar edge_vert_glsl_1 = __importDefault(require(\"../shaders/edge.vert.glsl.js\"));\nvar edge_frag_glsl_1 = __importDefault(require(\"../shaders/edge.frag.glsl.js\"));\nvar edge_1 = require(\"./common/edge\");\nvar POINTS = 4, ATTRIBUTES = 6, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeProgram = /** @class */ (function (_super) {\n    __extends(EdgeProgram, _super);\n    function EdgeProgram(gl) {\n        var _this = _super.call(this, gl, edge_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Initializing indices buffer\n        var indicesBuffer = gl.createBuffer();\n        if (indicesBuffer === null)\n            throw new Error(\"EdgeProgram: error while getting resolutionLocation\");\n        _this.indicesBuffer = indicesBuffer;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.thicknessLocation = gl.getAttribLocation(_this.program, \"a_thickness\");\n        // Uniform locations\n        var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n        if (scaleLocation === null)\n            throw new Error(\"EdgeProgram: error while getting scaleLocation\");\n        _this.scaleLocation = scaleLocation;\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var cameraRatioLocation = gl.getUniformLocation(_this.program, \"u_cameraRatio\");\n        if (cameraRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting cameraRatioLocation\");\n        _this.cameraRatioLocation = cameraRatioLocation;\n        var viewportRatioLocation = gl.getUniformLocation(_this.program, \"u_viewportRatio\");\n        if (viewportRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting viewportRatioLocation\");\n        _this.viewportRatioLocation = viewportRatioLocation;\n        var thicknessRatioLocation = gl.getUniformLocation(_this.program, \"u_thicknessRatio\");\n        if (thicknessRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting thicknessRatioLocation\");\n        _this.thicknessRatioLocation = thicknessRatioLocation;\n        // Enabling the OES_element_index_uint extension\n        // NOTE: on older GPUs, this means that really large graphs won't\n        // have all their edges rendered. But it seems that the\n        // `OES_element_index_uint` is quite everywhere so we'll handle\n        // the potential issue if it really arises.\n        // NOTE: when using webgl2, the extension is enabled by default\n        _this.canUse32BitsIndices = utils_1.canUse32BitsIndices(gl);\n        _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n        _this.indicesArray = new _this.IndicesArray();\n        _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n        _this.bind();\n        return _this;\n    }\n    EdgeProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.thicknessLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.thicknessLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n    };\n    EdgeProgram.prototype.computeIndices = function () {\n        var l = this.array.length / ATTRIBUTES;\n        var size = l + l / 2;\n        var indices = new this.IndicesArray(size);\n        for (var i = 0, c = 0; i < l; i += 4) {\n            indices[c++] = i;\n            indices[c++] = i + 1;\n            indices[c++] = i + 2;\n            indices[c++] = i + 2;\n            indices[c++] = i + 1;\n            indices[c++] = i + 3;\n        }\n        this.indicesArray = indices;\n    };\n    EdgeProgram.prototype.bufferData = function () {\n        _super.prototype.bufferData.call(this);\n        // Indices data\n        var gl = this.gl;\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n    };\n    EdgeProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, color = utils_1.floatColor(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len;\n            n2 = dx * len;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        // First point flipped\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        // Second point flipped\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i] = color;\n    };\n    EdgeProgram.prototype.render = function (params) {\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniform1f(this.scaleLocation, params.scalingRatio);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.cameraRatioLocation, params.ratio);\n        gl.uniform1f(this.viewportRatioLocation, 1 / Math.min(params.width, params.height));\n        gl.uniform1f(this.thicknessRatioLocation, 1 / Math.pow(params.ratio, params.edgesPowRatio));\n        // Drawing:\n        gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n    };\n    return EdgeProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeProgram;\n","(()=>{\"use strict\";var n={d:(t,o)=>{for(var e in o)n.o(o,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})},o:(n,t)=>Object.prototype.hasOwnProperty.call(n,t),r:n=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>o});const o=\"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute float a_thickness;\\nattribute vec4 a_color;\\n\\nuniform mat3 u_matrix;\\nuniform float u_scale;\\nuniform float u_cameraRatio;\\nuniform float u_viewportRatio;\\nuniform float u_thicknessRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 0.8;\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n\\n  // Computing thickness in screen space:\\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\\n  thickness = max(thickness, minThickness * u_viewportRatio);\\n\\n  // Add normal vector to the position in screen space, but correct thickness first:\\n  vec2 position = (u_matrix * vec3(a_position + a_normal * thickness * u_cameraRatio, 1)).xy;\\n\\n  gl_Position = vec4(position, 0, 1);\\n\\n  v_normal = a_normal;\\n  v_thickness = thickness;\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=t})();","(()=>{\"use strict\";var e={d:(n,o)=>{for(var t in o)e.o(o,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:o[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>o});const o=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float feather = 0.001;\\nconst vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  float dist = length(v_normal) * v_thickness;\\n\\n  float t = smoothstep(\\n    v_thickness - feather,\\n    v_thickness,\\n    dist\\n  );\\n\\n  gl_FragColor = mix(v_color, color0, t);\\n}\\n\";module.exports=n})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createEdgeCompoundProgram = exports.AbstractEdgeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Edge Program\n * =====================================\n *\n * @module\n */\nvar program_1 = require(\"./program\");\n/**\n * Edge Program class.\n *\n * @constructor\n */\nvar AbstractEdgeProgram = /** @class */ (function (_super) {\n    __extends(AbstractEdgeProgram, _super);\n    function AbstractEdgeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        return _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n    }\n    return AbstractEdgeProgram;\n}(program_1.AbstractProgram));\nexports.AbstractEdgeProgram = AbstractEdgeProgram;\nfunction createEdgeCompoundProgram(programClasses) {\n    return /** @class */ (function () {\n        function EdgeCompoundProgram(gl) {\n            this.programs = programClasses.map(function (ProgramClass) { return new ProgramClass(gl); });\n        }\n        EdgeCompoundProgram.prototype.bufferData = function () {\n            this.programs.forEach(function (program) { return program.bufferData(); });\n        };\n        EdgeCompoundProgram.prototype.allocate = function (capacity) {\n            this.programs.forEach(function (program) { return program.allocate(capacity); });\n        };\n        EdgeCompoundProgram.prototype.bind = function () {\n            // nothing todo, it's already done in each program constructor\n        };\n        EdgeCompoundProgram.prototype.computeIndices = function () {\n            this.programs.forEach(function (program) { return program.computeIndices(); });\n        };\n        EdgeCompoundProgram.prototype.render = function (params) {\n            this.programs.forEach(function (program) {\n                program.bind();\n                program.bufferData();\n                program.render(params);\n            });\n        };\n        EdgeCompoundProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n            this.programs.forEach(function (program) { return program.process(sourceData, targetData, data, hidden, offset); });\n        };\n        return EdgeCompoundProgram;\n    }());\n}\nexports.createEdgeCompoundProgram = createEdgeCompoundProgram;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js WebGL Renderer Edge Arrow Program\n * ===========================================\n *\n * Compound program rendering edges as an arrow from the source to the target.\n * @module\n */\nvar edge_1 = require(\"./common/edge\");\nvar edge_arrowHead_1 = __importDefault(require(\"./edge.arrowHead\"));\nvar edge_clamped_1 = __importDefault(require(\"./edge.clamped\"));\nvar program = edge_1.createEdgeCompoundProgram([edge_clamped_1.default, edge_arrowHead_1.default]);\nexports.default = program;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../../../utils\");\nvar edge_arrowHead_vert_glsl_1 = __importDefault(require(\"../shaders/edge.arrowHead.vert.glsl.js\"));\nvar edge_arrowHead_frag_glsl_1 = __importDefault(require(\"../shaders/edge.arrowHead.frag.glsl.js\"));\nvar edge_1 = require(\"./common/edge\");\nvar POINTS = 3, ATTRIBUTES = 10, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeArrowHeadProgram = /** @class */ (function (_super) {\n    __extends(EdgeArrowHeadProgram, _super);\n    function EdgeArrowHeadProgram(gl) {\n        var _this = _super.call(this, gl, edge_arrowHead_vert_glsl_1.default, edge_arrowHead_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.thicknessLocation = gl.getAttribLocation(_this.program, \"a_thickness\");\n        _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n        _this.barycentricLocation = gl.getAttribLocation(_this.program, \"a_barycentric\");\n        // Uniform locations\n        var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n        if (scaleLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting scaleLocation\");\n        _this.scaleLocation = scaleLocation;\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var cameraRatioLocation = gl.getUniformLocation(_this.program, \"u_cameraRatio\");\n        if (cameraRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting cameraRatioLocation\");\n        _this.cameraRatioLocation = cameraRatioLocation;\n        var viewportRatioLocation = gl.getUniformLocation(_this.program, \"u_viewportRatio\");\n        if (viewportRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting viewportRatioLocation\");\n        _this.viewportRatioLocation = viewportRatioLocation;\n        var thicknessRatioLocation = gl.getUniformLocation(_this.program, \"u_thicknessRatio\");\n        if (thicknessRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting thicknessRatioLocation\");\n        _this.thicknessRatioLocation = thicknessRatioLocation;\n        _this.bind();\n        return _this;\n    }\n    EdgeArrowHeadProgram.prototype.bind = function () {\n        var gl = this.gl;\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.thicknessLocation);\n        gl.enableVertexAttribArray(this.radiusLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.enableVertexAttribArray(this.barycentricLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.thicknessLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 24);\n        // TODO: maybe we can optimize here by packing this in a bit mask\n        gl.vertexAttribPointer(this.barycentricLocation, 3, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 28);\n    };\n    EdgeArrowHeadProgram.prototype.computeIndices = function () {\n        // nothing to do\n    };\n    EdgeArrowHeadProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, radius = targetData.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, color = utils_1.floatColor(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len;\n            n2 = dx * len;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 1;\n        array[i++] = 0;\n        array[i++] = 0;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 0;\n        array[i++] = 1;\n        array[i++] = 0;\n        // Third point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 0;\n        array[i++] = 0;\n        array[i] = 1;\n    };\n    EdgeArrowHeadProgram.prototype.render = function (params) {\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniform1f(this.scaleLocation, params.scalingRatio);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.cameraRatioLocation, params.ratio);\n        gl.uniform1f(this.viewportRatioLocation, 1 / Math.min(params.width, params.height));\n        gl.uniform1f(this.thicknessRatioLocation, 1 / Math.pow(params.ratio, params.edgesPowRatio));\n        // Drawing:\n        gl.drawArrays(gl.TRIANGLES, 0, this.array.length / ATTRIBUTES);\n    };\n    return EdgeArrowHeadProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeArrowHeadProgram;\n","(()=>{\"use strict\";var a={d:(n,t)=>{for(var o in t)a.o(t,o)&&!a.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(a,n)=>Object.prototype.hasOwnProperty.call(a,n),r:a=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(a,\"__esModule\",{value:!0})}},n={};a.r(n),a.d(n,{default:()=>t});const t=\"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute float a_thickness;\\nattribute float a_radius;\\nattribute vec4 a_color;\\nattribute vec3 a_barycentric;\\n\\nuniform mat3 u_matrix;\\nuniform float u_scale;\\nuniform float u_cameraRatio;\\nuniform float u_viewportRatio;\\nuniform float u_thicknessRatio;\\n\\nvarying vec4 v_color;\\n\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\nconst float arrowHeadWidthLengthRatio = 0.66;\\nconst float minThickness = 0.8;\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n\\n  // Computing thickness in screen space:\\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\\n  thickness = max(thickness, minThickness * u_viewportRatio);\\n\\n  float nodeRadius = a_radius * u_thicknessRatio * u_viewportRatio * u_cameraRatio;\\n  float arrowHeadLength = thickness * 2.0 * arrowHeadLengthThicknessRatio * u_cameraRatio;\\n  float arrowHeadHalfWidth = arrowHeadWidthLengthRatio * arrowHeadLength / 2.0;\\n\\n  float da = a_barycentric.x;\\n  float db = a_barycentric.y;\\n  float dc = a_barycentric.z;\\n\\n  vec2 delta = vec2(\\n      da * ((nodeRadius) * a_normal.y)\\n    + db * ((nodeRadius + arrowHeadLength) * a_normal.y + arrowHeadHalfWidth * a_normal.x)\\n    + dc * ((nodeRadius + arrowHeadLength) * a_normal.y - arrowHeadHalfWidth * a_normal.x),\\n\\n      da * (-(nodeRadius) * a_normal.x)\\n    + db * (-(nodeRadius + arrowHeadLength) * a_normal.x + arrowHeadHalfWidth * a_normal.y)\\n    + dc * (-(nodeRadius + arrowHeadLength) * a_normal.x - arrowHeadHalfWidth * a_normal.y)\\n  );\\n\\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\\n\\n  gl_Position = vec4(position, 0, 1);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=n})();","(()=>{\"use strict\";var e={d:(o,r)=>{for(var t in r)e.o(r,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:r[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>r});const r=\"precision mediump float;\\n\\nvarying vec4 v_color;\\n\\nvoid main(void) {\\n  gl_FragColor = v_color;\\n}\\n\";module.exports=o})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar edge_1 = require(\"./common/edge\");\nvar utils_1 = require(\"../../../utils\");\nvar edge_clamped_vert_glsl_1 = __importDefault(require(\"../shaders/edge.clamped.vert.glsl.js\"));\nvar edge_frag_glsl_1 = __importDefault(require(\"../shaders/edge.frag.glsl.js\"));\nvar POINTS = 4, ATTRIBUTES = 7, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeClampedProgram = /** @class */ (function (_super) {\n    __extends(EdgeClampedProgram, _super);\n    function EdgeClampedProgram(gl) {\n        var _this = _super.call(this, gl, edge_clamped_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Initializing indices buffer\n        var indicesBuffer = gl.createBuffer();\n        if (indicesBuffer === null)\n            throw new Error(\"EdgeClampedProgram: error while getting resolutionLocation\");\n        _this.indicesBuffer = indicesBuffer;\n        // Locations:\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.thicknessLocation = gl.getAttribLocation(_this.program, \"a_thickness\");\n        _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n        // Uniform locations\n        var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n        if (scaleLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting scaleLocation\");\n        _this.scaleLocation = scaleLocation;\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var cameraRatioLocation = gl.getUniformLocation(_this.program, \"u_cameraRatio\");\n        if (cameraRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting cameraRatioLocation\");\n        _this.cameraRatioLocation = cameraRatioLocation;\n        var viewportRatioLocation = gl.getUniformLocation(_this.program, \"u_viewportRatio\");\n        if (viewportRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting viewportRatioLocation\");\n        _this.viewportRatioLocation = viewportRatioLocation;\n        var thicknessRatioLocation = gl.getUniformLocation(_this.program, \"u_thicknessRatio\");\n        if (thicknessRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting thicknessRatioLocation\");\n        _this.thicknessRatioLocation = thicknessRatioLocation;\n        // Enabling the OES_element_index_uint extension\n        // NOTE: on older GPUs, this means that really large graphs won't\n        // have all their edges rendered. But it seems that the\n        // `OES_element_index_uint` is quite everywhere so we'll handle\n        // the potential issue if it really arises.\n        // NOTE: when using webgl2, the extension is enabled by default\n        _this.canUse32BitsIndices = utils_1.canUse32BitsIndices(gl);\n        _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n        _this.indicesArray = new _this.IndicesArray();\n        _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n        _this.bind();\n        return _this;\n    }\n    EdgeClampedProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.thicknessLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.enableVertexAttribArray(this.radiusLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.thicknessLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n        gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 24);\n    };\n    EdgeClampedProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, radius = targetData.size || 1, color = utils_1.floatColor(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len;\n            n2 = dx * len;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        array[i++] = 0;\n        // First point flipped\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        array[i++] = 0;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        array[i++] = radius;\n        // Second point flipped\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = thickness;\n        array[i++] = color;\n        array[i] = -radius;\n    };\n    EdgeClampedProgram.prototype.computeIndices = function () {\n        var l = this.array.length / ATTRIBUTES;\n        var size = l + l / 2;\n        var indices = new this.IndicesArray(size);\n        for (var i = 0, c = 0; i < l; i += 4) {\n            indices[c++] = i;\n            indices[c++] = i + 1;\n            indices[c++] = i + 2;\n            indices[c++] = i + 2;\n            indices[c++] = i + 1;\n            indices[c++] = i + 3;\n        }\n        this.indicesArray = indices;\n    };\n    EdgeClampedProgram.prototype.bufferData = function () {\n        _super.prototype.bufferData.call(this);\n        // Indices data\n        var gl = this.gl;\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n    };\n    EdgeClampedProgram.prototype.render = function (params) {\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniform1f(this.scaleLocation, params.scalingRatio);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.cameraRatioLocation, params.ratio);\n        gl.uniform1f(this.viewportRatioLocation, 1 / Math.min(params.width, params.height));\n        gl.uniform1f(this.thicknessRatioLocation, 1 / Math.pow(params.ratio, params.edgesPowRatio));\n        // Drawing:\n        gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n    };\n    return EdgeClampedProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeClampedProgram;\n","(()=>{\"use strict\";var n={d:(t,o)=>{for(var e in o)n.o(o,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:o[e]})},o:(n,t)=>Object.prototype.hasOwnProperty.call(n,t),r:n=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})}},t={};n.r(t),n.d(t,{default:()=>o});const o=\"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute float a_thickness;\\nattribute vec4 a_color;\\nattribute float a_radius;\\n\\nuniform mat3 u_matrix;\\nuniform float u_scale;\\nuniform float u_cameraRatio;\\nuniform float u_viewportRatio;\\nuniform float u_thicknessRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\nconst float minThickness = 0.8;\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n\\n  // Computing thickness in screen space:\\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\\n  thickness = max(thickness, minThickness * u_viewportRatio);\\n\\n  float direction = sign(a_radius);\\n  float nodeRadius = direction * a_radius * u_thicknessRatio * u_viewportRatio;\\n  float arrowHeadLength = thickness * 2.0 * arrowHeadLengthThicknessRatio;\\n\\n  vec2 arrowHeadVector = vec2(-direction * a_normal.y, direction * a_normal.x);\\n\\n  // Add normal vector to the position in screen space, but correct thickness first:\\n  vec2 position = a_position + a_normal * thickness * u_cameraRatio;\\n  // Add vector that corrects the arrow head length:\\n  position = position + arrowHeadVector * (arrowHeadLength + nodeRadius) * u_cameraRatio;\\n  // Apply camera\\n  position = (u_matrix * vec3(position, 1)).xy;\\n\\n  gl_Position = vec4(position, 0, 1);\\n\\n  v_normal = a_normal;\\n  v_thickness = thickness;\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=t})();","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar captor_1 = __importStar(require(\"./captor\"));\nvar camera_1 = __importDefault(require(\"../camera\"));\nvar DRAG_TIMEOUT = 200;\nvar TOUCH_INERTIA_RATIO = 3;\nvar TOUCH_INERTIA_DURATION = 200;\n/**\n * Touch captor class.\n *\n * @constructor\n */\nvar TouchCaptor = /** @class */ (function (_super) {\n    __extends(TouchCaptor, _super);\n    function TouchCaptor(container, camera) {\n        var _this = _super.call(this, container, camera) || this;\n        _this.enabled = true;\n        _this.isMoving = false;\n        _this.touchMode = 0; // number of touches down\n        // Binding methods:\n        _this.handleStart = _this.handleStart.bind(_this);\n        _this.handleLeave = _this.handleLeave.bind(_this);\n        _this.handleMove = _this.handleMove.bind(_this);\n        // Binding events\n        container.addEventListener(\"touchstart\", _this.handleStart, false);\n        container.addEventListener(\"touchend\", _this.handleLeave, false);\n        container.addEventListener(\"touchcancel\", _this.handleLeave, false);\n        container.addEventListener(\"touchmove\", _this.handleMove, false);\n        return _this;\n    }\n    TouchCaptor.prototype.kill = function () {\n        var container = this.container;\n        container.removeEventListener(\"touchstart\", this.handleStart);\n        container.removeEventListener(\"touchend\", this.handleLeave);\n        container.removeEventListener(\"touchcancel\", this.handleLeave);\n        container.removeEventListener(\"touchmove\", this.handleMove);\n    };\n    TouchCaptor.prototype.getDimensions = function () {\n        return {\n            width: this.container.offsetWidth,\n            height: this.container.offsetHeight,\n        };\n    };\n    TouchCaptor.prototype.dispatchRelatedMouseEvent = function (type, e, position, emitter) {\n        var mousePosition = position || captor_1.getPosition(e.touches[0]);\n        var mouseEvent = new MouseEvent(type, {\n            clientX: mousePosition.x,\n            clientY: mousePosition.y,\n            altKey: e.altKey,\n            ctrlKey: e.ctrlKey,\n        });\n        (emitter || this.container).dispatchEvent(mouseEvent);\n    };\n    TouchCaptor.prototype.handleStart = function (e) {\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousedown\", e);\n        var touches = captor_1.getTouchesArray(e.touches);\n        this.isMoving = true;\n        this.touchMode = touches.length;\n        this.startCameraState = this.camera.getState();\n        this.startTouchesPositions = touches.map(captor_1.getPosition);\n        this.lastTouchesPositions = this.startTouchesPositions;\n        // When there are two touches down, let's record distance and angle as well:\n        if (this.touchMode === 2) {\n            var _a = __read(this.startTouchesPositions, 2), _b = _a[0], x0 = _b.x, y0 = _b.y, _c = _a[1], x1 = _c.x, y1 = _c.y;\n            this.startTouchesAngle = Math.atan2(y1 - y0, x1 - x0);\n            this.startTouchesDistance = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\n        }\n        this.emit(\"touchdown\", captor_1.getTouchCoords(e));\n    };\n    TouchCaptor.prototype.handleLeave = function (e) {\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 0 && this.lastTouchesPositions && this.lastTouchesPositions.length) {\n            this.dispatchRelatedMouseEvent(\"mouseup\", e, this.lastTouchesPositions[0], document);\n            this.dispatchRelatedMouseEvent(\"click\", e, this.lastTouchesPositions[0]);\n        }\n        if (this.movingTimeout) {\n            this.isMoving = false;\n            clearTimeout(this.movingTimeout);\n        }\n        switch (this.touchMode) {\n            case 2:\n                if (e.touches.length === 1) {\n                    this.handleStart(e);\n                    e.preventDefault();\n                    break;\n                }\n            /* falls through */\n            case 1:\n                // TODO\n                // Dispatch event\n                if (this.isMoving) {\n                    var cameraState = this.camera.getState(), previousCameraState = this.camera.getPreviousState();\n                    this.camera.animate({\n                        x: cameraState.x + TOUCH_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n                        y: cameraState.y + TOUCH_INERTIA_RATIO * (cameraState.y - previousCameraState.y),\n                    }, {\n                        duration: TOUCH_INERTIA_DURATION,\n                        easing: \"quadraticOut\",\n                    });\n                }\n                this.isMoving = false;\n                this.touchMode = 0;\n                break;\n        }\n        this.emit(\"touchup\", captor_1.getTouchCoords(e));\n    };\n    TouchCaptor.prototype.handleMove = function (e) {\n        var _a;\n        var _this = this;\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousemove\", e);\n        var startCameraState = this.startCameraState;\n        var touches = captor_1.getTouchesArray(e.touches);\n        var touchesPositions = touches.map(captor_1.getPosition);\n        this.lastTouchesPositions = touchesPositions;\n        this.isMoving = true;\n        if (this.movingTimeout)\n            clearTimeout(this.movingTimeout);\n        this.movingTimeout = window.setTimeout(function () {\n            _this.isMoving = false;\n        }, DRAG_TIMEOUT);\n        switch (this.touchMode) {\n            case 1: {\n                var _b = this.camera.viewportToFramedGraph(this.getDimensions(), (this.startTouchesPositions || [])[0]), xStart = _b.x, yStart = _b.y;\n                var _c = this.camera.viewportToFramedGraph(this.getDimensions(), touchesPositions[0]), x = _c.x, y = _c.y;\n                this.camera.setState({\n                    x: startCameraState.x + xStart - x,\n                    y: startCameraState.y + yStart - y,\n                });\n                break;\n            }\n            case 2: {\n                /**\n                 * Here is the thinking here:\n                 *\n                 * 1. We can find the new angle and ratio, by comparing the vector from \"touch one\" to \"touch two\" at the start\n                 *    of the d'n'd and now\n                 *\n                 * 2. We can use `Camera#viewportToGraph` inside formula to retrieve the new camera position, using the graph\n                 *    position of a touch at the beginning of the d'n'd (using `startCamera.viewportToGraph`) and the viewport\n                 *    position of this same touch now\n                 */\n                var newCameraState = {};\n                var _d = touchesPositions[0], x0 = _d.x, y0 = _d.y;\n                var _e = touchesPositions[1], x1 = _e.x, y1 = _e.y;\n                var angleDiff = Math.atan2(y1 - y0, x1 - x0) - this.startTouchesAngle;\n                var ratioDiff = Math.hypot(y1 - y0, x1 - x0) / this.startTouchesDistance;\n                // 1.\n                newCameraState.ratio = startCameraState.ratio / ratioDiff;\n                newCameraState.angle = startCameraState.angle + angleDiff;\n                // 2.\n                var dimensions = this.getDimensions();\n                var touchGraphPosition = camera_1.default.from(startCameraState).viewportToFramedGraph(dimensions, (this.startTouchesPositions || [])[0]);\n                var smallestDimension = Math.min(dimensions.width, dimensions.height);\n                var dx = smallestDimension / dimensions.width;\n                var dy = smallestDimension / dimensions.height;\n                var ratio = newCameraState.ratio / smallestDimension;\n                // Align with center of the graph:\n                var x = x0 - smallestDimension / 2 / dx;\n                var y = y0 - smallestDimension / 2 / dy;\n                // Rotate:\n                _a = __read([\n                    x * Math.cos(-newCameraState.angle) - y * Math.sin(-newCameraState.angle),\n                    y * Math.cos(-newCameraState.angle) + x * Math.sin(-newCameraState.angle),\n                ], 2), x = _a[0], y = _a[1];\n                newCameraState.x = touchGraphPosition.x - x * ratio;\n                newCameraState.y = touchGraphPosition.y + y * ratio;\n                this.camera.setState(newCameraState);\n                break;\n            }\n        }\n        this.emit(\"touchmove\", captor_1.getTouchCoords(e));\n    };\n    return TouchCaptor;\n}(captor_1.default));\nexports.default = TouchCaptor;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__42__;","import React, { ReactNode } from \"react\";\n\ninterface Props {\n  children?: ReactNode;\n  position?: \"top-right\" | \"top-left\" | \"bottom-right\" | \"bottom-left\";\n}\n\nexport const ControlsContainer: React.FC<Props> = ({ children, position = \"bottom-left\" }) => {\n  return <div className={`react-sigma-controls ${position}`}>{children}</div>;\n};\n","import React, { CSSProperties, ReactNode, useEffect, useMemo, useRef, useState } from \"react\";\nimport FA2LayoutSupervisor, { FA2LayoutSupervisorParameters } from \"graphology-layout-forceatlas2/worker\";\nimport { useSigma } from \"../hooks\";\n\ninterface Props {\n  /**\n   * The FA2 worker settings.\n   */\n  settings?: FA2LayoutSupervisorParameters;\n  /**\n   * Option to tell what we do when the component is mounted\n   *  - <code>-1</code> means that we do nothing (it's the same as no value)\n   *  - <code>0</code> means that we start the algo (and don't auto stop it)\n   *  - <code>X</code> mans that we start the algo, and stop it after X milliseconds\n   */\n  autoRunFor?: number;\n}\n\nexport const ForceAtlasControl: React.FC<Props> = ({ settings, autoRunFor = -1 }) => {\n  // Get Sigma\n  const sigma = useSigma();\n  // The FA2 worker\n  const [fa2, setFa2] = useState<FA2LayoutSupervisor | null>(null);\n  // Is FA2 is running\n  const [fa2IsRunning, setFa2IsRunning] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (sigma) {\n      // Create the FA2 worker\n      const nFa2 = new FA2LayoutSupervisor(sigma.getGraph(), settings ? settings : {});\n      setFa2(nFa2);\n\n      // we run the algo\n      let timeout = null;\n      if (autoRunFor > -1 && sigma.getGraph().order > 0) {\n        setFa2IsRunning(true);\n        // set a timeout to stop it\n        timeout =\n          autoRunFor > 0\n            ? window.setTimeout(() => {\n                setFa2IsRunning(false);\n              }, autoRunFor)\n            : null;\n      }\n\n      //cleaning\n      return () => {\n        if (nFa2) nFa2.kill();\n        if (timeout) clearTimeout(timeout);\n      };\n    }\n  }, [autoRunFor, settings, sigma]);\n\n  useEffect(() => {\n    try {\n      if (fa2) {\n        if (fa2IsRunning === true) {\n          fa2.start();\n        } else {\n          fa2.stop();\n        }\n      }\n    } catch (e) {}\n  }, [fa2, fa2IsRunning]);\n\n  return (\n    <div className={`react-sigma-control-forceatlas2 ${fa2IsRunning ? \"running\" : \"stopped\"}`}>\n      <button\n        onClick={() => setFa2IsRunning(e => !e)}\n        title={fa2IsRunning ? \"Stop the layout animation\" : \"Start the layout animation\"}\n      ></button>\n    </div>\n  );\n};\n","/**\n * Graphology ForceAtlas2 Layout Supervisor\n * =========================================\n *\n * Supervisor class able to spawn a web worker to run the FA2 layout in a\n * separate thread not to block UI with heavy synchronous computations.\n */\nvar workerFunction = require('./webworker.js'),\n    isGraph = require('graphology-utils/is-graph'),\n    helpers = require('./helpers.js');\n\nvar DEFAULT_SETTINGS = require('./defaults.js');\n\n/**\n * Class representing a FA2 layout run by a webworker.\n *\n * @constructor\n * @param  {Graph}         graph        - Target graph.\n * @param  {object|number} params       - Parameters:\n * @param  {object}          [settings] - Settings.\n */\nfunction FA2LayoutSupervisor(graph, params) {\n  params = params || {};\n\n  // Validation\n  if (!isGraph(graph))\n    throw new Error('graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.');\n\n  // Validating settings\n  var settings = helpers.assign({}, DEFAULT_SETTINGS, params.settings),\n      validationError = helpers.validateSettings(settings);\n\n  if (validationError)\n    throw new Error('graphology-layout-forceatlas2/worker: ' + validationError.message);\n\n  // Properties\n  this.worker = null;\n  this.graph = graph;\n  this.settings = settings;\n  this.matrices = null;\n  this.running = false;\n  this.killed = false;\n\n  // Binding listeners\n  this.handleMessage = this.handleMessage.bind(this);\n\n  var alreadyRespawning = false;\n  var self = this;\n\n  this.handleAddition = function() {\n    if (alreadyRespawning)\n      return;\n\n    alreadyRespawning = true;\n\n    self.spawnWorker();\n    setImmediate(function() {\n      alreadyRespawning = false;\n    });\n  };\n\n  graph.on('nodeAdded', this.handleAddition);\n  graph.on('edgeAdded', this.handleAddition);\n\n  // Spawning worker\n  this.spawnWorker();\n}\n\n/**\n * Internal method used to spawn the web worker.\n */\nFA2LayoutSupervisor.prototype.spawnWorker = function() {\n  if (this.worker)\n    this.worker.terminate();\n\n  this.worker = helpers.createWorker(workerFunction);\n  this.worker.addEventListener('message', this.handleMessage);\n\n  if (this.running) {\n    this.running = false;\n    this.start();\n  }\n};\n\n/**\n * Internal method used to handle the worker's messages.\n *\n * @param {object} event - Event to handle.\n */\nFA2LayoutSupervisor.prototype.handleMessage = function(event) {\n  if (!this.running)\n    return;\n\n  var matrix = new Float32Array(event.data.nodes);\n\n  helpers.assignLayoutChanges(this.graph, matrix);\n  this.matrices.nodes = matrix;\n\n  // Looping\n  this.askForIterations();\n};\n\n/**\n * Internal method used to ask for iterations from the worker.\n *\n * @param  {boolean} withEdges - Should we send edges along?\n * @return {FA2LayoutSupervisor}\n */\nFA2LayoutSupervisor.prototype.askForIterations = function(withEdges) {\n  var matrices = this.matrices;\n\n  var payload = {\n    settings: this.settings,\n    nodes: matrices.nodes.buffer\n  };\n\n  var buffers = [matrices.nodes.buffer];\n\n  if (withEdges) {\n    payload.edges = matrices.edges.buffer;\n    buffers.push(matrices.edges.buffer);\n  }\n\n  this.worker.postMessage(payload, buffers);\n\n  return this;\n};\n\n/**\n * Method used to start the layout.\n *\n * @return {FA2LayoutSupervisor}\n */\nFA2LayoutSupervisor.prototype.start = function() {\n  if (this.killed)\n    throw new Error('graphology-layout-forceatlas2/worker.start: layout was killed.');\n\n  if (this.running)\n    return this;\n\n  // Building matrices\n  this.matrices = helpers.graphToByteArrays(this.graph);\n\n  this.running = true;\n  this.askForIterations(true);\n\n  return this;\n};\n\n/**\n * Method used to stop the layout.\n *\n * @return {FA2LayoutSupervisor}\n */\nFA2LayoutSupervisor.prototype.stop = function() {\n  this.running = false;\n\n  return this;\n};\n\n/**\n * Method used to kill the layout.\n *\n * @return {FA2LayoutSupervisor}\n */\nFA2LayoutSupervisor.prototype.kill = function() {\n  if (this.killed)\n    return this;\n\n  this.running = false;\n  this.killed = true;\n\n  // Clearing memory\n  this.matrices = null;\n\n  // Terminating worker\n  this.worker.terminate();\n\n  // Unbinding listeners\n  this.graph.removeListener('nodeAdded', this.handleAddition);\n  this.graph.removeListener('edgeAdded', this.handleAddition);\n};\n\n/**\n * Exporting.\n */\nmodule.exports = FA2LayoutSupervisor;\n","/**\n * Graphology ForceAtlas2 Layout Webworker\n * ========================================\n *\n * Web worker able to run the layout in a separate thread.\n */\nmodule.exports = function worker() {\n  var NODES,\n      EDGES;\n\n  var moduleShim = {};\n\n  (function() {\n    /* eslint no-constant-condition: 0 */\n/**\n * Graphology ForceAtlas2 Iteration\n * =================================\n *\n * Function used to perform a single iteration of the algorithm.\n */\n\n/**\n * Matrices properties accessors.\n */\nvar NODE_X = 0,\n    NODE_Y = 1,\n    NODE_DX = 2,\n    NODE_DY = 3,\n    NODE_OLD_DX = 4,\n    NODE_OLD_DY = 5,\n    NODE_MASS = 6,\n    NODE_CONVERGENCE = 7,\n    NODE_SIZE = 8,\n    NODE_FIXED = 9;\n\nvar EDGE_SOURCE = 0,\n    EDGE_TARGET = 1,\n    EDGE_WEIGHT = 2;\n\nvar REGION_NODE = 0,\n    REGION_CENTER_X = 1,\n    REGION_CENTER_Y = 2,\n    REGION_SIZE = 3,\n    REGION_NEXT_SIBLING = 4,\n    REGION_FIRST_CHILD = 5,\n    REGION_MASS = 6,\n    REGION_MASS_CENTER_X = 7,\n    REGION_MASS_CENTER_Y = 8;\n\nvar SUBDIVISION_ATTEMPTS = 3;\n\n/**\n * Constants.\n */\nvar PPN = 10,\n    PPE = 3,\n    PPR = 9;\n\nvar MAX_FORCE = 10;\n\n/**\n * Function used to perform a single interation of the algorithm.\n *\n * @param  {object}       options    - Layout options.\n * @param  {Float32Array} NodeMatrix - Node data.\n * @param  {Float32Array} EdgeMatrix - Edge data.\n * @return {object}                  - Some metadata.\n */\nmoduleShim.exports = function iterate(options, NodeMatrix, EdgeMatrix) {\n\n  // Initializing variables\n  var l, r, n, n1, n2, rn, e, w, g, s;\n\n  var order = NodeMatrix.length,\n      size = EdgeMatrix.length;\n\n  var adjustSizes = options.adjustSizes;\n\n  var thetaSquared = options.barnesHutTheta * options.barnesHutTheta;\n\n  var outboundAttCompensation,\n      coefficient,\n      xDist,\n      yDist,\n      ewc,\n      distance,\n      factor;\n\n  var RegionMatrix = [];\n\n  // 1) Initializing layout data\n  //-----------------------------\n\n  // Resetting positions & computing max values\n  for (n = 0; n < order; n += PPN) {\n    NodeMatrix[n + NODE_OLD_DX] = NodeMatrix[n + NODE_DX];\n    NodeMatrix[n + NODE_OLD_DY] = NodeMatrix[n + NODE_DY];\n    NodeMatrix[n + NODE_DX] = 0;\n    NodeMatrix[n + NODE_DY] = 0;\n  }\n\n  // If outbound attraction distribution, compensate\n  if (options.outboundAttractionDistribution) {\n    outboundAttCompensation = 0;\n    for (n = 0; n < order; n += PPN) {\n      outboundAttCompensation += NodeMatrix[n + NODE_MASS];\n    }\n\n    outboundAttCompensation /= (order / PPN);\n  }\n\n\n  // 1.bis) Barnes-Hut computation\n  //------------------------------\n\n  if (options.barnesHutOptimize) {\n\n    // Setting up\n    var minX = Infinity,\n        maxX = -Infinity,\n        minY = Infinity,\n        maxY = -Infinity,\n        q, q2, subdivisionAttempts;\n\n    // Computing min and max values\n    for (n = 0; n < order; n += PPN) {\n      minX = Math.min(minX, NodeMatrix[n + NODE_X]);\n      maxX = Math.max(maxX, NodeMatrix[n + NODE_X]);\n      minY = Math.min(minY, NodeMatrix[n + NODE_Y]);\n      maxY = Math.max(maxY, NodeMatrix[n + NODE_Y]);\n    }\n\n    // squarify bounds, it's a quadtree\n    var dx = maxX - minX, dy = maxY - minY;\n    if (dx > dy) {\n      minY -= (dx - dy) / 2;\n      maxY = minY + dx;\n    }\n    else {\n      minX -= (dy - dx) / 2;\n      maxX = minX + dy;\n    }\n\n    // Build the Barnes Hut root region\n    RegionMatrix[0 + REGION_NODE] = -1;\n    RegionMatrix[0 + REGION_CENTER_X] = (minX + maxX) / 2;\n    RegionMatrix[0 + REGION_CENTER_Y] = (minY + maxY) / 2;\n    RegionMatrix[0 + REGION_SIZE] = Math.max(maxX - minX, maxY - minY);\n    RegionMatrix[0 + REGION_NEXT_SIBLING] = -1;\n    RegionMatrix[0 + REGION_FIRST_CHILD] = -1;\n    RegionMatrix[0 + REGION_MASS] = 0;\n    RegionMatrix[0 + REGION_MASS_CENTER_X] = 0;\n    RegionMatrix[0 + REGION_MASS_CENTER_Y] = 0;\n\n    // Add each node in the tree\n    l = 1;\n    for (n = 0; n < order; n += PPN) {\n\n      // Current region, starting with root\n      r = 0;\n      subdivisionAttempts = SUBDIVISION_ATTEMPTS;\n\n      while (true) {\n        // Are there sub-regions?\n\n        // We look at first child index\n        if (RegionMatrix[r + REGION_FIRST_CHILD] >= 0) {\n\n          // There are sub-regions\n\n          // We just iterate to find a \"leaf\" of the tree\n          // that is an empty region or a region with a single node\n          // (see next case)\n\n          // Find the quadrant of n\n          if (NodeMatrix[n + NODE_X] < RegionMatrix[r + REGION_CENTER_X]) {\n\n            if (NodeMatrix[n + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n              // Top Left quarter\n              q = RegionMatrix[r + REGION_FIRST_CHILD];\n            }\n            else {\n\n              // Bottom Left quarter\n              q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR;\n            }\n          }\n          else {\n            if (NodeMatrix[n + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n              // Top Right quarter\n              q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 2;\n            }\n            else {\n\n              // Bottom Right quarter\n              q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 3;\n            }\n          }\n\n          // Update center of mass and mass (we only do it for non-leave regions)\n          RegionMatrix[r + REGION_MASS_CENTER_X] =\n            (RegionMatrix[r + REGION_MASS_CENTER_X] * RegionMatrix[r + REGION_MASS] +\n             NodeMatrix[n + NODE_X] * NodeMatrix[n + NODE_MASS]) /\n            (RegionMatrix[r + REGION_MASS] + NodeMatrix[n + NODE_MASS]);\n\n          RegionMatrix[r + REGION_MASS_CENTER_Y] =\n            (RegionMatrix[r + REGION_MASS_CENTER_Y] * RegionMatrix[r + REGION_MASS] +\n             NodeMatrix[n + NODE_Y] * NodeMatrix[n + NODE_MASS]) /\n            (RegionMatrix[r + REGION_MASS] + NodeMatrix[n + NODE_MASS]);\n\n          RegionMatrix[r + REGION_MASS] += NodeMatrix[n + NODE_MASS];\n\n          // Iterate on the right quadrant\n          r = q;\n          continue;\n        }\n        else {\n\n          // There are no sub-regions: we are in a \"leaf\"\n\n          // Is there a node in this leave?\n          if (RegionMatrix[r + REGION_NODE] < 0) {\n\n            // There is no node in region:\n            // we record node n and go on\n            RegionMatrix[r + REGION_NODE] = n;\n            break;\n          }\n          else {\n\n            // There is a node in this region\n\n            // We will need to create sub-regions, stick the two\n            // nodes (the old one r[0] and the new one n) in two\n            // subregions. If they fall in the same quadrant,\n            // we will iterate.\n\n            // Create sub-regions\n            RegionMatrix[r + REGION_FIRST_CHILD] = l * PPR;\n            w = RegionMatrix[r + REGION_SIZE] / 2; // new size (half)\n\n            // NOTE: we use screen coordinates\n            // from Top Left to Bottom Right\n\n            // Top Left sub-region\n            g = RegionMatrix[r + REGION_FIRST_CHILD];\n\n            RegionMatrix[g + REGION_NODE] = -1;\n            RegionMatrix[g + REGION_CENTER_X] = RegionMatrix[r + REGION_CENTER_X] - w;\n            RegionMatrix[g + REGION_CENTER_Y] = RegionMatrix[r + REGION_CENTER_Y] - w;\n            RegionMatrix[g + REGION_SIZE] = w;\n            RegionMatrix[g + REGION_NEXT_SIBLING] = g + PPR;\n            RegionMatrix[g + REGION_FIRST_CHILD] = -1;\n            RegionMatrix[g + REGION_MASS] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_X] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_Y] = 0;\n\n            // Bottom Left sub-region\n            g += PPR;\n            RegionMatrix[g + REGION_NODE] = -1;\n            RegionMatrix[g + REGION_CENTER_X] = RegionMatrix[r + REGION_CENTER_X] - w;\n            RegionMatrix[g + REGION_CENTER_Y] = RegionMatrix[r + REGION_CENTER_Y] + w;\n            RegionMatrix[g + REGION_SIZE] = w;\n            RegionMatrix[g + REGION_NEXT_SIBLING] = g + PPR;\n            RegionMatrix[g + REGION_FIRST_CHILD] = -1;\n            RegionMatrix[g + REGION_MASS] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_X] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_Y] = 0;\n\n            // Top Right sub-region\n            g += PPR;\n            RegionMatrix[g + REGION_NODE] = -1;\n            RegionMatrix[g + REGION_CENTER_X] = RegionMatrix[r + REGION_CENTER_X] + w;\n            RegionMatrix[g + REGION_CENTER_Y] = RegionMatrix[r + REGION_CENTER_Y] - w;\n            RegionMatrix[g + REGION_SIZE] = w;\n            RegionMatrix[g + REGION_NEXT_SIBLING] = g + PPR;\n            RegionMatrix[g + REGION_FIRST_CHILD] = -1;\n            RegionMatrix[g + REGION_MASS] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_X] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_Y] = 0;\n\n            // Bottom Right sub-region\n            g += PPR;\n            RegionMatrix[g + REGION_NODE] = -1;\n            RegionMatrix[g + REGION_CENTER_X] = RegionMatrix[r + REGION_CENTER_X] + w;\n            RegionMatrix[g + REGION_CENTER_Y] = RegionMatrix[r + REGION_CENTER_Y] + w;\n            RegionMatrix[g + REGION_SIZE] = w;\n            RegionMatrix[g + REGION_NEXT_SIBLING] = RegionMatrix[r + REGION_NEXT_SIBLING];\n            RegionMatrix[g + REGION_FIRST_CHILD] = -1;\n            RegionMatrix[g + REGION_MASS] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_X] = 0;\n            RegionMatrix[g + REGION_MASS_CENTER_Y] = 0;\n\n            l += 4;\n\n            // Now the goal is to find two different sub-regions\n            // for the two nodes: the one previously recorded (r[0])\n            // and the one we want to add (n)\n\n            // Find the quadrant of the old node\n            if (NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_X] < RegionMatrix[r + REGION_CENTER_X]) {\n              if (NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n                // Top Left quarter\n                q = RegionMatrix[r + REGION_FIRST_CHILD];\n              }\n              else {\n\n                // Bottom Left quarter\n                q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR;\n              }\n            }\n            else {\n              if (NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n                // Top Right quarter\n                q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 2;\n              }\n              else {\n\n                // Bottom Right quarter\n                q = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 3;\n              }\n            }\n\n            // We remove r[0] from the region r, add its mass to r and record it in q\n            RegionMatrix[r + REGION_MASS] = NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_MASS];\n            RegionMatrix[r + REGION_MASS_CENTER_X] = NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_X];\n            RegionMatrix[r + REGION_MASS_CENTER_Y] = NodeMatrix[RegionMatrix[r + REGION_NODE] + NODE_Y];\n\n            RegionMatrix[q + REGION_NODE] = RegionMatrix[r + REGION_NODE];\n            RegionMatrix[r + REGION_NODE] = -1;\n\n            // Find the quadrant of n\n            if (NodeMatrix[n + NODE_X] < RegionMatrix[r + REGION_CENTER_X]) {\n              if (NodeMatrix[n + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n                // Top Left quarter\n                q2 = RegionMatrix[r + REGION_FIRST_CHILD];\n              }\n              else {\n                // Bottom Left quarter\n                q2 = RegionMatrix[r + REGION_FIRST_CHILD] + PPR;\n              }\n            }\n            else {\n              if (NodeMatrix[n + NODE_Y] < RegionMatrix[r + REGION_CENTER_Y]) {\n\n                // Top Right quarter\n                q2 = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 2;\n              }\n              else {\n\n                // Bottom Right quarter\n                q2 = RegionMatrix[r + REGION_FIRST_CHILD] + PPR * 3;\n              }\n            }\n\n            if (q === q2) {\n\n              // If both nodes are in the same quadrant,\n              // we have to try it again on this quadrant\n              if (subdivisionAttempts--) {\n                r = q;\n                continue; // while\n              }\n              else {\n                // we are out of precision here, and we cannot subdivide anymore\n                // but we have to break the loop anyway\n                subdivisionAttempts = SUBDIVISION_ATTEMPTS;\n                break; // while\n              }\n\n            }\n\n            // If both quadrants are different, we record n\n            // in its quadrant\n            RegionMatrix[q2 + REGION_NODE] = n;\n            break;\n          }\n        }\n      }\n    }\n  }\n\n\n  // 2) Repulsion\n  //--------------\n  // NOTES: adjustSizes = antiCollision & scalingRatio = coefficient\n\n  if (options.barnesHutOptimize) {\n    coefficient = options.scalingRatio;\n\n    // Applying repulsion through regions\n    for (n = 0; n < order; n += PPN) {\n\n      // Computing leaf quad nodes iteration\n\n      r = 0; // Starting with root region\n      while (true) {\n\n        if (RegionMatrix[r + REGION_FIRST_CHILD] >= 0) {\n\n          // The region has sub-regions\n\n          // We run the Barnes Hut test to see if we are at the right distance\n          distance = (\n            (Math.pow(NodeMatrix[n + NODE_X] - RegionMatrix[r + REGION_MASS_CENTER_X], 2)) +\n            (Math.pow(NodeMatrix[n + NODE_Y] - RegionMatrix[r + REGION_MASS_CENTER_Y], 2))\n          );\n\n          s = RegionMatrix[r + REGION_SIZE];\n\n          if ((4 * s * s) / distance < thetaSquared) {\n\n            // We treat the region as a single body, and we repulse\n\n            xDist = NodeMatrix[n + NODE_X] - RegionMatrix[r + REGION_MASS_CENTER_X];\n            yDist = NodeMatrix[n + NODE_Y] - RegionMatrix[r + REGION_MASS_CENTER_Y];\n\n            if (adjustSizes === true) {\n\n              //-- Linear Anti-collision Repulsion\n              if (distance > 0) {\n                factor = coefficient * NodeMatrix[n + NODE_MASS] *\n                  RegionMatrix[r + REGION_MASS] / distance;\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n              else if (distance < 0) {\n                factor = -coefficient * NodeMatrix[n + NODE_MASS] *\n                  RegionMatrix[r + REGION_MASS] / Math.sqrt(distance);\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n            }\n            else {\n\n              //-- Linear Repulsion\n              if (distance > 0) {\n                factor = coefficient * NodeMatrix[n + NODE_MASS] *\n                  RegionMatrix[r + REGION_MASS] / distance;\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n            }\n\n            // When this is done, we iterate. We have to look at the next sibling.\n            r = RegionMatrix[r + REGION_NEXT_SIBLING];\n            if (r < 0)\n              break; // No next sibling: we have finished the tree\n\n            continue;\n          }\n          else {\n\n            // The region is too close and we have to look at sub-regions\n            r = RegionMatrix[r + REGION_FIRST_CHILD];\n            continue;\n          }\n\n        }\n        else {\n\n          // The region has no sub-region\n          // If there is a node r[0] and it is not n, then repulse\n          rn = RegionMatrix[r + REGION_NODE];\n\n          if (rn >= 0 && rn !== n) {\n            xDist = NodeMatrix[n + NODE_X] - NodeMatrix[rn + NODE_X];\n            yDist = NodeMatrix[n + NODE_Y] - NodeMatrix[rn + NODE_Y];\n\n            distance = xDist * xDist + yDist * yDist;\n\n            if (adjustSizes === true) {\n\n              //-- Linear Anti-collision Repulsion\n              if (distance > 0) {\n                factor = coefficient * NodeMatrix[n + NODE_MASS] *\n                  NodeMatrix[rn + NODE_MASS] / distance;\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n              else if (distance < 0) {\n                factor = -coefficient * NodeMatrix[n + NODE_MASS] *\n                  NodeMatrix[rn + NODE_MASS] / Math.sqrt(distance);\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n            }\n            else {\n\n              //-- Linear Repulsion\n              if (distance > 0) {\n                factor = coefficient * NodeMatrix[n + NODE_MASS] *\n                  NodeMatrix[rn + NODE_MASS] / distance;\n\n                NodeMatrix[n + NODE_DX] += xDist * factor;\n                NodeMatrix[n + NODE_DY] += yDist * factor;\n              }\n            }\n\n          }\n\n          // When this is done, we iterate. We have to look at the next sibling.\n          r = RegionMatrix[r + REGION_NEXT_SIBLING];\n\n          if (r < 0)\n            break; // No next sibling: we have finished the tree\n\n          continue;\n        }\n      }\n    }\n  }\n  else {\n    coefficient = options.scalingRatio;\n\n    // Square iteration\n    for (n1 = 0; n1 < order; n1 += PPN) {\n      for (n2 = 0; n2 < n1; n2 += PPN) {\n\n        // Common to both methods\n        xDist = NodeMatrix[n1 + NODE_X] - NodeMatrix[n2 + NODE_X];\n        yDist = NodeMatrix[n1 + NODE_Y] - NodeMatrix[n2 + NODE_Y];\n\n        if (adjustSizes === true) {\n\n          //-- Anticollision Linear Repulsion\n          distance = Math.sqrt(xDist * xDist + yDist * yDist) -\n            NodeMatrix[n1 + NODE_SIZE] -\n            NodeMatrix[n2 + NODE_SIZE];\n\n          if (distance > 0) {\n            factor = coefficient *\n              NodeMatrix[n1 + NODE_MASS] *\n              NodeMatrix[n2 + NODE_MASS] /\n              distance / distance;\n\n            // Updating nodes' dx and dy\n            NodeMatrix[n1 + NODE_DX] += xDist * factor;\n            NodeMatrix[n1 + NODE_DY] += yDist * factor;\n\n            NodeMatrix[n2 + NODE_DX] += xDist * factor;\n            NodeMatrix[n2 + NODE_DY] += yDist * factor;\n          }\n          else if (distance < 0) {\n            factor = 100 * coefficient *\n              NodeMatrix[n1 + NODE_MASS] *\n              NodeMatrix[n2 + NODE_MASS];\n\n            // Updating nodes' dx and dy\n            NodeMatrix[n1 + NODE_DX] += xDist * factor;\n            NodeMatrix[n1 + NODE_DY] += yDist * factor;\n\n            NodeMatrix[n2 + NODE_DX] -= xDist * factor;\n            NodeMatrix[n2 + NODE_DY] -= yDist * factor;\n          }\n        }\n        else {\n\n          //-- Linear Repulsion\n          distance = Math.sqrt(xDist * xDist + yDist * yDist);\n\n          if (distance > 0) {\n            factor = coefficient *\n              NodeMatrix[n1 + NODE_MASS] *\n              NodeMatrix[n2 + NODE_MASS] /\n              distance / distance;\n\n            // Updating nodes' dx and dy\n            NodeMatrix[n1 + NODE_DX] += xDist * factor;\n            NodeMatrix[n1 + NODE_DY] += yDist * factor;\n\n            NodeMatrix[n2 + NODE_DX] -= xDist * factor;\n            NodeMatrix[n2 + NODE_DY] -= yDist * factor;\n          }\n        }\n      }\n    }\n  }\n\n\n  // 3) Gravity\n  //------------\n  g = options.gravity / options.scalingRatio;\n  coefficient = options.scalingRatio;\n  for (n = 0; n < order; n += PPN) {\n    factor = 0;\n\n    // Common to both methods\n    xDist = NodeMatrix[n + NODE_X];\n    yDist = NodeMatrix[n + NODE_Y];\n    distance = Math.sqrt(\n      Math.pow(xDist, 2) + Math.pow(yDist, 2)\n    );\n\n    if (options.strongGravityMode) {\n\n      //-- Strong gravity\n      if (distance > 0)\n        factor = coefficient * NodeMatrix[n + NODE_MASS] * g;\n    }\n    else {\n\n      //-- Linear Anti-collision Repulsion n\n      if (distance > 0)\n        factor = coefficient * NodeMatrix[n + NODE_MASS] * g / distance;\n    }\n\n    // Updating node's dx and dy\n    NodeMatrix[n + NODE_DX] -= xDist * factor;\n    NodeMatrix[n + NODE_DY] -= yDist * factor;\n  }\n\n  // 4) Attraction\n  //---------------\n  coefficient = 1 *\n    (options.outboundAttractionDistribution ?\n      outboundAttCompensation :\n      1);\n\n  // TODO: simplify distance\n  // TODO: coefficient is always used as -c --> optimize?\n  for (e = 0; e < size; e += PPE) {\n    n1 = EdgeMatrix[e + EDGE_SOURCE];\n    n2 = EdgeMatrix[e + EDGE_TARGET];\n    w = EdgeMatrix[e + EDGE_WEIGHT];\n\n    // Edge weight influence\n    ewc = Math.pow(w, options.edgeWeightInfluence);\n\n    // Common measures\n    xDist = NodeMatrix[n1 + NODE_X] - NodeMatrix[n2 + NODE_X];\n    yDist = NodeMatrix[n1 + NODE_Y] - NodeMatrix[n2 + NODE_Y];\n\n    // Applying attraction to nodes\n    if (adjustSizes === true) {\n\n      distance = Math.sqrt(\n        (Math.pow(xDist, 2) + Math.pow(yDist, 2)) -\n        NodeMatrix[n1 + NODE_SIZE] -\n        NodeMatrix[n2 + NODE_SIZE]\n      );\n\n      if (options.linLogMode) {\n        if (options.outboundAttractionDistribution) {\n\n          //-- LinLog Degree Distributed Anti-collision Attraction\n          if (distance > 0) {\n            factor = -coefficient * ewc * Math.log(1 + distance) /\n            distance /\n            NodeMatrix[n1 + NODE_MASS];\n          }\n        }\n        else {\n\n          //-- LinLog Anti-collision Attraction\n          if (distance > 0) {\n            factor = -coefficient * ewc * Math.log(1 + distance) / distance;\n          }\n        }\n      }\n      else {\n        if (options.outboundAttractionDistribution) {\n\n          //-- Linear Degree Distributed Anti-collision Attraction\n          if (distance > 0) {\n            factor = -coefficient * ewc / NodeMatrix[n1 + NODE_MASS];\n          }\n        }\n        else {\n\n          //-- Linear Anti-collision Attraction\n          if (distance > 0) {\n            factor = -coefficient * ewc;\n          }\n        }\n      }\n    }\n    else {\n\n      distance = Math.sqrt(\n        Math.pow(xDist, 2) + Math.pow(yDist, 2)\n      );\n\n      if (options.linLogMode) {\n        if (options.outboundAttractionDistribution) {\n\n          //-- LinLog Degree Distributed Attraction\n          if (distance > 0) {\n            factor = -coefficient * ewc * Math.log(1 + distance) /\n              distance /\n              NodeMatrix[n1 + NODE_MASS];\n          }\n        }\n        else {\n\n          //-- LinLog Attraction\n          if (distance > 0)\n            factor = -coefficient * ewc * Math.log(1 + distance) / distance;\n        }\n      }\n      else {\n        if (options.outboundAttractionDistribution) {\n\n          //-- Linear Attraction Mass Distributed\n          // NOTE: Distance is set to 1 to override next condition\n          distance = 1;\n          factor = -coefficient * ewc / NodeMatrix[n1 + NODE_MASS];\n        }\n        else {\n\n          //-- Linear Attraction\n          // NOTE: Distance is set to 1 to override next condition\n          distance = 1;\n          factor = -coefficient * ewc;\n        }\n      }\n    }\n\n    // Updating nodes' dx and dy\n    // TODO: if condition or factor = 1?\n    if (distance > 0) {\n\n      // Updating nodes' dx and dy\n      NodeMatrix[n1 + NODE_DX] += xDist * factor;\n      NodeMatrix[n1 + NODE_DY] += yDist * factor;\n\n      NodeMatrix[n2 + NODE_DX] -= xDist * factor;\n      NodeMatrix[n2 + NODE_DY] -= yDist * factor;\n    }\n  }\n\n\n  // 5) Apply Forces\n  //-----------------\n  var force,\n      swinging,\n      traction,\n      nodespeed,\n      newX,\n      newY;\n\n  // MATH: sqrt and square distances\n  if (adjustSizes === true) {\n\n    for (n = 0; n < order; n += PPN) {\n      if (NodeMatrix[n + NODE_FIXED] !== 1) {\n        force = Math.sqrt(\n          Math.pow(NodeMatrix[n + NODE_DX], 2) +\n          Math.pow(NodeMatrix[n + NODE_DY], 2)\n        );\n\n        if (force > MAX_FORCE) {\n          NodeMatrix[n + NODE_DX] =\n            NodeMatrix[n + NODE_DX] * MAX_FORCE / force;\n          NodeMatrix[n + NODE_DY] =\n            NodeMatrix[n + NODE_DY] * MAX_FORCE / force;\n        }\n\n        swinging = NodeMatrix[n + NODE_MASS] *\n          Math.sqrt(\n            (NodeMatrix[n + NODE_OLD_DX] - NodeMatrix[n + NODE_DX]) *\n            (NodeMatrix[n + NODE_OLD_DX] - NodeMatrix[n + NODE_DX]) +\n            (NodeMatrix[n + NODE_OLD_DY] - NodeMatrix[n + NODE_DY]) *\n            (NodeMatrix[n + NODE_OLD_DY] - NodeMatrix[n + NODE_DY])\n          );\n\n        traction = Math.sqrt(\n          (NodeMatrix[n + NODE_OLD_DX] + NodeMatrix[n + NODE_DX]) *\n          (NodeMatrix[n + NODE_OLD_DX] + NodeMatrix[n + NODE_DX]) +\n          (NodeMatrix[n + NODE_OLD_DY] + NodeMatrix[n + NODE_DY]) *\n          (NodeMatrix[n + NODE_OLD_DY] + NodeMatrix[n + NODE_DY])\n        ) / 2;\n\n        nodespeed =\n          0.1 * Math.log(1 + traction) / (1 + Math.sqrt(swinging));\n\n        // Updating node's positon\n        newX = NodeMatrix[n + NODE_X] + NodeMatrix[n + NODE_DX] *\n          (nodespeed / options.slowDown);\n        NodeMatrix[n + NODE_X] = newX;\n\n        newY = NodeMatrix[n + NODE_Y] + NodeMatrix[n + NODE_DY] *\n          (nodespeed / options.slowDown);\n        NodeMatrix[n + NODE_Y] = newY;\n      }\n    }\n  }\n  else {\n\n    for (n = 0; n < order; n += PPN) {\n      if (NodeMatrix[n + NODE_FIXED] !== 1) {\n\n        swinging = NodeMatrix[n + NODE_MASS] *\n          Math.sqrt(\n            (NodeMatrix[n + NODE_OLD_DX] - NodeMatrix[n + NODE_DX]) *\n            (NodeMatrix[n + NODE_OLD_DX] - NodeMatrix[n + NODE_DX]) +\n            (NodeMatrix[n + NODE_OLD_DY] - NodeMatrix[n + NODE_DY]) *\n            (NodeMatrix[n + NODE_OLD_DY] - NodeMatrix[n + NODE_DY])\n          );\n\n        traction = Math.sqrt(\n          (NodeMatrix[n + NODE_OLD_DX] + NodeMatrix[n + NODE_DX]) *\n          (NodeMatrix[n + NODE_OLD_DX] + NodeMatrix[n + NODE_DX]) +\n          (NodeMatrix[n + NODE_OLD_DY] + NodeMatrix[n + NODE_DY]) *\n          (NodeMatrix[n + NODE_OLD_DY] + NodeMatrix[n + NODE_DY])\n        ) / 2;\n\n        nodespeed = NodeMatrix[n + NODE_CONVERGENCE] *\n          Math.log(1 + traction) / (1 + Math.sqrt(swinging));\n\n        // Updating node convergence\n        NodeMatrix[n + NODE_CONVERGENCE] =\n          Math.min(1, Math.sqrt(\n            nodespeed *\n            (Math.pow(NodeMatrix[n + NODE_DX], 2) +\n             Math.pow(NodeMatrix[n + NODE_DY], 2)) /\n            (1 + Math.sqrt(swinging))\n          ));\n\n        // Updating node's positon\n        newX = NodeMatrix[n + NODE_X] + NodeMatrix[n + NODE_DX] *\n          (nodespeed / options.slowDown);\n        NodeMatrix[n + NODE_X] = newX;\n\n        newY = NodeMatrix[n + NODE_Y] + NodeMatrix[n + NODE_DY] *\n          (nodespeed / options.slowDown);\n        NodeMatrix[n + NODE_Y] = newY;\n      }\n    }\n  }\n\n  // We return the information about the layout (no need to return the matrices)\n  return {};\n};\n\n  })();\n\n  var iterate = moduleShim.exports;\n\n  self.addEventListener('message', function(event) {\n    var data = event.data;\n\n    NODES = new Float32Array(data.nodes);\n\n    if (data.edges)\n      EDGES = new Float32Array(data.edges);\n\n    // Running the iteration\n    iterate(\n      data.settings,\n      NODES,\n      EDGES\n    );\n\n    // Sending result to supervisor\n    self.postMessage({\n      nodes: NODES.buffer\n    }, [NODES.buffer]);\n  });\n};\n\n","/**\n * Graphology ForceAtlas2 Helpers\n * ===============================\n *\n * Miscellaneous helper functions.\n */\n\n/**\n * Constants.\n */\nvar PPN = 10,\n    PPE = 3;\n\n/**\n * Very simple Object.assign-like function.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nexports.assign = function(target) {\n  target = target || {};\n\n  var objects = Array.prototype.slice.call(arguments).slice(1),\n      i,\n      k,\n      l;\n\n  for (i = 0, l = objects.length; i < l; i++) {\n    if (!objects[i])\n      continue;\n\n    for (k in objects[i])\n      target[k] = objects[i][k];\n  }\n\n  return target;\n};\n\n/**\n * Function used to validate the given settings.\n *\n * @param  {object}      settings - Settings to validate.\n * @return {object|null}\n */\nexports.validateSettings = function(settings) {\n\n  if ('linLogMode' in settings &&\n      typeof settings.linLogMode !== 'boolean')\n    return {message: 'the `linLogMode` setting should be a boolean.'};\n\n  if ('outboundAttractionDistribution' in settings &&\n      typeof settings.outboundAttractionDistribution !== 'boolean')\n    return {message: 'the `outboundAttractionDistribution` setting should be a boolean.'};\n\n  if ('adjustSizes' in settings &&\n      typeof settings.adjustSizes !== 'boolean')\n    return {message: 'the `adjustSizes` setting should be a boolean.'};\n\n  if ('edgeWeightInfluence' in settings &&\n      typeof settings.edgeWeightInfluence !== 'number' &&\n      settings.edgeWeightInfluence < 0)\n    return {message: 'the `edgeWeightInfluence` setting should be a number >= 0.'};\n\n  if ('scalingRatio' in settings &&\n      typeof settings.scalingRatio !== 'number' &&\n      settings.scalingRatio < 0)\n    return {message: 'the `scalingRatio` setting should be a number >= 0.'};\n\n  if ('strongGravityMode' in settings &&\n      typeof settings.strongGravityMode !== 'boolean')\n    return {message: 'the `strongGravityMode` setting should be a boolean.'};\n\n  if ('gravity' in settings &&\n      typeof settings.gravity !== 'number' &&\n      settings.gravity < 0)\n    return {message: 'the `gravity` setting should be a number >= 0.'};\n\n  if ('slowDown' in settings &&\n      typeof settings.slowDown !== 'number' &&\n      settings.slowDown < 0)\n    return {message: 'the `slowDown` setting should be a number >= 0.'};\n\n  if ('barnesHutOptimize' in settings &&\n      typeof settings.barnesHutOptimize !== 'boolean')\n    return {message: 'the `barnesHutOptimize` setting should be a boolean.'};\n\n  if ('barnesHutTheta' in settings &&\n      typeof settings.barnesHutTheta !== 'number' &&\n      settings.barnesHutTheta < 0)\n    return {message: 'the `barnesHutTheta` setting should be a number >= 0.'};\n\n  return null;\n};\n\n/**\n * Function generating a flat matrix for both nodes & edges of the given graph.\n *\n * @param  {Graph}  graph - Target graph.\n * @return {object}       - Both matrices.\n */\nexports.graphToByteArrays = function(graph) {\n  var order = graph.order,\n      size = graph.size,\n      index = {},\n      j;\n\n  var NodeMatrix = new Float32Array(order * PPN),\n      EdgeMatrix = new Float32Array(size * PPE);\n\n  // Iterate through nodes\n  j = 0;\n  graph.forEachNode(function(node, attr) {\n\n    // Node index\n    index[node] = j;\n\n    // Populating byte array\n    NodeMatrix[j] = attr.x;\n    NodeMatrix[j + 1] = attr.y;\n    NodeMatrix[j + 2] = 0;\n    NodeMatrix[j + 3] = 0;\n    NodeMatrix[j + 4] = 0;\n    NodeMatrix[j + 5] = 0;\n    NodeMatrix[j + 6] = 1 + graph.degree(node);\n    NodeMatrix[j + 7] = 1;\n    NodeMatrix[j + 8] = attr.size || 1;\n    NodeMatrix[j + 9] = attr.fixed ? 1 : 0;\n    j += PPN;\n  });\n\n  // Iterate through edges\n  j = 0;\n  graph.forEachEdge(function(edge, attr, source, target) {\n\n    // Populating byte array\n    EdgeMatrix[j] = index[source];\n    EdgeMatrix[j + 1] = index[target];\n    EdgeMatrix[j + 2] = attr.weight || 0;\n    j += PPE;\n  });\n\n  return {\n    nodes: NodeMatrix,\n    edges: EdgeMatrix\n  };\n};\n\n/**\n * Function applying the layout back to the graph.\n *\n * @param {Graph}        graph      - Target graph.\n * @param {Float32Array} NodeMatrix - Node matrix.\n */\nexports.assignLayoutChanges = function(graph, NodeMatrix) {\n  var nodes = graph.nodes();\n\n  for (var i = 0, j = 0, l = NodeMatrix.length; i < l; i += PPN) {\n    graph.setNodeAttribute(nodes[j], 'x', NodeMatrix[i]);\n    graph.setNodeAttribute(nodes[j], 'y', NodeMatrix[i + 1]);\n    j++;\n  }\n};\n\n/**\n * Function collecting the layout positions.\n *\n * @param  {Graph}        graph      - Target graph.\n * @param  {Float32Array} NodeMatrix - Node matrix.\n * @return {object}                  - Map to node positions.\n */\nexports.collectLayoutChanges = function(graph, NodeMatrix) {\n  var nodes = graph.nodes(),\n      positions = Object.create(null);\n\n  for (var i = 0, j = 0, l = NodeMatrix.length; i < l; i += PPN) {\n    positions[nodes[j]] = {\n      x: NodeMatrix[i],\n      y: NodeMatrix[i + 1]\n    };\n\n    j++;\n  }\n\n  return positions;\n};\n\n/**\n * Function returning a web worker from the given function.\n *\n * @param  {function}  fn - Function for the worker.\n * @return {DOMString}\n */\nexports.createWorker = function createWorker(fn) {\n  var xURL = window.URL || window.webkitURL;\n  var code = fn.toString();\n  var objectUrl = xURL.createObjectURL(new Blob(['(' + code + ').call(this);'], {type: 'text/javascript'}));\n  var worker = new Worker(objectUrl);\n  xURL.revokeObjectURL(objectUrl);\n\n  return worker;\n};\n","/**\n * Graphology ForceAtlas2 Layout Default Settings\n * ===============================================\n */\nmodule.exports = {\n  linLogMode: false,\n  outboundAttractionDistribution: false,\n  adjustSizes: false,\n  edgeWeightInfluence: 0,\n  scalingRatio: 1,\n  strongGravityMode: false,\n  gravity: 1,\n  slowDown: 1,\n  barnesHutOptimize: false,\n  barnesHutTheta: 0.5\n};\n","import React from \"react\";\nimport { useSigma } from \"../hooks\";\n\ninterface Props {\n  animationDuration?: number;\n}\n\nexport const ZoomControl: React.FC<Props> = ({ animationDuration = 200 }) => {\n  // Get sigma\n  const sigma = useSigma();\n\n  /**\n   * Function to zoom in sigma.\n   */\n  function zoom(ratio?: number): void {\n    if (sigma) {\n      if (!ratio) {\n        sigma.getCamera().animatedReset({ duration: animationDuration });\n      } else if (ratio > 0) {\n        sigma.getCamera().animatedZoom({ duration: animationDuration });\n      } else if (ratio < 0) {\n        sigma.getCamera().animatedUnzoom({ duration: animationDuration });\n      }\n    }\n  }\n\n  return (\n    <>\n      <div className=\"react-sigma-control-zoom-in\">\n        <button onClick={() => zoom(1)} title=\"Zoom In\"></button>\n      </div>\n      <div className=\"react-sigma-control-zoom-out\">\n        <button onClick={() => zoom(-1)} title=\"Zoom Out\"></button>\n      </div>\n      <div className=\"react-sigma-control-zoom-center\">\n        <button onClick={() => zoom()} title=\"See whole graph\"></button>\n      </div>\n    </>\n  );\n};\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { useSigma } from \"../hooks\";\n\ninterface Props {}\n\nexport const FullScreenControl: React.FC<Props> = ({}) => {\n  // Get Sigma\n  const sigma = useSigma();\n  // Is full screen mode enabled\n  const [isFullScreen, setFullScreen] = useState<boolean>(false);\n  // HTML element for the button\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (containerRef.current) {\n      const sigmaRootElement = containerRef.current.closest(\"div.react-sigma-v2\");\n      if (sigmaRootElement) {\n        if (isFullScreen && !sigmaRootElement.classList.contains(\"fullscreen\"))\n          sigmaRootElement.classList.add(\"fullscreen\");\n        sigma.refresh();\n        if (!isFullScreen && sigmaRootElement.classList.contains(\"fullscreen\"))\n          sigmaRootElement.classList.remove(\"fullscreen\");\n        sigma.refresh();\n      }\n    }\n  }, [isFullScreen, useSigma]);\n\n  return (\n    <>\n      <div ref={containerRef} className={`react-sigma-control-${isFullScreen ? \"normalscreen\" : \"fullscreen\"}`}>\n        <button onClick={() => setFullScreen(!isFullScreen)} title=\"Toggle Fullscreen\"></button>\n      </div>\n    </>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { useSigma } from \"../hooks\";\n\ninterface Props {}\nexport const SearchControl: React.FC<Props> = ({}) => {\n  // Get sigma\n  const sigma = useSigma();\n  // Search value\n  const [search, setSearch] = useState<string>(\"\");\n  // Datalist values\n  const [values, setValues] = useState<Array<{ id: string; label: string }>>([]);\n  // Selected\n  const [selected, setSelected] = useState<string | null>(null);\n\n  useEffect(() => {\n    const newValues: Array<{ id: string; label: string }> = [];\n    if (!selected && search.length > 1) {\n      sigma.getGraph().forEachNode((key: string, attributes: any): void => {\n        if (attributes.label && attributes.label.toLowerCase().includes(search.toLowerCase()))\n          newValues.push({ id: key, label: attributes.label });\n      });\n    }\n    setValues(newValues);\n  }, [search]);\n\n  useEffect(() => {\n    if (selected) {\n      sigma.getGraph().setNodeAttribute(selected, \"highlighted\", true);\n      sigma.getCamera().animate(sigma.getNodeAttributes(selected), {\n        easing: \"linear\",\n        duration: 500,\n      });\n      return () => {\n        sigma.getGraph().setNodeAttribute(selected, \"highlighted\", false);\n      };\n    }\n  }, [selected]);\n\n  const onInputChange = e => {\n    const searchString = e.target.value;\n    const valueItem = values.find(value => value.label === searchString);\n    if (valueItem) {\n      setSearch(valueItem.label);\n      setValues([]);\n      setSelected(valueItem.id);\n    } else {\n      setSelected(null);\n      setSearch(searchString);\n    }\n  };\n\n  return (\n    <div>\n      <input type=\"text\" placeholder=\"Search...\" list=\"nodes\" value={search} onChange={onInputChange} />\n      <datalist id=\"nodes\">\n        {values.map((value: { id: string; label: string }) => (\n          <option key={value.id} value={value.label}>\n            {value.label}\n          </option>\n        ))}\n      </datalist>\n    </div>\n  );\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { CameraState } from \"sigma/core/camera\";\nimport { useSigma, useRegisterEvents, useLoadGraph, useSetSettings } from \"./hooks\";\nimport { SigmaContainer } from \"./SigmaContainer\";\nimport { ControlsContainer } from \"./controls/ControlsContainer\";\nimport { ForceAtlasControl } from \"./controls/ForceAtlasControl\";\nimport { ZoomControl } from \"./controls/ZoomControl\";\nimport { FullScreenControl } from \"./controls/FullScreenControl\";\nimport { SearchControl } from \"./controls/SearchControl\";\n\ninterface EventHandlers {\n  clickNode: ({ node: NodeKey, event: MouseCoords }) => void;\n  rightClickNode: ({ node: NodeKey, event: MouseCoords }) => void;\n  downNode: ({ node: NodeKey, event: MouseCoords }) => void;\n  leaveNode: ({ node: NodeKey }) => void;\n  enterNode: ({ node: NodeKey }) => void;\n  clickStage: ({ event: MouseCoords }) => void;\n  rightClickStage: ({ event: MouseCoords }) => void;\n  downStage: ({ event: MouseCoords }) => void;\n  kill: () => void;\n  cameraUpdated: (e: CameraState) => void;\n}\n\nexport {\n  ControlsContainer,\n  EventHandlers,\n  ForceAtlasControl,\n  FullScreenControl,\n  SearchControl,\n  SigmaContainer,\n  ZoomControl,\n  useSigma,\n  useRegisterEvents,\n  useLoadGraph,\n  useSetSettings,\n};\n"],"sourceRoot":""}