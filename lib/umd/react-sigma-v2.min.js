!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("graphology"),require("react")):"function"==typeof define&&define.amd?define(["graphology","react"],e):"object"==typeof exports?exports["react-sigma-v2"]=e(require("graphology"),require("react")):t["react-sigma-v2"]=e(t.graphology,t.react)}(this,(function(t,e){return(()=>{var r=[,(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSetSettings=e.useRegisterEvents=e.useLoadGraph=e.useSigma=void 0;const i=r(2),o=r(3);function n(){return o.useSigmaContext().sigma}e.useSigma=n,e.useLoadGraph=function(){const t=n();return(e,r=!0)=>{t&&e&&(r&&t.getGraph().order>0&&t.getGraph().clear(),t.getGraph().import(e))}},e.useRegisterEvents=function(){const t=n(),[e,r]=i.useState({});return i.useEffect((()=>{if(t&&e)return Object.keys(e).forEach((r=>{"cameraUpdated"===r?t.camera.on(r,e[r]):t.on(r,e[r])})),()=>{Object.keys(e).forEach((r=>{"cameraUpdated"===r?t.camera.removeListener(r,e[r]):t.removeListener(r,e[r])}))}}),[t,e]),r},e.useSetSettings=function(){const t=n(),[e,r]=i.useState({});return i.useEffect((()=>{if(t&&e){const r={};return Object.keys(e).forEach((i=>{r[i]=t.getSetting(i),t.setSetting(i,e[i])})),()=>{Object.keys(r).forEach((e=>{t.setSetting(e,r[e])}))}}}),[t,e]),r}},t=>{"use strict";t.exports=e},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useSigmaContext=e.SigmaProvider=e.SigmaContext=void 0;const i=r(2);e.SigmaContext=i.createContext(null),e.SigmaProvider=e.SigmaContext.Provider,e.useSigmaContext=function(){const t=i.useContext(e.SigmaContext);if(null==t)throw new Error("No context provided: useSigmaContext() can only be used in a descendant of <SigmaContainer>");return t}},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ForceAtlasControl=void 0;const s=n(r(2)),c=a(r(5)),h=r(1);e.ForceAtlasControl=({settings:t={},autoRunFor:e=-1})=>{const r=h.useSigma(),[i,o]=s.useState(null),[n,a]=s.useState(!1);return s.useEffect((()=>{if(r){const i=new c.default(r.getGraph(),t);o(i);let n=null;return e>-1&&r.getGraph().order>0&&(a(!0),n=e>0?setTimeout((()=>{a(!1)}),e):null),()=>{i&&i.kill(),n&&clearTimeout(n)}}}),[]),s.useEffect((()=>{try{!0===n?i.start():i.stop()}catch(t){}}),[i,n]),s.default.createElement("div",{className:"react-sigma-control-forceatlas2 "+(n?"running":"stopped")},s.default.createElement("button",{onClick:()=>a((t=>!t)),title:n?"Stop the layout animation":"Start the layout animation"}))}},(t,e,r)=>{var i=r(6),o=r(7),n=r(8),a=r(9);function s(t,e){if(e=e||{},!o(t))throw new Error("graphology-layout-forceatlas2/worker: the given graph is not a valid graphology instance.");var r=n.assign({},a,e.settings),i=n.validateSettings(r);if(i)throw new Error("graphology-layout-forceatlas2/worker: "+i.message);this.worker=null,this.graph=t,this.settings=r,this.matrices=null,this.running=!1,this.killed=!1,this.handleMessage=this.handleMessage.bind(this);var s=!1,c=this;this.handleAddition=function(){s||(s=!0,c.spawnWorker(),setImmediate((function(){s=!1})))},t.on("nodeAdded",this.handleAddition),t.on("edgeAdded",this.handleAddition),this.spawnWorker()}s.prototype.spawnWorker=function(){this.worker&&this.worker.terminate(),this.worker=n.createWorker(i),this.worker.addEventListener("message",this.handleMessage),this.running&&(this.running=!1,this.start())},s.prototype.handleMessage=function(t){if(this.running){var e=new Float32Array(t.data.nodes);n.assignLayoutChanges(this.graph,e),this.matrices.nodes=e,this.askForIterations()}},s.prototype.askForIterations=function(t){var e=this.matrices,r={settings:this.settings,nodes:e.nodes.buffer},i=[e.nodes.buffer];return t&&(r.edges=e.edges.buffer,i.push(e.edges.buffer)),this.worker.postMessage(r,i),this},s.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-forceatlas2/worker.start: layout was killed.");return this.running||(this.matrices=n.graphToByteArrays(this.graph),this.running=!0,this.askForIterations(!0)),this},s.prototype.stop=function(){return this.running=!1,this},s.prototype.kill=function(){if(this.killed)return this;this.running=!1,this.killed=!0,this.matrices=null,this.worker.terminate(),this.graph.removeListener("nodeAdded",this.handleAddition),this.graph.removeListener("edgeAdded",this.handleAddition)},t.exports=s},t=>{t.exports=function(){var t,e,r,i={};r=10,i.exports=function(t,e,i){var o,n,a,s,c,h,l,u,d,f,p,g,v,m,y,b,_,w,x,L,E,A,M,S=e.length,T=i.length,P=t.adjustSizes,O=t.barnesHutTheta*t.barnesHutTheta,C=[];for(a=0;a<S;a+=r)e[a+4]=e[a+2],e[a+5]=e[a+3],e[a+2]=0,e[a+3]=0;if(t.outboundAttractionDistribution){for(p=0,a=0;a<S;a+=r)p+=e[a+6];p/=S/r}if(t.barnesHutOptimize){var R,k,D,F=1/0,N=-1/0,j=1/0,z=-1/0;for(a=0;a<S;a+=r)F=Math.min(F,e[a+0]),N=Math.max(N,e[a+0]),j=Math.min(j,e[a+1]),z=Math.max(z,e[a+1]);var I=N-F,U=z-j;for(I>U?z=(j-=(I-U)/2)+I:N=(F-=(U-I)/2)+U,C[0]=-1,C[1]=(F+N)/2,C[2]=(j+z)/2,C[3]=Math.max(N-F,z-j),C[4]=-1,C[5]=-1,C[6]=0,C[7]=0,C[8]=0,o=1,a=0;a<S;a+=r)for(n=0,D=3;;){if(!(C[n+5]>=0)){if(C[n+0]<0){C[n+0]=a;break}if(C[n+5]=9*o,u=C[n+3]/2,C[(d=C[n+5])+0]=-1,C[d+1]=C[n+1]-u,C[d+2]=C[n+2]-u,C[d+3]=u,C[d+4]=d+9,C[d+5]=-1,C[d+6]=0,C[d+7]=0,C[d+8]=0,C[(d+=9)+0]=-1,C[d+1]=C[n+1]-u,C[d+2]=C[n+2]+u,C[d+3]=u,C[d+4]=d+9,C[d+5]=-1,C[d+6]=0,C[d+7]=0,C[d+8]=0,C[(d+=9)+0]=-1,C[d+1]=C[n+1]+u,C[d+2]=C[n+2]-u,C[d+3]=u,C[d+4]=d+9,C[d+5]=-1,C[d+6]=0,C[d+7]=0,C[d+8]=0,C[(d+=9)+0]=-1,C[d+1]=C[n+1]+u,C[d+2]=C[n+2]+u,C[d+3]=u,C[d+4]=C[n+4],C[d+5]=-1,C[d+6]=0,C[d+7]=0,C[d+8]=0,o+=4,R=e[C[n+0]+0]<C[n+1]?e[C[n+0]+1]<C[n+2]?C[n+5]:C[n+5]+9:e[C[n+0]+1]<C[n+2]?C[n+5]+18:C[n+5]+27,C[n+6]=e[C[n+0]+6],C[n+7]=e[C[n+0]+0],C[n+8]=e[C[n+0]+1],C[R+0]=C[n+0],C[n+0]=-1,R===(k=e[a+0]<C[n+1]?e[a+1]<C[n+2]?C[n+5]:C[n+5]+9:e[a+1]<C[n+2]?C[n+5]+18:C[n+5]+27)){if(D--){n=R;continue}D=3;break}C[k+0]=a;break}R=e[a+0]<C[n+1]?e[a+1]<C[n+2]?C[n+5]:C[n+5]+9:e[a+1]<C[n+2]?C[n+5]+18:C[n+5]+27,C[n+7]=(C[n+7]*C[n+6]+e[a+0]*e[a+6])/(C[n+6]+e[a+6]),C[n+8]=(C[n+8]*C[n+6]+e[a+1]*e[a+6])/(C[n+6]+e[a+6]),C[n+6]+=e[a+6],n=R}}if(t.barnesHutOptimize){for(g=t.scalingRatio,a=0;a<S;a+=r)for(n=0;;)if(C[n+5]>=0){if(b=Math.pow(e[a+0]-C[n+7],2)+Math.pow(e[a+1]-C[n+8],2),4*(f=C[n+3])*f/b<O){if(v=e[a+0]-C[n+7],m=e[a+1]-C[n+8],!0===P?b>0?(_=g*e[a+6]*C[n+6]/b,e[a+2]+=v*_,e[a+3]+=m*_):b<0&&(_=-g*e[a+6]*C[n+6]/Math.sqrt(b),e[a+2]+=v*_,e[a+3]+=m*_):b>0&&(_=g*e[a+6]*C[n+6]/b,e[a+2]+=v*_,e[a+3]+=m*_),(n=C[n+4])<0)break;continue}n=C[n+5]}else if((h=C[n+0])>=0&&h!==a&&(b=(v=e[a+0]-e[h+0])*v+(m=e[a+1]-e[h+1])*m,!0===P?b>0?(_=g*e[a+6]*e[h+6]/b,e[a+2]+=v*_,e[a+3]+=m*_):b<0&&(_=-g*e[a+6]*e[h+6]/Math.sqrt(b),e[a+2]+=v*_,e[a+3]+=m*_):b>0&&(_=g*e[a+6]*e[h+6]/b,e[a+2]+=v*_,e[a+3]+=m*_)),(n=C[n+4])<0)break}else for(g=t.scalingRatio,s=0;s<S;s+=r)for(c=0;c<s;c+=r)v=e[s+0]-e[c+0],m=e[s+1]-e[c+1],!0===P?(b=Math.sqrt(v*v+m*m)-e[s+8]-e[c+8])>0?(_=g*e[s+6]*e[c+6]/b/b,e[s+2]+=v*_,e[s+3]+=m*_,e[c+2]+=v*_,e[c+3]+=m*_):b<0&&(_=100*g*e[s+6]*e[c+6],e[s+2]+=v*_,e[s+3]+=m*_,e[c+2]-=v*_,e[c+3]-=m*_):(b=Math.sqrt(v*v+m*m))>0&&(_=g*e[s+6]*e[c+6]/b/b,e[s+2]+=v*_,e[s+3]+=m*_,e[c+2]-=v*_,e[c+3]-=m*_);for(d=t.gravity/t.scalingRatio,g=t.scalingRatio,a=0;a<S;a+=r)_=0,v=e[a+0],m=e[a+1],b=Math.sqrt(Math.pow(v,2)+Math.pow(m,2)),t.strongGravityMode?b>0&&(_=g*e[a+6]*d):b>0&&(_=g*e[a+6]*d/b),e[a+2]-=v*_,e[a+3]-=m*_;for(g=1*(t.outboundAttractionDistribution?p:1),l=0;l<T;l+=3)s=i[l+0],c=i[l+1],u=i[l+2],y=Math.pow(u,t.edgeWeightInfluence),v=e[s+0]-e[c+0],m=e[s+1]-e[c+1],!0===P?(b=Math.sqrt(Math.pow(v,2)+Math.pow(m,2)-e[s+8]-e[c+8]),t.linLogMode?t.outboundAttractionDistribution?b>0&&(_=-g*y*Math.log(1+b)/b/e[s+6]):b>0&&(_=-g*y*Math.log(1+b)/b):t.outboundAttractionDistribution?b>0&&(_=-g*y/e[s+6]):b>0&&(_=-g*y)):(b=Math.sqrt(Math.pow(v,2)+Math.pow(m,2)),t.linLogMode?t.outboundAttractionDistribution?b>0&&(_=-g*y*Math.log(1+b)/b/e[s+6]):b>0&&(_=-g*y*Math.log(1+b)/b):t.outboundAttractionDistribution?(b=1,_=-g*y/e[s+6]):(b=1,_=-g*y)),b>0&&(e[s+2]+=v*_,e[s+3]+=m*_,e[c+2]-=v*_,e[c+3]-=m*_);if(!0===P)for(a=0;a<S;a+=r)1!==e[a+9]&&((w=Math.sqrt(Math.pow(e[a+2],2)+Math.pow(e[a+3],2)))>10&&(e[a+2]=10*e[a+2]/w,e[a+3]=10*e[a+3]/w),x=e[a+6]*Math.sqrt((e[a+4]-e[a+2])*(e[a+4]-e[a+2])+(e[a+5]-e[a+3])*(e[a+5]-e[a+3])),L=Math.sqrt((e[a+4]+e[a+2])*(e[a+4]+e[a+2])+(e[a+5]+e[a+3])*(e[a+5]+e[a+3]))/2,E=.1*Math.log(1+L)/(1+Math.sqrt(x)),A=e[a+0]+e[a+2]*(E/t.slowDown),e[a+0]=A,M=e[a+1]+e[a+3]*(E/t.slowDown),e[a+1]=M);else for(a=0;a<S;a+=r)1!==e[a+9]&&(x=e[a+6]*Math.sqrt((e[a+4]-e[a+2])*(e[a+4]-e[a+2])+(e[a+5]-e[a+3])*(e[a+5]-e[a+3])),L=Math.sqrt((e[a+4]+e[a+2])*(e[a+4]+e[a+2])+(e[a+5]+e[a+3])*(e[a+5]+e[a+3]))/2,E=e[a+7]*Math.log(1+L)/(1+Math.sqrt(x)),e[a+7]=Math.min(1,Math.sqrt(E*(Math.pow(e[a+2],2)+Math.pow(e[a+3],2))/(1+Math.sqrt(x)))),A=e[a+0]+e[a+2]*(E/t.slowDown),e[a+0]=A,M=e[a+1]+e[a+3]*(E/t.slowDown),e[a+1]=M);return{}};var o=i.exports;self.addEventListener("message",(function(r){var i=r.data;t=new Float32Array(i.nodes),i.edges&&(e=new Float32Array(i.edges)),o(i.settings,t,e),self.postMessage({nodes:t.buffer},[t.buffer])}))}},t=>{t.exports=function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode&&"boolean"==typeof t.multi}},(t,e)=>{e.assign=function(t){t=t||{};var e,r,i,o=Array.prototype.slice.call(arguments).slice(1);for(e=0,i=o.length;e<i;e++)if(o[e])for(r in o[e])t[r]=o[e][r];return t},e.validateSettings=function(t){return"linLogMode"in t&&"boolean"!=typeof t.linLogMode?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&"boolean"!=typeof t.outboundAttractionDistribution?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&"boolean"!=typeof t.adjustSizes?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&"number"!=typeof t.edgeWeightInfluence&&t.edgeWeightInfluence<0?{message:"the `edgeWeightInfluence` setting should be a number >= 0."}:"scalingRatio"in t&&"number"!=typeof t.scalingRatio&&t.scalingRatio<0?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&"boolean"!=typeof t.strongGravityMode?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&"number"!=typeof t.gravity&&t.gravity<0?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&"number"!=typeof t.slowDown&&t.slowDown<0?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&"boolean"!=typeof t.barnesHutOptimize?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&"number"!=typeof t.barnesHutTheta&&t.barnesHutTheta<0?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},e.graphToByteArrays=function(t){var e,r=t.order,i=t.size,o={},n=new Float32Array(10*r),a=new Float32Array(3*i);return e=0,t.forEachNode((function(r,i){o[r]=e,n[e]=i.x,n[e+1]=i.y,n[e+2]=0,n[e+3]=0,n[e+4]=0,n[e+5]=0,n[e+6]=1+t.degree(r),n[e+7]=1,n[e+8]=i.size||1,n[e+9]=i.fixed?1:0,e+=10})),e=0,t.forEachEdge((function(t,r,i,n){a[e]=o[i],a[e+1]=o[n],a[e+2]=r.weight||0,e+=3})),{nodes:n,edges:a}},e.assignLayoutChanges=function(t,e){for(var r=t.nodes(),i=0,o=0,n=e.length;i<n;i+=10)t.setNodeAttribute(r[o],"x",e[i]),t.setNodeAttribute(r[o],"y",e[i+1]),o++},e.collectLayoutChanges=function(t,e){for(var r=t.nodes(),i=Object.create(null),o=0,n=0,a=e.length;o<a;o+=10)i[r[n]]={x:e[o],y:e[o+1]},n++;return i},e.createWorker=function(t){var e=window.URL||window.webkitURL,r=t.toString(),i=e.createObjectURL(new Blob(["("+r+").call(this);"],{type:"text/javascript"})),o=new Worker(i);return e.revokeObjectURL(i),o}},t=>{t.exports={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}},function(t,e,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.SigmaContainer=void 0;const s=n(r(2)),c=a(r(11)),h=a(r(47)),l=r(3);e.SigmaContainer=({graphOptions:t,id:e,className:r,style:i,initialSettings:o,children:n})=>{const a=s.useRef(null),[u]=s.useState({className:`react-sigma-v2 ${r||""}`,id:e,style:i}),[d,f]=s.useState(null);s.useEffect((()=>{if(null!==a.current){null!==d&&d.kill();const e=new c.default(new h.default(t),a.current,o);f(e)}}),[t,o,a]);const p=s.useMemo((()=>d?{sigma:d}:null),[d]),g=null!==p?s.default.createElement(l.SigmaProvider,{value:p},n):null;return s.default.createElement("div",Object.assign({},u),s.default.createElement("div",{className:"sigma-container",ref:a}),g)}},function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(12),s=n(r(13)),c=n(r(14)),h=n(r(20)),l=n(r(22)),u=r(16),d=r(24),f=r(25),p=n(r(46)),g=s.default.nodeExtent,v=s.default.edgeExtent,m=u.getPixelRatio(),y=u.getPixelRatio();function b(t,e,r){if(!r.hasOwnProperty("x")||!r.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'+e+'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?');r.color||(r.color=t.defaultNodeColor),r.label||(r.label=""),r.size||(r.size=2),r.hasOwnProperty("hidden")||(r.hidden=!1),r.hasOwnProperty("highlighted")||(r.highlighted=!1)}function _(t,e,r){r.color||(r.color=t.defaultEdgeColor),r.label||(r.label=""),r.size||(r.size=.5),r.hasOwnProperty("hidden")||(r.hidden=!1)}var w=function(t){function e(e,r,i){void 0===i&&(i={});var o=t.call(this)||this;if(o.elements={},o.canvasContexts={},o.webGLContexts={},o.activeListeners={},o.quadtree=new l.default,o.nodeDataCache={},o.edgeDataCache={},o.nodeKeyToIndex={},o.edgeKeyToIndex={},o.nodeExtent=null,o.edgeExtent=null,o.normalizationFunction=u.createNormalizationFunction({x:[-1/0,1/0],y:[-1/0,1/0]}),o.width=0,o.height=0,o.highlightedNodes=new Set,o.displayedLabels=new Set,o.hoveredNode=null,o.renderFrame=null,o.renderHighlightedNodesFrame=null,o.needToProcess=!1,o.needToSoftProcess=!1,o.nodePrograms={},o.edgePrograms={},o.settings=u.assignDeep({},f.DEFAULT_SETTINGS,i),f.validateSettings(o.settings),u.validateGraph(e),!(r instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");o.graph=e,o.container=r,o.initializeCache(),o.createWebGLContext("edges"),o.createWebGLContext("nodes"),o.createCanvasContext("edgeLabels"),o.createCanvasContext("labels"),o.createCanvasContext("hovers"),o.createCanvasContext("mouse");var n=o.webGLContexts.nodes;for(var a in n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.BLEND),(n=o.webGLContexts.edges).blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.BLEND),o.settings.nodeProgramClasses){var s=o.settings.nodeProgramClasses[a];o.nodePrograms[a]=new s(o.webGLContexts.nodes)}for(var a in o.settings.edgeProgramClasses){var d=o.settings.edgeProgramClasses[a];o.edgePrograms[a]=new d(o.webGLContexts.edges)}return o.resize(),o.camera=new c.default,o.bindCameraHandlers(),o.mouseCaptor=new h.default(o.elements.mouse,o.camera),o.touchCaptor=new p.default(o.elements.mouse,o.camera),o.bindEventHandlers(),o.bindGraphHandlers(),o.process(),o.render(),o}return o(e,t),e.prototype.createCanvas=function(t){var e=u.createElement("canvas",{position:"absolute"},{class:"sigma-"+t});return this.elements[t]=e,this.container.appendChild(e),e},e.prototype.createCanvasContext=function(t){var e=this.createCanvas(t);return this.canvasContexts[t]=e.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},e.prototype.createWebGLContext=function(t){var e,r=this.createCanvas(t),i={preserveDrawingBuffer:!1,antialias:!1};return(e=r.getContext("webgl2",i))||(e=r.getContext("webgl",i)),e||(e=r.getContext("experimental-webgl",i)),this.webGLContexts[t]=e,this},e.prototype.initializeCache=function(){var t=this,e=this.graph,r=0;e.forEachNode((function(e){t.nodeKeyToIndex[e]=r++,t.nodeDataCache[e]={}})),r=0,e.forEachEdge((function(e){t.edgeKeyToIndex[e]=r++,t.edgeDataCache[e]={}}))},e.prototype.bindCameraHandlers=function(){var t=this;return this.activeListeners.camera=function(){t.scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},e.prototype.bindEventHandlers=function(){var t=this;this.activeListeners.handleResize=function(){t.needToSoftProcess=!0,t.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize);var e=function(t,e,r,i,o){return t>r-o&&t<r+o&&e>i-o&&e<i+o&&Math.sqrt(Math.pow(t-r,2)+Math.pow(e-i,2))<o},r=function(e,r){var i=t.camera.viewportToFramedGraph({width:t.width,height:t.height},{x:e,y:r});return t.quadtree.point(i.x,1-i.y)};this.activeListeners.handleMove=function(i){for(var o=Math.pow(t.camera.getState().ratio,.5),n=r(i.x,i.y),a={width:t.width,height:t.height},s=1/0,c=null,h=0,l=n.length;h<l;h++){var u=n[h],d=t.nodeDataCache[u],f=t.camera.framedGraphToViewport(a,d),p=d.size/o;if(e(i.x,i.y,f.x,f.y,p)){var g=Math.sqrt(Math.pow(i.x-f.x,2)+Math.pow(i.y-f.y,2));g<s&&(s=g,c=u)}}if(c&&t.hoveredNode!==c)return t.hoveredNode&&t.emit("leaveNode",{node:t.hoveredNode}),t.hoveredNode=c,t.emit("enterNode",{node:c}),void t.scheduleHighlightedNodesRender();if(t.hoveredNode){d=t.nodeDataCache[t.hoveredNode],f=t.camera.framedGraphToViewport(a,d),p=d.size/o;if(!e(i.x,i.y,f.x,f.y,p)){u=t.hoveredNode;return t.hoveredNode=null,t.emit("leaveNode",{node:u}),t.scheduleHighlightedNodesRender()}}};var i=function(i){return function(o){for(var n=Math.pow(t.camera.getState().ratio,.5),a=r(o.x,o.y),s={width:t.width,height:t.height},c=0,h=a.length;c<h;c++){var l=a[c],u=t.nodeDataCache[l],d=t.camera.framedGraphToViewport(s,u),f=u.size/n;if(e(o.x,o.y,d.x,d.y,f))return t.emit(i+"Node",{node:l,captor:o,event:o})}return t.emit(i+"Stage",{event:o})}};return this.activeListeners.handleClick=i("click"),this.activeListeners.handleRightClick=i("rightClick"),this.activeListeners.handleDown=i("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},e.prototype.bindGraphHandlers=function(){var t=this,e=this.graph;return this.activeListeners.graphUpdate=function(){t.needToProcess=!0,t.scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){t.needToSoftProcess=!0,t.scheduleRefresh()},this.activeListeners.addNodeGraphUpdate=function(r){t.nodeKeyToIndex[r.key]=e.order-1,t.nodeDataCache[r.key]={},t.activeListeners.graphUpdate()},this.activeListeners.addEdgeGraphUpdate=function(r){t.nodeKeyToIndex[r.key]=e.order-1,t.edgeDataCache[r.key]={},t.activeListeners.graphUpdate()},e.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),e.on("nodeDropped",this.activeListeners.graphUpdate),e.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),e.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),e.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),e.on("edgeDropped",this.activeListeners.graphUpdate),e.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),e.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),e.on("edgesCleared",this.activeListeners.graphUpdate),e.on("cleared",this.activeListeners.graphUpdate),this},e.prototype.process=function(t){void 0===t&&(t=!1);var e=this.graph,r=this.settings;this.quadtree.clear(),this.highlightedNodes=new Set;var i=["x","y","z"];this.settings.zIndex&&(i.push("z"),this.edgeExtent=v(e,["z"])),this.nodeExtent=g(e,i),this.normalizationFunction=u.createNormalizationFunction(this.nodeExtent);var o=this.nodePrograms[this.settings.defaultNodeType];t||o.allocate(e.order);var n=e.nodes();this.settings.zIndex&&(n=u.zIndexOrdering(this.nodeExtent.z,(function(t){return e.getNodeAttribute(t,"z")}),n));for(var a=0,s=n.length;a<s;a++){var c=n[a],h=e.getNodeAttributes(c);r.nodeReducer&&(h=r.nodeReducer(c,h)),h=Object.assign(this.nodeDataCache[c],h),b(this.settings,c,h),this.normalizationFunction.applyTo(h),this.quadtree.add(c,h.x,1-h.y,h.size/this.width),o.process(h,h.hidden,a),h.highlighted&&!h.hidden&&this.highlightedNodes.add(c),this.nodeKeyToIndex[c]=a}o.bind(),o.bufferData();var l=this.edgePrograms[this.settings.defaultEdgeType];t||l.allocate(e.size);var d=e.edges();this.settings.zIndex&&this.edgeExtent&&(d=u.zIndexOrdering(this.edgeExtent.z,(function(t){return e.getEdgeAttribute(t,"z")}),d));for(a=0,s=d.length;a<s;a++){var f=d[a];h=e.getEdgeAttributes(f);r.edgeReducer&&(h=r.edgeReducer(f,h)),h=Object.assign(this.edgeDataCache[f],h),_(this.settings,0,h);var p=e.extremities(f),m=this.nodeDataCache[p[0]],y=this.nodeDataCache[p[1]],w=h.hidden||m.hidden||y.hidden;l.process(m,y,h,w,a),this.nodeKeyToIndex[f]=a}return t||"function"!=typeof l.computeIndices||l.computeIndices(),l.bind(),l.bufferData(),this},e.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var t,e=this.camera.getState(),r={width:this.width,height:this.height};if(e.ratio>=1)t=this.graph.nodes();else{var i=this.camera.viewRectangle(r);t=this.quadtree.rectangle(i.x1,1-i.y1,i.x2,1-i.y2,i.height)}for(var o=this.settings.labelGrid,n=d.labelsToDisplayFromGrid({cache:this.nodeDataCache,camera:this.camera,cell:o.cell,dimensions:r,displayedLabels:this.displayedLabels,fontSize:this.settings.labelSize,graph:this.graph,renderedSizeThreshold:o.renderedSizeThreshold,visibleNodes:t}),a=this.canvasContexts.labels,s=Math.pow(e.ratio,.5),c=0,h=n.length;c<h;c++){var l=this.nodeDataCache[n[c]],u=this.camera.framedGraphToViewport(r,l),f=u.x,p=u.y,g=l.size/s;this.settings.labelRenderer(a,{key:n[c],label:l.label,color:"#000",size:g,x:f,y:p},this.settings)}return this.displayedLabels=new Set(n),this},e.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var t=this.camera.getState(),e=Math.pow(t.ratio,.5),r=this.canvasContexts.edgeLabels,i={width:this.width,height:this.height};r.clearRect(0,0,this.width,this.height);for(var o=d.edgeLabelsToDisplayFromNodes({nodeDataCache:this.nodeDataCache,edgeDataCache:this.edgeDataCache,graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}),n=0,a=o.length;n<a;n++){var s=o[n],c=this.graph.extremities(s),h=this.nodeDataCache[c[0]],l=this.nodeDataCache[c[1]],u=this.edgeDataCache[o[n]],f=this.camera.framedGraphToViewport(i,h),p=f.x,g=f.y,v=this.camera.framedGraphToViewport(i,l),m=v.x,y=v.y,b=u.size/e;this.settings.edgeLabelRenderer(r,{key:s,label:u.label,color:u.color,size:b},{key:c[0],x:p,y:g},{key:c[1],x:m,y},this.settings)}return this},e.prototype.renderHighlightedNodes=function(){var t=this,e=this.camera,r=Math.pow(e.getState().ratio,.5),i=this.canvasContexts.hovers;i.clearRect(0,0,this.width,this.height);var o=function(o){var n=t.nodeDataCache[o],a=e.framedGraphToViewport({width:t.width,height:t.height},n),s=a.x,c=a.y,h=n.size/r;t.settings.hoverRenderer(i,{key:o,label:n.label,color:n.color,size:h,x:s,y:c},t.settings)};this.hoveredNode&&o(this.hoveredNode),this.highlightedNodes.forEach(o)},e.prototype.scheduleHighlightedNodesRender=function(){var t=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=u.requestFrame((function(){t.renderHighlightedNodesFrame=null,t.renderHighlightedNodes(),t.renderEdgeLabels()})))},e.prototype.render=function(){if(this.renderFrame&&(u.cancelFrame(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),!this.graph.order)return this;var t=this.mouseCaptor,e=this.camera.isAnimated()||t.isMoving||t.draggedEvents||t.currentWheelDirection,r=this.camera.getState(),i=u.matrixFromCamera(r,{width:this.width,height:this.height});return this.nodePrograms[this.settings.defaultNodeType].render({matrix:i,width:this.width,height:this.height,ratio:r.ratio,nodesPowRatio:.5,scalingRatio:y}),this.settings.hideEdgesOnMove&&e||this.edgePrograms[this.settings.defaultEdgeType].render({matrix:i,width:this.width,height:this.height,ratio:r.ratio,edgesPowRatio:.5,scalingRatio:y}),this.settings.hideLabelsOnMove&&e||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),this},e.prototype.getCamera=function(){return this.camera},e.prototype.getGraph=function(){return this.graph},e.prototype.getMouseCaptor=function(){return this.mouseCaptor},e.prototype.getTouchCaptor=function(){return this.touchCaptor},e.prototype.getDimensions=function(){return{width:this.width,height:this.height}},e.prototype.getNodeAttributes=function(t){var e=this.nodeDataCache[t];return e?Object.assign({},e):void 0},e.prototype.getEdgeAttributes=function(t){var e=this.edgeDataCache[t];return e?Object.assign({},e):void 0},e.prototype.getSetting=function(t){return this.settings[t]},e.prototype.setSetting=function(t,e){return this.settings[t]=e,f.validateSettings(this.settings),this.needToProcess=!0,this.scheduleRefresh(),this},e.prototype.updateSetting=function(t,e){return this.settings[t]=e(this.settings[t]),f.validateSettings(this.settings),this.needToProcess=!0,this.scheduleRefresh(),this},e.prototype.resize=function(){var t=this.width,e=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,0===this.width)throw new Error("Sigma: container has no width.");if(0===this.height)throw new Error("Sigma: container has no height.");if(t===this.width&&e===this.height)return this;for(var r in this.elements){var i=this.elements[r];i.style.width=this.width+"px",i.style.height=this.height+"px"}for(var r in this.canvasContexts)this.elements[r].setAttribute("width",this.width*m+"px"),this.elements[r].setAttribute("height",this.height*m+"px"),1!==m&&this.canvasContexts[r].scale(m,m);for(var r in this.webGLContexts)this.elements[r].setAttribute("width",this.width*y+"px"),this.elements[r].setAttribute("height",this.height*y+"px"),this.webGLContexts[r].viewport(0,0,this.width*y,this.height*y);return this},e.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},e.prototype.refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},e.prototype.scheduleRefresh=function(){var t=this;return this.renderFrame||(this.renderFrame=u.requestFrame((function(){t.refresh(),t.renderFrame=null}))),this},e.prototype.viewportToGraph=function(t){return this.normalizationFunction.inverse(this.camera.viewportToFramedGraph(this.getDimensions(),t))},e.prototype.graphToViewport=function(t){return this.camera.framedGraphToViewport(this.getDimensions(),this.normalizationFunction(t))},e.prototype.kill=function(){var t=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),t.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),t.removeListener("nodeDropped",this.activeListeners.graphUpdate),t.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),t.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),t.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),t.removeListener("edgeDropped",this.activeListeners.graphUpdate),t.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),t.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),t.removeListener("edgesCleared",this.activeListeners.graphUpdate),t.removeListener("cleared",this.activeListeners.graphUpdate),this.quadtree=new l.default,this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes=new Set,this.displayedLabels=new Set,this.renderFrame&&(u.cancelFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(u.cancelFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)},e}(a.EventEmitter);e.default=w},t=>{"use strict";var e,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};e=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var o=Number.isNaN||function(t){return t!=t};function n(){n.init.call(this)}t.exports=n,t.exports.once=function(t,e){return new Promise((function(r,i){function o(r){t.removeListener(e,n),i(r)}function n(){"function"==typeof t.removeListener&&t.removeListener("error",o),r([].slice.call(arguments))}g(t,e,n,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&g(t,"error",e,r)}(t,o,{once:!0})}))},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?n.defaultMaxListeners:t._maxListeners}function h(t,e,r,i){var o,n,a,h;if(s(r),void 0===(n=t._events)?(n=t._events=Object.create(null),t._eventsCount=0):(void 0!==n.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),n=t._events),a=n[e]),void 0===a)a=n[e]=r,++t._eventsCount;else if("function"==typeof a?a=n[e]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),(o=c(t))>0&&a.length>o&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,h=l,console&&console.warn&&console.warn(h)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=l.bind(i);return o.listener=r,i.wrapFn=o,o}function d(t,e,r){var i=t._events;if(void 0===i)return[];var o=i[e];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(o):p(o,o.length)}function f(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function g(t,e,r,i){if("function"==typeof t.on)i.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(n){i.once&&t.removeEventListener(e,o),r(n)}))}}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),n.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||o(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},n.prototype.getMaxListeners=function(){return c(this)},n.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var o="error"===t,n=this._events;if(void 0!==n)o=o&&void 0===n.error;else if(!o)return!1;if(o){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=n[t];if(void 0===c)return!1;if("function"==typeof c)i(c,this,e);else{var h=c.length,l=p(c,h);for(r=0;r<h;++r)i(l[r],this,e)}return!0},n.prototype.addListener=function(t,e){return h(this,t,e,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(t,e){return h(this,t,e,!0)},n.prototype.once=function(t,e){return s(e),this.on(t,u(this,t,e)),this},n.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,u(this,t,e)),this},n.prototype.removeListener=function(t,e){var r,i,o,n,a;if(s(e),void 0===(i=this._events))return this;if(void 0===(r=i[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(o=-1,n=r.length-1;n>=0;n--)if(r[n]===e||r[n].listener===e){a=r[n].listener,o=n;break}if(o<0)return this;0===o?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,o),1===r.length&&(i[t]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",t,a||e)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(t){var e,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var o,n=Object.keys(r);for(i=0;i<n.length;++i)"removeListener"!==(o=n[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},n.prototype.listeners=function(t){return d(this,t,!0)},n.prototype.rawListeners=function(t){return d(this,t,!1)},n.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},n.prototype.listenerCount=f,n.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},(t,e,r)=>{var i=r(7);function o(t,e){if(!i(t))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var r,o,n,a=[].concat(e),s={};for(n=0;n<a.length;n++)o=a[n],s[o]=[1/0,-1/0];return t.forEachNode((function(t,e){for(n=0;n<a.length;n++)o=a[n],(r=e[o])<s[o][0]&&(s[o][0]=r),r>s[o][1]&&(s[o][1]=r)})),"string"==typeof e?s[e]:s}var n=o;n.nodeExtent=o,n.edgeExtent=function(t,e){if(!i(t))throw new Error("graphology-metrics/extent: the given graph is not a valid graphology instance.");var r,o,n,a=[].concat(e),s={};for(n=0;n<a.length;n++)o=a[n],s[o]=[1/0,-1/0];return t.forEachEdge((function(t,e){for(n=0;n<a.length;n++)o=a[n],(r=e[o])<s[o][0]&&(s[o][0]=r),r>s[o][1]&&(s[o][1]=r)})),"string"==typeof e?s[e]:s},t.exports=n},function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,o,n=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=r(12),h=r(15),l=s(r(19)),u=r(16),d=1.5,f=function(t){function e(){var e=t.call(this)||this;return e.x=.5,e.y=.5,e.angle=0,e.ratio=1,e.nextFrame=null,e.enabled=!0,e.previousState=e.getState(),e}return o(e,t),e.from=function(t){return(new e).setState(t)},e.prototype.enable=function(){return this.enabled=!0,this},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},e.prototype.getPreviousState=function(){var t=this.previousState;return{x:t.x,y:t.y,angle:t.angle,ratio:t.ratio}},e.prototype.isAnimated=function(){return!!this.nextFrame},e.prototype.framedGraphToViewport=function(t,e){var r=Math.min(t.width,t.height),i=r/t.width,o=r/t.height,n=this.ratio/r,a=(e.x-this.x)/n,s=(this.y-e.y)/n;return{x:a*Math.cos(this.angle)-s*Math.sin(this.angle)+r/2/i,y:s*Math.cos(this.angle)+a*Math.sin(this.angle)+r/2/o}},e.prototype.viewportToFramedGraph=function(t,e){var r,i=Math.min(t.width,t.height),o=i/t.width,n=i/t.height,s=this.ratio/i,c=e.x-i/2/o,h=e.y-i/2/n;return c=(r=a([c*Math.cos(-this.angle)-h*Math.sin(-this.angle),h*Math.cos(-this.angle)+c*Math.sin(-this.angle)],2))[0],h=r[1],{x:c*s+this.x,y:-h*s+this.y}},e.prototype.viewRectangle=function(t){var e=0*t.width/8,r=0*t.height/8,i=this.viewportToFramedGraph(t,{x:0-e,y:0-r}),o=this.viewportToFramedGraph(t,{x:t.width+e,y:0-r}),n=this.viewportToFramedGraph(t,{x:0,y:t.height+r});return{x1:i.x,y1:i.y,x2:o.x,y2:o.y,height:o.y-n.y}},e.prototype.setState=function(t){return this.enabled?(this.previousState=this.getState(),t.x&&(this.x=t.x),t.y&&(this.y=t.y),t.angle&&(this.angle=t.angle),t.ratio&&(this.ratio=t.ratio),this.emit("updated",this.getState()),this):this},e.prototype.getViewportZoomedState=function(t,e,r){var i=r/this.ratio,o={x:e.width/2,y:e.height/2},a=this.viewportToFramedGraph(e,t),s=this.viewportToFramedGraph(e,o);return n(n({},this.getState()),{x:(a.x-s.x)*(1-i)+this.x,y:(a.y-s.y)*(1-i)+this.y,ratio:r})},e.prototype.animate=function(t,e,r){var i=this;if(this.enabled){var o=Object.assign({},h.ANIMATE_DEFAULTS,e),n="function"==typeof o.easing?o.easing:l.default[o.easing],a=Date.now(),s=this.getState(),c=function(){var e=(Date.now()-a)/o.duration;if(e>=1)return i.nextFrame=null,i.setState(t),void(i.animationCallback&&(i.animationCallback.call(null),i.animationCallback=void 0));var r=n(e),h={};t.x&&(h.x=s.x+(t.x-s.x)*r),t.y&&(h.y=s.y+(t.y-s.y)*r),t.angle&&(h.angle=s.angle+(t.angle-s.angle)*r),t.ratio&&(h.ratio=s.ratio+(t.ratio-s.ratio)*r),i.setState(h),i.nextFrame=u.requestFrame(c)};this.nextFrame?(u.cancelFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=u.requestFrame(c)):c(),this.animationCallback=r}},e.prototype.animatedZoom=function(t){if(t){if("number"==typeof t)return this.animate({ratio:this.ratio/t});this.animate({ratio:this.ratio/(t.factor||d)},t)}else this.animate({ratio:this.ratio/d})},e.prototype.animatedUnzoom=function(t){if(t){if("number"==typeof t)return this.animate({ratio:this.ratio*t});this.animate({ratio:this.ratio*(t.factor||d)},t)}else this.animate({ratio:this.ratio*d})},e.prototype.animatedReset=function(t){this.animate({x:.5,y:.5,ratio:1,angle:0},t)},e.prototype.copy=function(){return e.from(this.getState())},e}(c.EventEmitter);e.default=f},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.animateNodes=e.ANIMATE_DEFAULTS=void 0;var o=r(16),n=i(r(19));e.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},e.animateNodes=function(t,r,i,a){var s=Object.assign({},e.ANIMATE_DEFAULTS,i),c="function"==typeof s.easing?s.easing:n.default[s.easing],h=Date.now(),l={};for(var u in r){var d=r[u];for(var f in l[u]={},d)l[u][f]=t.getNodeAttribute(u,f)}var p=null,g=function(){var e=(Date.now()-h)/s.duration;if(e>=1){for(var i in r){var n=r[i];for(var u in n)t.setNodeAttribute(i,u,n[u])}"function"==typeof a&&a()}else{for(var i in e=c(e),r){n=r[i];var d=l[i];for(var u in n)t.setNodeAttribute(i,u,n[u]*e+d[u]*(1-e))}p=o.requestFrame(g)}};return g(),function(){p&&o.cancelFrame(p)}}},function(t,e,r){"use strict";var i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,o,n=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.validateGraph=e.canUse32BitsIndices=e.extractPixel=e.matrixFromCamera=e.floatColor=e.zIndexOrdering=e.createNormalizationFunction=e.getPixelRatio=e.createElement=e.cancelFrame=e.requestFrame=e.assignDeep=e.isPlainObject=void 0;var n=o(r(17)),a=r(18);function s(t){return"object"==typeof t&&null!==t&&t.constructor===Object}e.isPlainObject=s,e.assignDeep=function t(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];e=e||{};for(var o=0,n=r.length;o<n;o++){var a=r[o];if(a)for(var c in a)s(a[c])?e[c]=t(e[c],a[c]):e[c]=a[c]}return e},e.requestFrame="undefined"!=typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,0)},e.cancelFrame="undefined"!=typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:function(t){return clearTimeout(t)},e.createElement=function(t,e,r){var i=document.createElement(t);if(e)for(var o in e)i.style[o]=e[o];if(r)for(var o in r)i.setAttribute(o,r[o]);return i},e.getPixelRatio=function(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:1},e.createNormalizationFunction=function(t){var e=i(t.x,2),r=e[0],o=e[1],n=i(t.y,2),a=n[0],s=n[1],c=Math.max(o-r,s-a);0===c&&(c=1);var h=(o+r)/2,l=(s+a)/2,u=function(t){return{x:.5+(t.x-h)/c,y:.5+(t.y-l)/c}};return u.applyTo=function(t){t.x=.5+(t.x-h)/c,t.y=.5+(t.y-l)/c},u.inverse=function(t){return{x:h+c*(t.x-.5),y:l+c*(t.y-.5)}},u.ratio=c,u},e.zIndexOrdering=function(t,e,r){return r.sort((function(t,r){var i=e(t)||0,o=e(r)||0;return i<o?-1:i>o?1:0}))};var c={},h=new Int8Array(4),l=new Int32Array(h.buffer,0,1),u=new Float32Array(h.buffer,0,1),d=/^\s*rgba?\s*\(/,f=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;e.floatColor=function(t){if(void 0!==c[t])return c[t];var e=0,r=0,i=0,o=1;if("#"===t[0])4===t.length?(e=parseInt(t.charAt(1)+t.charAt(1),16),r=parseInt(t.charAt(2)+t.charAt(2),16),i=parseInt(t.charAt(3)+t.charAt(3),16)):(e=parseInt(t.charAt(1)+t.charAt(2),16),r=parseInt(t.charAt(3)+t.charAt(4),16),i=parseInt(t.charAt(5)+t.charAt(6),16));else if(d.test(t)){var n=t.match(f);n&&(e=+n[1],r=+n[2],i=+n[3],n[4]&&(o=+n[4]))}o=255*o|0,l[0]=4278190079&(o<<24|i<<16|r<<8|e);var a=u[0];return c[t]=a,a},e.matrixFromCamera=function(t,e){var r=t.angle,i=t.ratio,o=t.x,n=t.y,s=e.width,c=e.height,h=a.identity(),l=Math.min(s,c),u=a.translate(a.identity(),-o,-n),d=a.scale(a.identity(),1/i),f=a.rotate(a.identity(),-r),p=a.scale(a.identity(),l/s*2,l/c*2);return a.multiply(h,p),a.multiply(h,f),a.multiply(h,d),a.multiply(h,u),h},e.extractPixel=function(t,e,r,i){var o=i||new Uint8Array(4);return t.readPixels(e,r,1,1,t.RGBA,t.UNSIGNED_BYTE,o),o},e.canUse32BitsIndices=function(t){return"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||!!t.getExtension("OES_element_index_uint")},e.validateGraph=function(t){if(!n.default(t))throw new Error("Sigma: invalid graph instance.");t.forEachNode((function(t,e){if(!Number.isFinite(e.x)||!Number.isFinite(e.y))throw new Error("Sigma: Coordinates of node "+t+" are invalid. A node must have a numeric 'x' and 'y' attribute.")}))}},t=>{t.exports=function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNode&&"boolean"==typeof t.multi}},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiply=e.translate=e.rotate=e.scale=e.identity=void 0,e.identity=function(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},e.scale=function(t,e,r){return t[0]=e,t[4]="number"==typeof r?r:e,t},e.rotate=function(t,e){var r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[3]=-r,t[4]=i,t},e.translate=function(t,e,r){return t[6]=e,t[7]=r,t},e.multiply=function(t,e){var r=t[0],i=t[1],o=t[2],n=t[3],a=t[4],s=t[5],c=t[6],h=t[7],l=t[8],u=e[0],d=e[1],f=e[2],p=e[3],g=e[4],v=e[5],m=e[6],y=e[7],b=e[8];return t[0]=u*r+d*n+f*c,t[1]=u*i+d*a+f*h,t[2]=u*o+d*s+f*l,t[3]=p*r+g*n+v*c,t[4]=p*i+g*a+v*h,t[5]=p*o+g*s+v*l,t[6]=m*r+y*n+b*c,t[7]=m*i+y*a+b*h,t[8]=m*o+y*s+b*l,t}},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cubicInOut=e.cubicOut=e.cubicIn=e.quadraticInOut=e.quadraticOut=e.quadraticIn=e.linear=void 0;e.linear=function(t){return t};e.quadraticIn=function(t){return t*t};e.quadraticOut=function(t){return t*(2-t)};e.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)};e.cubicIn=function(t){return t*t*t};e.cubicOut=function(t){return--t*t*t+1};e.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};var r={linear:e.linear,quadraticIn:e.quadraticIn,quadraticOut:e.quadraticOut,quadraticInOut:e.quadraticInOut,cubicIn:e.cubicIn,cubicOut:e.cubicOut,cubicInOut:e.cubicInOut};e.default=r},function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var c=s(r(21)),h=function(t){function e(e,r){var i=t.call(this,e,r)||this;return i.enabled=!0,i.draggedEvents=0,i.downStartTime=null,i.lastMouseX=null,i.lastMouseY=null,i.isMouseDown=!1,i.isMoving=!1,i.movingTimeout=null,i.startCameraState=null,i.clicks=0,i.doubleClickTimeout=null,i.currentWheelDirection=0,i.handleClick=i.handleClick.bind(i),i.handleRightClick=i.handleRightClick.bind(i),i.handleDown=i.handleDown.bind(i),i.handleUp=i.handleUp.bind(i),i.handleMove=i.handleMove.bind(i),i.handleWheel=i.handleWheel.bind(i),i.handleOut=i.handleOut.bind(i),e.addEventListener("click",i.handleClick,!1),e.addEventListener("contextmenu",i.handleRightClick,!1),e.addEventListener("mousedown",i.handleDown,!1),e.addEventListener("mousemove",i.handleMove,!1),e.addEventListener("wheel",i.handleWheel,!1),e.addEventListener("mouseout",i.handleOut,!1),document.addEventListener("mouseup",i.handleUp,!1),i}return o(e,t),e.prototype.kill=function(){var t=this.container;t.removeEventListener("click",this.handleClick),t.removeEventListener("contextmenu",this.handleRightClick),t.removeEventListener("mousedown",this.handleDown),t.removeEventListener("mousemove",this.handleMove),t.removeEventListener("wheel",this.handleWheel),t.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mouseup",this.handleUp)},e.prototype.handleClick=function(t){var e=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(t);setTimeout((function(){e.clicks=0,e.doubleClickTimeout=null}),300),this.draggedEvents<3&&this.emit("click",c.getMouseCoords(t))}},e.prototype.handleRightClick=function(t){this.enabled&&this.emit("rightClick",c.getMouseCoords(t))},e.prototype.handleDoubleClick=function(t){if(this.enabled){var e=this.camera.getState().ratio/2.2;return this.camera.animate(this.camera.getViewportZoomedState({x:c.getX(t),y:c.getY(t)},{width:this.container.offsetWidth,height:this.container.offsetHeight},e),{easing:"quadraticInOut",duration:200}),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}},e.prototype.handleDown=function(t){this.enabled&&(this.startCameraState=this.camera.getState(),this.lastMouseX=c.getX(t),this.lastMouseY=c.getY(t),this.draggedEvents=0,this.downStartTime=Date.now(),t.which,this.isMouseDown=!0,this.emit("mousedown",c.getMouseCoords(t)))},e.prototype.handleUp=function(t){var e=this;if(this.enabled&&this.isMouseDown){this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var r=c.getX(t),i=c.getY(t),o=this.camera.getState(),n=this.camera.getPreviousState();this.isMoving?this.camera.animate({x:o.x+3*(o.x-n.x),y:o.y+3*(o.y-n.y)},{duration:200,easing:"quadraticOut"}):this.lastMouseX===r&&this.lastMouseY===i||this.camera.setState({x:o.x,y:o.y}),this.isMoving=!1,setTimeout((function(){return e.draggedEvents=0}),0),this.emit("mouseup",c.getMouseCoords(t))}},e.prototype.handleMove=function(t){var e=this;if(this.enabled){if(this.emit("mousemove",c.getMouseCoords(t)),this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout((function(){e.movingTimeout=null,e.isMoving=!1}),200);var r={width:this.container.offsetWidth,height:this.container.offsetHeight},i=c.getX(t),o=c.getY(t),n=this.camera.viewportToFramedGraph(r,{x:this.lastMouseX,y:this.lastMouseY}),a=this.camera.viewportToFramedGraph(r,{x:i,y:o}),s=n.x-a.x,h=n.y-a.y,l=this.camera.getState(),u=l.x+s,d=l.y+h;this.camera.setState({x:u,y:d}),this.lastMouseX=i,this.lastMouseY=o}return t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}},e.prototype.handleWheel=function(t){var e=this;if(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!this.enabled)return!1;var r=c.getWheelDelta(t);if(!r)return!1;var i=r>0?1/1.7:1.7,o=this.camera.getState().ratio*i,n=r>0?1:-1,a=Date.now();return this.currentWheelDirection===n&&this.lastWheelTriggerTime&&a-this.lastWheelTriggerTime<50||(this.camera.animate(this.camera.getViewportZoomedState({x:c.getX(t),y:c.getY(t)},{width:this.container.offsetWidth,height:this.container.offsetHeight},o),{easing:"quadraticOut",duration:250},(function(){e.currentWheelDirection=0})),this.currentWheelDirection=n,this.lastWheelTriggerTime=a),!1},e.prototype.handleOut=function(){},e}(c.default);e.default=h},function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.getWheelDelta=e.getTouchCoords=e.getTouchesArray=e.getMouseCoords=e.getPosition=e.getY=e.getX=void 0;var n=r(12);function a(t){if(void 0!==t.offsetX)return t.offsetX;if(void 0!==t.clientX)return t.clientX;throw new Error("Captor: could not extract x from event.")}function s(t){if(void 0!==t.offsetY)return t.offsetY;if(void 0!==t.clientY)return t.clientY;throw new Error("Captor: could not extract y from event.")}function c(t){return{x:a(t),y:s(t)}}e.getX=a,e.getY=s,e.getPosition=c,e.getMouseCoords=function(t){return{x:a(t),y:s(t),clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey,preventDefault:t.preventDefault.bind(t),original:t}};function h(t){for(var e=[],r=0,i=Math.min(t.length,2);r<i;r++)e.push(t[r]);return e}e.getTouchesArray=h,e.getTouchCoords=function(t){return{touches:h(t.touches).map(c),ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey,preventDefault:t.preventDefault.bind(t),original:t}},e.getWheelDelta=function(t){if(void 0!==t.deltaY)return-3*t.deltaY/360;if(void 0!==t.detail)return t.detail/-9;throw new Error("Captor: could not extract delta from event.")};var l=function(t){function e(e,r){var i=t.call(this)||this;return i.container=e,i.camera=r,i}return o(e,t),e}(n.EventEmitter);e.default=l},function(t,e,r){"use strict";var i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,o,n=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(t,e){for(var r=0,i=e.length,o=t.length;r<i;r++,o++)t[o]=e[r];return t},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.rectangleCollidesWithQuad=e.squareCollidesWithQuad=e.getCircumscribedAlignedRectangle=e.isRectangleAligned=void 0;var a=n(r(23));function s(t){return t.x1===t.x2||t.y1===t.y2}function c(t){var e=Math.sqrt(Math.pow(t.x2-t.x1,2)+Math.pow(t.y2-t.y1,2)),r=(t.y1-t.y2)*t.height/e,i=(t.x2-t.x1)*t.height/e,o={x:t.x1,y:t.y1},n={x:t.x2,y:t.y2},a={x:t.x1+r,y:t.y1+i},s={x:t.x2+r,y:t.y2+i},c=Math.min(o.x,n.x,a.x,s.x),h=Math.max(o.x,n.x,a.x,s.x),l=Math.min(o.y,n.y,a.y,s.y);return{x1:c,y1:l,x2:h,y2:l,height:Math.max(o.y,n.y,a.y,s.y)-l}}function h(t,e,r,i,o,n,a){return t<i+n&&t+r>i&&e<o+a&&e+r>o}function l(t,e,r,i,o,n,a,s){return t<o+a&&t+r>o&&e<n+s&&e+i>n}function u(t,e,r,i,o,n){var a=t<r+o/2;return e<i+n/2?a?1:2:a?3:4}e.isRectangleAligned=s,e.getCircumscribedAlignedRectangle=c,e.squareCollidesWithQuad=h,e.rectangleCollidesWithQuad=l;var d=function(){function t(t){void 0===t&&(t={}),this.containers={},this.cache=null,this.lastRectangle=null;var e=Math.pow(4,5);this.data=new Float32Array((4*e-1)/3*4),t.boundaries?this.resize(t.boundaries):this.resize({x:0,y:0,width:1,height:1})}return t.prototype.add=function(t,e,r,i){return function(t,e,r,i,o,n,a){for(var s=o-a,c=n-a,l=2*a,u=0,d=0;;){if(u>=t)return r[d]=r[d]||[],void r[d].push(i);var f=4*d+4,p=4*d+8,g=4*d+12,v=4*d+16,m=h(s,c,l,e[f+0],e[f+1],e[f+2],e[f+3]),y=h(s,c,l,e[p+0],e[p+1],e[p+2],e[p+3]),b=h(s,c,l,e[g+0],e[g+1],e[g+2],e[g+3]),_=h(s,c,l,e[v+0],e[v+1],e[v+2],e[v+3]),w=[m,y,b,_].reduce((function(t,e){return e?t+1:t}),0);if(0===w)throw new Error("sigma/quadtree.insertNode: no collision (level: "+u+", key: "+i+", x: "+o+", y: "+n+", size: "+a+").");if(3===w)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: "+u+", key: "+i+", x: "+o+", y: "+n+", size: "+a+").");if(w>1)return r[d]=r[d]||[],void r[d].push(i);u++,m&&(d=f),y&&(d=p),b&&(d=g),_&&(d=v)}}(5,this.data,this.containers,t,e,r,i),this},t.prototype.resize=function(t){this.clear(),this.data[0]=t.x,this.data[1]=t.y,this.data[2]=t.width,this.data[3]=t.height,function(t,e){for(var r=[0,0];r.length;){var i=r.pop(),o=r.pop(),n=4*o+4,a=4*o+8,s=4*o+12,c=4*o+16,h=e[o+0],l=e[o+1],u=e[o+2]/2,d=e[o+3]/2;e[n+0]=h,e[n+1]=l,e[n+2]=u,e[n+3]=d,e[a+0]=h+u,e[a+1]=l,e[a+2]=u,e[a+3]=d,e[s+0]=h,e[s+1]=l+d,e[s+2]=u,e[s+3]=d,e[c+0]=h+u,e[c+1]=l+d,e[c+2]=u,e[c+3]=d,i<t-1&&(r.push(c,i+1),r.push(s,i+1),r.push(a,i+1),r.push(n,i+1))}}(5,this.data)},t.prototype.clear=function(){return this.containers={},this},t.prototype.point=function(t,e){var r=[],n=0,a=0;do{this.containers[n]&&r.push.apply(r,o([],i(this.containers[n]))),n=4*n+4*u(t,e,this.data[n+0],this.data[n+1],this.data[n+2],this.data[n+3]),a++}while(a<=5);return r},t.prototype.rectangle=function(t,e,r,i,o){var n=this.lastRectangle;return n&&t===n.x1&&r===n.x2&&e===n.y1&&i===n.y2&&o===n.height||(this.lastRectangle={x1:t,y1:e,x2:r,y2:i,height:o},s(this.lastRectangle)||(this.lastRectangle=c(this.lastRectangle)),this.cache=function(t,e,r,i,o,n,s){for(var c,h=[0,0],u=[];h.length;){var d=h.pop(),f=h.pop();if((c=r[f])&&a.default(u,c),!(d>=t)){var p=4*f+4,g=4*f+8,v=4*f+12,m=4*f+16,y=l(i,o,n,s,e[p+0],e[p+1],e[p+2],e[p+3]),b=l(i,o,n,s,e[g+0],e[g+1],e[g+2],e[g+3]),_=l(i,o,n,s,e[v+0],e[v+1],e[v+2],e[v+3]),w=l(i,o,n,s,e[m+0],e[m+1],e[m+2],e[m+3]);y&&h.push(p,d+1),b&&h.push(g,d+1),_&&h.push(v,d+1),w&&h.push(m,d+1)}}return u}(5,this.data,this.containers,t,e,Math.abs(t-r)||Math.abs(e-i),o)),this.cache},t}();e.default=d},t=>{t.exports=function(t,e){var r=e.length;if(0!==r){var i=t.length;t.length+=r;for(var o=0;o<r;o++)t[i+o]=e[o]}}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.edgeLabelsToDisplayFromNodes=e.labelsToDisplayFromGrid=void 0;var o=i(r(14)),n={width:250,height:175},a={width:400,height:300};e.labelsToDisplayFromGrid=function(t){var e=t.cache,r=t.camera,i=t.cell,s=t.dimensions,c=t.displayedLabels,h=t.fontSize,l=void 0===h?14:h,u=t.graph,d=t.renderedSizeThreshold,f=void 0===d?-1/0:d,p=t.visibleNodes,g=r.getState(),v=r.getPreviousState(),m=new o.default;m.setState(v);var y=Math.pow(g.ratio,.5),b=g.ratio<v.ratio,_=g.x!==v.x||g.y!==v.y,w=g.ratio>v.ratio,x=_&&!b&&!w&&g.ratio>=1,L=_&&c.size&&!b&&!w;if(w&&Math.trunc(100*g.ratio)%5!=0)return Array.from(c);if(x&&0!==c.size)return Array.from(c);if(b&&g.ratio>=1)return Array.from(c);var E=i||n;g.ratio>=1.3&&(E=a);for(var A=s.width%E.width,M=E.width+A/Math.floor(s.width/E.width),S=s.height%E.height,T=E.height+S/Math.floor(s.height/E.height),P=s.width+M,O=s.height+T,C=-M,R=-T,k=s.width+M/2,D=s.height+T/2,F=-M/2,N=-T/2,j=[],z={},I=-1/0,U=null,G=0,H=p.length;G<H;G++){var B=e[et=p[G]];if(!B.hidden&&!(B.size/y<f)){var q=r.framedGraphToViewport(s,B);if(!(q.x<C||q.x>P||q.y<R||q.y>O)){if(B.size>I&&(I=B.size,U=et),L){var W=m.framedGraphToViewport(s,B);if(W.x>=F&&W.x<=k&&W.y>=N&&W.y<=D&&!c.has(et))continue}if(void 0===z[tt=Math.floor(q.x/M)+"§"+Math.floor(q.y/T)])z[tt]=et;else{var Y=z[tt],V=e[Y];if(c.size>0){var K=c.has(et),X=c.has(Y);if(!K&&X)continue;if(K&&!X){z[tt]=et;continue}if((L||b)&&K&&X){j.push(et);continue}}var Z=!1;if(B.size>V.size)Z=!0;else if(B.size===V.size){var Q=u.degree(et),$=u.degree(Y);(Q>$||Q===$&&et>Y)&&(Z=!0)}Z&&(z[tt]=et)}}}}var J=j.some((function(t){return t===U}));for(var tt in z){var et;(et=z[tt])===U&&(J=!0),j.push(et)}!J&&U&&j.push(U);var rt,it,ot,nt,at,st,ct,ht,lt=new Set;for(G=0,H=j.length;G<H;G++){var ut=e[K=j[G]],dt=r.framedGraphToViewport(s,ut);if(!lt.has(K))for(var ft=G+1;ft<H;ft++){var pt=e[X=j[ft]],gt=r.framedGraphToViewport(s,pt);(rt=dt.x,it=dt.y,ot=8*ut.label.length,nt=l,at=gt.x,st=gt.y,ct=8*pt.label.length,ht=l,rt<at+ct&&rt+ot>at&&it<st+ht&&it+nt>st)&&(ut.size<pt.size?lt.add(K):lt.add(X))}}return j.filter((function(t){return!lt.has(t)}))},e.edgeLabelsToDisplayFromNodes=function(t){var e=t.nodeDataCache,r=t.edgeDataCache,i=t.graph,o=t.hoveredNode,n=t.highlightedNodes,a=t.displayedNodeLabels,s=new Set,c=Array.from(a),h=Array.from(n);o&&!n.has(o)&&h.push(o);for(var l=0;l<h.length;l++)for(var u=h[l],d=i.edges(u),f=0;f<d.length;f++){var p=d[f],g=i.extremities(p),v=e[g[0]],m=e[g[1]];r[p].hidden&&v.hidden&&m.hidden&&s.add(p)}for(l=0;l<c.length;l++)for(u=c[l],d=i.outboundEdges(u),f=0;f<d.length;f++)!r[d[f]].hidden&&a.has(i.opposite(u,d[f]))&&s.add(d[f]);return Array.from(s)}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_SETTINGS=e.validateSettings=void 0;var o=i(r(26)),n=i(r(27)),a=i(r(29)),s=i(r(30)),c=i(r(36)),h=i(r(40));e.validateSettings=function(t){if(t.labelGrid&&t.labelGrid.cell&&"object"==typeof t.labelGrid.cell&&(!t.labelGrid.cell.width||!t.labelGrid.cell.height))throw new Error("Settings: invalid `labelGrid.cell`. Expecting {width, height}.")},e.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",labelGrid:{cell:null,renderedSizeThreshold:-1/0},nodeReducer:null,edgeReducer:null,zIndex:!1,labelRenderer:o.default,hoverRenderer:n.default,edgeLabelRenderer:a.default,nodeProgramClasses:{circle:s.default},edgeProgramClasses:{arrow:h.default,line:c.default}}},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){var i=r.labelSize,o=r.labelFont,n=r.labelWeight;t.fillStyle="#000",t.font=n+" "+i+"px "+o,t.fillText(e.label,e.x+e.size+3,e.y+i/3)}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(r(28)),n=i(r(26));e.default=function(t,e,r){var i=r.labelSize,a=r.labelFont,s=r.labelWeight;t.font=s+" "+i+"px "+a,t.beginPath(),t.fillStyle="#fff",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor="#000";var c=t.measureText(e.label).width,h=Math.round(e.x-i/2-2),l=Math.round(e.y-i/2-2),u=Math.round(c+i/2+e.size+9),d=Math.round(i+4),f=Math.round(i/2+2);t.moveTo(h,l+f),t.moveTo(h,l+f),t.arcTo(h,l,h+f,l,f),t.lineTo(h+u,l),t.lineTo(h+u,l+d),t.lineTo(h+f,l+d),t.arcTo(h,l+d,h,l+d-f,f),t.lineTo(h,l+f),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,o.default(t,e),n.default(t,e,r)}},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=2*Math.PI;e.default=function(t,e){t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,e.size,0,r,!0),t.closePath(),t.fill()}},(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r,i,o){var n=o.edgeLabelSize,a=o.edgeLabelFont,s=o.edgeLabelWeight,c=e.label;t.fillStyle=e.color,t.font=s+" "+n+"px "+a;var h,l=t.measureText(c).width,u=(r.x+i.x)/2,d=(r.y+i.y)/2,f=i.x-r.x,p=i.y-r.y,g=Math.sqrt(f*f+p*p);h=f>0?p>0?Math.acos(f/g):Math.asin(p/g):p>0?Math.acos(f/g)+Math.PI:Math.asin(f/g)+Math.PI/2,t.save(),t.translate(u,d),t.rotate(h),t.fillText(c,-l/2,e.size/2+n),t.restore()}},function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(16),s=n(r(31)),c=n(r(32)),h=r(33),l=function(t){function e(e){var r=t.call(this,e,s.default,c.default,1,4)||this;return r.bind(),r}return o(e,t),e.prototype.process=function(t,e,r){var i=this.array,o=1*r*4;if(e)return i[o++]=0,i[o++]=0,i[o++]=0,void(i[o++]=0);var n=a.floatColor(t.color);i[o++]=t.x,i[o++]=t.y,i[o++]=t.size,i[o]=n},e.prototype.render=function(t){var e=this.gl,r=this.program;e.useProgram(r),e.uniform1f(this.ratioLocation,1/Math.pow(t.ratio,t.nodesPowRatio)),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.drawArrays(e.POINTS,0,this.array.length/4)},e}(h.AbstractNodeProgram);e.default=l},t=>{(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{default:()=>i});const i="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";t.exports=r})()},t=>{(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{default:()=>i});const i="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\n\nvoid main(void) {\n  vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(color0, v_color, t);\n}\n";t.exports=r})()},function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.createNodeCompoundProgram=e.AbstractNodeProgram=void 0;var n=function(t){function e(e,r,i,o,n){var a=t.call(this,e,r,i,o,n)||this;a.positionLocation=e.getAttribLocation(a.program,"a_position"),a.sizeLocation=e.getAttribLocation(a.program,"a_size"),a.colorLocation=e.getAttribLocation(a.program,"a_color");var s=e.getUniformLocation(a.program,"u_matrix");if(null===s)throw new Error("AbstractNodeProgram: error while getting matrixLocation");a.matrixLocation=s;var c=e.getUniformLocation(a.program,"u_ratio");if(null===c)throw new Error("AbstractNodeProgram: error while getting ratioLocation");a.ratioLocation=c;var h=e.getUniformLocation(a.program,"u_scale");if(null===h)throw new Error("AbstractNodeProgram: error while getting scaleLocation");return a.scaleLocation=h,a}return o(e,t),e.prototype.bind=function(){var t=this.gl;t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.sizeLocation),t.enableVertexAttribArray(this.colorLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.sizeLocation,1,t.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},e}(r(34).AbstractProgram);e.AbstractNodeProgram=n,e.createNodeCompoundProgram=function(t){return function(){function e(e){this.programs=t.map((function(t){return new t(e)}))}return e.prototype.bufferData=function(){this.programs.forEach((function(t){return t.bufferData()}))},e.prototype.allocate=function(t){this.programs.forEach((function(e){return e.allocate(t)}))},e.prototype.bind=function(){},e.prototype.render=function(t){this.programs.forEach((function(e){return e.render(t)}))},e.prototype.process=function(t,e,r){this.programs.forEach((function(i){return i.process(t,e,r)}))},e}()}},(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractProgram=void 0;var i=r(35),o=function(){function t(t,e,r,o,n){this.array=new Float32Array,this.points=o,this.attributes=n,this.gl=t,this.vertexShaderSource=e,this.fragmentShaderSource=r;var a=t.createBuffer();if(null===a)throw new Error("AbstractProgram: error while creating the buffer");this.buffer=a,t.bindBuffer(t.ARRAY_BUFFER,this.buffer),this.vertexShader=i.loadVertexShader(t,this.vertexShaderSource),this.fragmentShader=i.loadFragmentShader(t,this.fragmentShaderSource),this.program=i.loadProgram(t,[this.vertexShader,this.fragmentShader])}return t.prototype.bufferData=function(){var t=this.gl;t.bufferData(t.ARRAY_BUFFER,this.array,t.DYNAMIC_DRAW)},t.prototype.allocate=function(t){this.array=new Float32Array(this.points*this.attributes*t)},t}();e.AbstractProgram=o},(t,e)=>{"use strict";function r(t,e,r){var i="VERTEX"===t?e.VERTEX_SHADER:e.FRAGMENT_SHADER,o=e.createShader(i);if(null===o)throw new Error("loadShader: error while creating the shader");if(e.shaderSource(o,r),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var n=e.getShaderInfoLog(o);throw e.deleteShader(o),new Error("loadShader: error while compiling the shader:\n"+n+"\n"+r)}return o}Object.defineProperty(e,"__esModule",{value:!0}),e.loadProgram=e.loadFragmentShader=e.loadVertexShader=void 0,e.loadVertexShader=function(t,e){return r("VERTEX",t,e)},e.loadFragmentShader=function(t,e){return r("FRAGMENT",t,e)},e.loadProgram=function(t,e){var r,i,o=t.createProgram();if(null===o)throw new Error("loadProgram: error while creating the program.");for(r=0,i=e.length;r<i;r++)t.attachShader(o,e[r]);if(t.linkProgram(o),!t.getProgramParameter(o,t.LINK_STATUS))throw t.deleteProgram(o),new Error("loadProgram: error while linking the program.");return o}},function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(16),s=n(r(37)),c=n(r(38)),h=r(39),l=function(t){function e(e){var r=t.call(this,e,s.default,c.default,4,6)||this,i=e.createBuffer();if(null===i)throw new Error("EdgeProgram: error while getting resolutionLocation");r.indicesBuffer=i,r.positionLocation=e.getAttribLocation(r.program,"a_position"),r.colorLocation=e.getAttribLocation(r.program,"a_color"),r.normalLocation=e.getAttribLocation(r.program,"a_normal"),r.thicknessLocation=e.getAttribLocation(r.program,"a_thickness");var o=e.getUniformLocation(r.program,"u_scale");if(null===o)throw new Error("EdgeProgram: error while getting scaleLocation");r.scaleLocation=o;var n=e.getUniformLocation(r.program,"u_matrix");if(null===n)throw new Error("EdgeProgram: error while getting matrixLocation");r.matrixLocation=n;var h=e.getUniformLocation(r.program,"u_cameraRatio");if(null===h)throw new Error("EdgeProgram: error while getting cameraRatioLocation");r.cameraRatioLocation=h;var l=e.getUniformLocation(r.program,"u_viewportRatio");if(null===l)throw new Error("EdgeProgram: error while getting viewportRatioLocation");r.viewportRatioLocation=l;var u=e.getUniformLocation(r.program,"u_thicknessRatio");if(null===u)throw new Error("EdgeProgram: error while getting thicknessRatioLocation");return r.thicknessRatioLocation=u,r.canUse32BitsIndices=a.canUse32BitsIndices(e),r.IndicesArray=r.canUse32BitsIndices?Uint32Array:Uint16Array,r.indicesArray=new r.IndicesArray,r.indicesType=r.canUse32BitsIndices?e.UNSIGNED_INT:e.UNSIGNED_SHORT,r.bind(),r}return o(e,t),e.prototype.bind=function(){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.thicknessLocation),t.enableVertexAttribArray(this.colorLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.thicknessLocation,1,t.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,20)},e.prototype.computeIndices=function(){for(var t=this.array.length/6,e=t+t/2,r=new this.IndicesArray(e),i=0,o=0;i<t;i+=4)r[o++]=i,r[o++]=i+1,r[o++]=i+2,r[o++]=i+2,r[o++]=i+1,r[o++]=i+3;this.indicesArray=r},e.prototype.bufferData=function(){t.prototype.bufferData.call(this);var e=this.gl;e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indicesArray,e.STATIC_DRAW)},e.prototype.process=function(t,e,r,i,o){if(i)for(var n=24*o,s=n+24;n<s;n++)this.array[n]=0;else{var c=r.size||1,h=t.x,l=t.y,u=e.x,d=e.y,f=a.floatColor(r.color),p=u-h,g=d-l,v=p*p+g*g,m=0,y=0;v&&(m=-g*(v=1/Math.sqrt(v)),y=p*v);var b=24*o,_=this.array;_[b++]=h,_[b++]=l,_[b++]=m,_[b++]=y,_[b++]=c,_[b++]=f,_[b++]=h,_[b++]=l,_[b++]=-m,_[b++]=-y,_[b++]=c,_[b++]=f,_[b++]=u,_[b++]=d,_[b++]=m,_[b++]=y,_[b++]=c,_[b++]=f,_[b++]=u,_[b++]=d,_[b++]=-m,_[b++]=-y,_[b++]=c,_[b]=f}},e.prototype.render=function(t){var e=this.gl,r=this.program;e.useProgram(r),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.cameraRatioLocation,t.ratio),e.uniform1f(this.viewportRatioLocation,1/Math.min(t.width,t.height)),e.uniform1f(this.thicknessRatioLocation,1/Math.pow(t.ratio,t.edgesPowRatio)),e.drawElements(e.TRIANGLES,this.indicesArray.length,this.indicesType,0)},e}(h.AbstractEdgeProgram);e.default=l},t=>{(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{default:()=>i});const i="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_thickness;\nattribute vec4 a_color;\n\nuniform mat3 u_matrix;\nuniform float u_scale;\nuniform float u_cameraRatio;\nuniform float u_viewportRatio;\nuniform float u_thicknessRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 0.8;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n\n  // Computing thickness in screen space:\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\n  thickness = max(thickness, minThickness * u_viewportRatio);\n\n  // Add normal vector to the position in screen space, but correct thickness first:\n  vec2 position = (u_matrix * vec3(a_position + a_normal * thickness * u_cameraRatio, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  v_normal = a_normal;\n  v_thickness = thickness;\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";t.exports=r})()},t=>{(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{default:()=>i});const i="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, color0, t);\n}\n";t.exports=r})()},function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.createEdgeCompoundProgram=e.AbstractEdgeProgram=void 0;var n=function(t){function e(e,r,i,o,n){return t.call(this,e,r,i,o,n)||this}return o(e,t),e}(r(34).AbstractProgram);e.AbstractEdgeProgram=n,e.createEdgeCompoundProgram=function(t){return function(){function e(e){this.programs=t.map((function(t){return new t(e)}))}return e.prototype.bufferData=function(){this.programs.forEach((function(t){return t.bufferData()}))},e.prototype.allocate=function(t){this.programs.forEach((function(e){return e.allocate(t)}))},e.prototype.bind=function(){},e.prototype.computeIndices=function(){this.programs.forEach((function(t){return t.computeIndices()}))},e.prototype.render=function(t){this.programs.forEach((function(e){e.bind(),e.bufferData(),e.render(t)}))},e.prototype.process=function(t,e,r,i,o){this.programs.forEach((function(n){return n.process(t,e,r,i,o)}))},e}()}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(39),n=i(r(41)),a=i(r(44)),s=o.createEdgeCompoundProgram([a.default,n.default]);e.default=s},function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(16),s=n(r(42)),c=n(r(43)),h=r(39),l=10,u=function(t){function e(e){var r=t.call(this,e,s.default,c.default,3,l)||this;r.positionLocation=e.getAttribLocation(r.program,"a_position"),r.colorLocation=e.getAttribLocation(r.program,"a_color"),r.normalLocation=e.getAttribLocation(r.program,"a_normal"),r.thicknessLocation=e.getAttribLocation(r.program,"a_thickness"),r.radiusLocation=e.getAttribLocation(r.program,"a_radius"),r.barycentricLocation=e.getAttribLocation(r.program,"a_barycentric");var i=e.getUniformLocation(r.program,"u_scale");if(null===i)throw new Error("EdgeArrowHeadProgram: error while getting scaleLocation");r.scaleLocation=i;var o=e.getUniformLocation(r.program,"u_matrix");if(null===o)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");r.matrixLocation=o;var n=e.getUniformLocation(r.program,"u_cameraRatio");if(null===n)throw new Error("EdgeArrowHeadProgram: error while getting cameraRatioLocation");r.cameraRatioLocation=n;var a=e.getUniformLocation(r.program,"u_viewportRatio");if(null===a)throw new Error("EdgeArrowHeadProgram: error while getting viewportRatioLocation");r.viewportRatioLocation=a;var h=e.getUniformLocation(r.program,"u_thicknessRatio");if(null===h)throw new Error("EdgeArrowHeadProgram: error while getting thicknessRatioLocation");return r.thicknessRatioLocation=h,r.bind(),r}return o(e,t),e.prototype.bind=function(){var t=this.gl;t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.thicknessLocation),t.enableVertexAttribArray(this.radiusLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.barycentricLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,l*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,l*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.thicknessLocation,1,t.FLOAT,!1,l*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,l*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,l*Float32Array.BYTES_PER_ELEMENT,24),t.vertexAttribPointer(this.barycentricLocation,3,t.FLOAT,!1,l*Float32Array.BYTES_PER_ELEMENT,28)},e.prototype.computeIndices=function(){},e.prototype.process=function(t,e,r,i,o){if(i)for(var n=30*o,s=n+30;n<s;n++)this.array[n]=0;else{var c=r.size||1,h=e.size||1,l=t.x,u=t.y,d=e.x,f=e.y,p=a.floatColor(r.color),g=d-l,v=f-u,m=g*g+v*v,y=0,b=0;m&&(y=-v*(m=1/Math.sqrt(m)),b=g*m);var _=30*o,w=this.array;w[_++]=d,w[_++]=f,w[_++]=-y,w[_++]=-b,w[_++]=c,w[_++]=h,w[_++]=p,w[_++]=1,w[_++]=0,w[_++]=0,w[_++]=d,w[_++]=f,w[_++]=-y,w[_++]=-b,w[_++]=c,w[_++]=h,w[_++]=p,w[_++]=0,w[_++]=1,w[_++]=0,w[_++]=d,w[_++]=f,w[_++]=-y,w[_++]=-b,w[_++]=c,w[_++]=h,w[_++]=p,w[_++]=0,w[_++]=0,w[_]=1}},e.prototype.render=function(t){var e=this.gl,r=this.program;e.useProgram(r),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.cameraRatioLocation,t.ratio),e.uniform1f(this.viewportRatioLocation,1/Math.min(t.width,t.height)),e.uniform1f(this.thicknessRatioLocation,1/Math.pow(t.ratio,t.edgesPowRatio)),e.drawArrays(e.TRIANGLES,0,this.array.length/l)},e}(h.AbstractEdgeProgram);e.default=u},t=>{(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{default:()=>i});const i="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_thickness;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_scale;\nuniform float u_cameraRatio;\nuniform float u_viewportRatio;\nuniform float u_thicknessRatio;\n\nvarying vec4 v_color;\n\nconst float arrowHeadLengthThicknessRatio = 2.5;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float minThickness = 0.8;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n\n  // Computing thickness in screen space:\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\n  thickness = max(thickness, minThickness * u_viewportRatio);\n\n  float nodeRadius = a_radius * u_thicknessRatio * u_viewportRatio * u_cameraRatio;\n  float arrowHeadLength = thickness * 2.0 * arrowHeadLengthThicknessRatio * u_cameraRatio;\n  float arrowHeadHalfWidth = arrowHeadWidthLengthRatio * arrowHeadLength / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * ((nodeRadius) * a_normal.y)\n    + db * ((nodeRadius + arrowHeadLength) * a_normal.y + arrowHeadHalfWidth * a_normal.x)\n    + dc * ((nodeRadius + arrowHeadLength) * a_normal.y - arrowHeadHalfWidth * a_normal.x),\n\n      da * (-(nodeRadius) * a_normal.x)\n    + db * (-(nodeRadius + arrowHeadLength) * a_normal.x + arrowHeadHalfWidth * a_normal.y)\n    + dc * (-(nodeRadius + arrowHeadLength) * a_normal.x - arrowHeadHalfWidth * a_normal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";t.exports=r})()},t=>{(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{default:()=>i});const i="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n";t.exports=r})()},function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(39),s=r(16),c=n(r(45)),h=n(r(38)),l=function(t){function e(e){var r=t.call(this,e,c.default,h.default,4,7)||this,i=e.createBuffer();if(null===i)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");r.indicesBuffer=i,r.positionLocation=e.getAttribLocation(r.program,"a_position"),r.colorLocation=e.getAttribLocation(r.program,"a_color"),r.normalLocation=e.getAttribLocation(r.program,"a_normal"),r.thicknessLocation=e.getAttribLocation(r.program,"a_thickness"),r.radiusLocation=e.getAttribLocation(r.program,"a_radius");var o=e.getUniformLocation(r.program,"u_scale");if(null===o)throw new Error("EdgeClampedProgram: error while getting scaleLocation");r.scaleLocation=o;var n=e.getUniformLocation(r.program,"u_matrix");if(null===n)throw new Error("EdgeClampedProgram: error while getting matrixLocation");r.matrixLocation=n;var a=e.getUniformLocation(r.program,"u_cameraRatio");if(null===a)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");r.cameraRatioLocation=a;var l=e.getUniformLocation(r.program,"u_viewportRatio");if(null===l)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");r.viewportRatioLocation=l;var u=e.getUniformLocation(r.program,"u_thicknessRatio");if(null===u)throw new Error("EdgeClampedProgram: error while getting thicknessRatioLocation");return r.thicknessRatioLocation=u,r.canUse32BitsIndices=s.canUse32BitsIndices(e),r.IndicesArray=r.canUse32BitsIndices?Uint32Array:Uint16Array,r.indicesArray=new r.IndicesArray,r.indicesType=r.canUse32BitsIndices?e.UNSIGNED_INT:e.UNSIGNED_SHORT,r.bind(),r}return o(e,t),e.prototype.bind=function(){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.enableVertexAttribArray(this.positionLocation),t.enableVertexAttribArray(this.normalLocation),t.enableVertexAttribArray(this.thicknessLocation),t.enableVertexAttribArray(this.colorLocation),t.enableVertexAttribArray(this.radiusLocation),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(this.normalLocation,2,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(this.thicknessLocation,1,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(this.colorLocation,4,t.UNSIGNED_BYTE,!0,7*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(this.radiusLocation,1,t.FLOAT,!1,7*Float32Array.BYTES_PER_ELEMENT,24)},e.prototype.process=function(t,e,r,i,o){if(i)for(var n=28*o,a=n+28;n<a;n++)this.array[n]=0;else{var c=r.size||1,h=t.x,l=t.y,u=e.x,d=e.y,f=e.size||1,p=s.floatColor(r.color),g=u-h,v=d-l,m=g*g+v*v,y=0,b=0;m&&(y=-v*(m=1/Math.sqrt(m)),b=g*m);var _=28*o,w=this.array;w[_++]=h,w[_++]=l,w[_++]=y,w[_++]=b,w[_++]=c,w[_++]=p,w[_++]=0,w[_++]=h,w[_++]=l,w[_++]=-y,w[_++]=-b,w[_++]=c,w[_++]=p,w[_++]=0,w[_++]=u,w[_++]=d,w[_++]=y,w[_++]=b,w[_++]=c,w[_++]=p,w[_++]=f,w[_++]=u,w[_++]=d,w[_++]=-y,w[_++]=-b,w[_++]=c,w[_++]=p,w[_]=-f}},e.prototype.computeIndices=function(){for(var t=this.array.length/7,e=t+t/2,r=new this.IndicesArray(e),i=0,o=0;i<t;i+=4)r[o++]=i,r[o++]=i+1,r[o++]=i+2,r[o++]=i+2,r[o++]=i+1,r[o++]=i+3;this.indicesArray=r},e.prototype.bufferData=function(){t.prototype.bufferData.call(this);var e=this.gl;e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indicesArray,e.STATIC_DRAW)},e.prototype.render=function(t){var e=this.gl,r=this.program;e.useProgram(r),e.uniform1f(this.scaleLocation,t.scalingRatio),e.uniformMatrix3fv(this.matrixLocation,!1,t.matrix),e.uniform1f(this.cameraRatioLocation,t.ratio),e.uniform1f(this.viewportRatioLocation,1/Math.min(t.width,t.height)),e.uniform1f(this.thicknessRatioLocation,1/Math.pow(t.ratio,t.edgesPowRatio)),e.drawElements(e.TRIANGLES,this.indicesArray.length,this.indicesType,0)},e}(a.AbstractEdgeProgram);e.default=l},t=>{(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{default:()=>i});const i="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_thickness;\nattribute vec4 a_color;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_scale;\nuniform float u_cameraRatio;\nuniform float u_viewportRatio;\nuniform float u_thicknessRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float arrowHeadLengthThicknessRatio = 2.5;\nconst float minThickness = 0.8;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n\n  // Computing thickness in screen space:\n  float thickness = a_thickness * u_thicknessRatio * u_scale * u_viewportRatio / 2.0;\n  thickness = max(thickness, minThickness * u_viewportRatio);\n\n  float direction = sign(a_radius);\n  float nodeRadius = direction * a_radius * u_thicknessRatio * u_viewportRatio;\n  float arrowHeadLength = thickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 arrowHeadVector = vec2(-direction * a_normal.y, direction * a_normal.x);\n\n  // Add normal vector to the position in screen space, but correct thickness first:\n  vec2 position = a_position + a_normal * thickness * u_cameraRatio;\n  // Add vector that corrects the arrow head length:\n  position = position + arrowHeadVector * (arrowHeadLength + nodeRadius) * u_cameraRatio;\n  // Apply camera\n  position = (u_matrix * vec3(position, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  v_normal = a_normal;\n  v_thickness = thickness;\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";t.exports=r})()},function(t,e,r){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),n=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return a(e,t),e},c=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,o,n=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=s(r(21)),u=h(r(14)),d=function(t){function e(e,r){var i=t.call(this,e,r)||this;return i.enabled=!0,i.isMoving=!1,i.touchMode=0,i.handleStart=i.handleStart.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleMove=i.handleMove.bind(i),e.addEventListener("touchstart",i.handleStart,!1),e.addEventListener("touchend",i.handleLeave,!1),e.addEventListener("touchcancel",i.handleLeave,!1),e.addEventListener("touchmove",i.handleMove,!1),i}return o(e,t),e.prototype.kill=function(){var t=this.container;t.removeEventListener("touchstart",this.handleStart),t.removeEventListener("touchend",this.handleLeave),t.removeEventListener("touchcancel",this.handleLeave),t.removeEventListener("touchmove",this.handleMove)},e.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},e.prototype.dispatchRelatedMouseEvent=function(t,e,r,i){var o=r||l.getPosition(e.touches[0]),n=new MouseEvent(t,{clientX:o.x,clientY:o.y,altKey:e.altKey,ctrlKey:e.ctrlKey});(i||this.container).dispatchEvent(n)},e.prototype.handleStart=function(t){if(this.enabled){t.preventDefault(),1===t.touches.length&&this.dispatchRelatedMouseEvent("mousedown",t);var e=l.getTouchesArray(t.touches);if(this.isMoving=!0,this.touchMode=e.length,this.startCameraState=this.camera.getState(),this.startTouchesPositions=e.map(l.getPosition),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var r=c(this.startTouchesPositions,2),i=r[0],o=i.x,n=i.y,a=r[1],s=a.x,h=a.y;this.startTouchesAngle=Math.atan2(h-n,s-o),this.startTouchesDistance=Math.sqrt(Math.pow(s-o,2)+Math.pow(h-n,2))}this.emit("touchdown",l.getTouchCoords(t))}},e.prototype.handleLeave=function(t){if(this.enabled){switch(t.preventDefault(),0===t.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",t,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",t,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===t.touches.length){this.handleStart(t),t.preventDefault();break}case 1:if(this.isMoving){var e=this.camera.getState(),r=this.camera.getPreviousState();this.camera.animate({x:e.x+3*(e.x-r.x),y:e.y+3*(e.y-r.y)},{duration:200,easing:"quadraticOut"})}this.isMoving=!1,this.touchMode=0}this.emit("touchup",l.getTouchCoords(t))}},e.prototype.handleMove=function(t){var e,r=this;if(this.enabled){t.preventDefault(),1===t.touches.length&&this.dispatchRelatedMouseEvent("mousemove",t);var i=this.startCameraState,o=l.getTouchesArray(t.touches).map(l.getPosition);switch(this.lastTouchesPositions=o,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout((function(){r.isMoving=!1}),200),this.touchMode){case 1:var n=this.camera.viewportToFramedGraph(this.getDimensions(),(this.startTouchesPositions||[])[0]),a=n.x,s=n.y,h=this.camera.viewportToFramedGraph(this.getDimensions(),o[0]),d=h.x,f=h.y;this.camera.setState({x:i.x+a-d,y:i.y+s-f});break;case 2:var p={},g=o[0],v=g.x,m=g.y,y=o[1],b=y.x,_=y.y,w=Math.atan2(_-m,b-v)-this.startTouchesAngle,x=Math.hypot(_-m,b-v)/this.startTouchesDistance;p.ratio=i.ratio/x,p.angle=i.angle+w;var L=this.getDimensions(),E=u.default.from(i).viewportToFramedGraph(L,(this.startTouchesPositions||[])[0]),A=Math.min(L.width,L.height),M=A/L.width,S=A/L.height,T=p.ratio/A;f=m-A/2/S;d=(e=c([(d=v-A/2/M)*Math.cos(-p.angle)-f*Math.sin(-p.angle),f*Math.cos(-p.angle)+d*Math.sin(-p.angle)],2))[0],f=e[1],p.x=E.x-d*T,p.y=E.y+f*T,this.camera.setState(p)}this.emit("touchmove",l.getTouchCoords(t))}},e}(l.default);e.default=d},e=>{"use strict";e.exports=t},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ZoomControl=void 0;const o=i(r(2)),n=r(1);e.ZoomControl=({animationDuration:t=200})=>{const e=n.useSigma();function r(r){e&&(r?r>0?e.getCamera().animatedZoom({duration:t}):r<0&&e.getCamera().animatedUnzoom({duration:t}):e.getCamera().animatedReset({duration:t}))}return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"react-sigma-control-zoom-in"},o.default.createElement("button",{onClick:()=>r(1),title:"Zoom In"})),o.default.createElement("div",{className:"react-sigma-control-zoom-out"},o.default.createElement("button",{onClick:()=>r(-1),title:"Zoom Out"})),o.default.createElement("div",{className:"react-sigma-control-zoom-center"},o.default.createElement("button",{onClick:()=>r(),title:"See whole graph"})))}},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ControlsContainer=void 0;const o=i(r(2));e.ControlsContainer=({children:t,position:e="bottom-left"})=>o.default.createElement("div",{className:`react-sigma-controls ${e}`},t)}],i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;var n=i[t]={exports:{}};return r[t].call(n.exports,n,n.exports,o),n.exports}var n={};return(()=>{"use strict";var t=n;Object.defineProperty(t,"__esModule",{value:!0}),t.useSetSettings=t.useLoadGraph=t.useRegisterEvents=t.useSigma=t.ZoomControl=t.SigmaContainer=t.ForceAtlasControl=t.ControlsContainer=void 0;const e=o(1);Object.defineProperty(t,"useSigma",{enumerable:!0,get:function(){return e.useSigma}}),Object.defineProperty(t,"useRegisterEvents",{enumerable:!0,get:function(){return e.useRegisterEvents}}),Object.defineProperty(t,"useLoadGraph",{enumerable:!0,get:function(){return e.useLoadGraph}}),Object.defineProperty(t,"useSetSettings",{enumerable:!0,get:function(){return e.useSetSettings}});const r=o(4);Object.defineProperty(t,"ForceAtlasControl",{enumerable:!0,get:function(){return r.ForceAtlasControl}});const i=o(10);Object.defineProperty(t,"SigmaContainer",{enumerable:!0,get:function(){return i.SigmaContainer}});const a=o(48);Object.defineProperty(t,"ZoomControl",{enumerable:!0,get:function(){return a.ZoomControl}});const s=o(49);Object.defineProperty(t,"ControlsContainer",{enumerable:!0,get:function(){return s.ControlsContainer}})})(),n})()}));
//# sourceMappingURL=react-sigma-v2.min.js.map